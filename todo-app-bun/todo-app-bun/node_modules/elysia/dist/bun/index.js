// @bun
var aY=Object.create;var{defineProperty:S8,getPrototypeOf:eY,getOwnPropertyNames:$X}=Object;var WX=Object.prototype.hasOwnProperty;var Q1=($,W,Y)=>{Y=$!=null?aY(eY($)):{};const X=W||!$||!$.__esModule?S8(Y,"default",{value:$,enumerable:!0}):Y;for(let Z of $X($))if(!WX.call(X,Z))S8(X,Z,{get:()=>$[Z],enumerable:!0});return X};var J0=($,W)=>()=>(W||$((W={exports:{}}).exports,W),W.exports);var R8=J0((j7,r$)=>{var s1=function(){},XX=function($,W,Y){this.fn=$,this.context=W,this.once=Y||!1},I8=function($,W,Y,X,Z){if(typeof Y!=="function")throw new TypeError("The listener must be a function");var Q=new XX(Y,X||$,Z),J=V0?V0+W:W;if(!$._events[J])$._events[J]=Q,$._eventsCount++;else if(!$._events[J].fn)$._events[J].push(Q);else $._events[J]=[$._events[J],Q];return $},K$=function($,W){if(--$._eventsCount===0)$._events=new s1;else delete $._events[W]},G0=function(){this._events=new s1,this._eventsCount=0},YX=Object.prototype.hasOwnProperty,V0="~";if(Object.create){if(s1.prototype=Object.create(null),!new s1().__proto__)V0=!1}G0.prototype.eventNames=function $(){var W=[],Y,X;if(this._eventsCount===0)return W;for(X in Y=this._events)if(YX.call(Y,X))W.push(V0?X.slice(1):X);if(Object.getOwnPropertySymbols)return W.concat(Object.getOwnPropertySymbols(Y));return W};G0.prototype.listeners=function $(W){var Y=V0?V0+W:W,X=this._events[Y];if(!X)return[];if(X.fn)return[X.fn];for(var Z=0,Q=X.length,J=new Array(Q);Z<Q;Z++)J[Z]=X[Z].fn;return J};G0.prototype.listenerCount=function $(W){var Y=V0?V0+W:W,X=this._events[Y];if(!X)return 0;if(X.fn)return 1;return X.length};G0.prototype.emit=function $(W,Y,X,Z,Q,J){var z=V0?V0+W:W;if(!this._events[z])return!1;var B=this._events[z],D=arguments.length,A,S;if(B.fn){if(B.once)this.removeListener(W,B.fn,void 0,!0);switch(D){case 1:return B.fn.call(B.context),!0;case 2:return B.fn.call(B.context,Y),!0;case 3:return B.fn.call(B.context,Y,X),!0;case 4:return B.fn.call(B.context,Y,X,Z),!0;case 5:return B.fn.call(B.context,Y,X,Z,Q),!0;case 6:return B.fn.call(B.context,Y,X,Z,Q,J),!0}for(S=1,A=new Array(D-1);S<D;S++)A[S-1]=arguments[S];B.fn.apply(B.context,A)}else{var G=B.length,K;for(S=0;S<G;S++){if(B[S].once)this.removeListener(W,B[S].fn,void 0,!0);switch(D){case 1:B[S].fn.call(B[S].context);break;case 2:B[S].fn.call(B[S].context,Y);break;case 3:B[S].fn.call(B[S].context,Y,X);break;case 4:B[S].fn.call(B[S].context,Y,X,Z);break;default:if(!A)for(K=1,A=new Array(D-1);K<D;K++)A[K-1]=arguments[K];B[S].fn.apply(B[S].context,A)}}}return!0};G0.prototype.on=function $(W,Y,X){return I8(this,W,Y,X,!1)};G0.prototype.once=function $(W,Y,X){return I8(this,W,Y,X,!0)};G0.prototype.removeListener=function $(W,Y,X,Z){var Q=V0?V0+W:W;if(!this._events[Q])return this;if(!Y)return K$(this,Q),this;var J=this._events[Q];if(J.fn){if(J.fn===Y&&(!Z||J.once)&&(!X||J.context===X))K$(this,Q)}else{for(var z=0,B=[],D=J.length;z<D;z++)if(J[z].fn!==Y||Z&&!J[z].once||X&&J[z].context!==X)B.push(J[z]);if(B.length)this._events[Q]=B.length===1?B[0]:B;else K$(this,Q)}return this};G0.prototype.removeAllListeners=function $(W){var Y;if(W){if(Y=V0?V0+W:W,this._events[Y])K$(this,Y)}else this._events=new s1,this._eventsCount=0;return this};G0.prototype.off=G0.prototype.removeListener;G0.prototype.addListener=G0.prototype.on;G0.prefixed=V0;G0.EventEmitter=G0;if(typeof r$!=="undefined")r$.exports=G0});var x0=J0((d8)=>{var ZX=function($){return j$($)&&(Symbol.asyncIterator in $)},QX=function($){return j$($)&&(Symbol.iterator in $)},JX=function($){return ArrayBuffer.isView($)},zX=function($){return $ instanceof Promise},HX=function($){return $ instanceof Uint8Array},qX=function($){return $ instanceof Date&&Number.isFinite($.getTime())},MX=function($,W){return W in $},NX=function($){return j$($)&&f8($.constructor)&&$.constructor.name==="Object"},j$=function($){return $!==null&&typeof $==="object"},UX=function($){return Array.isArray($)&&!ArrayBuffer.isView($)},E8=function($){return $===void 0},V8=function($){return $===null},x8=function($){return typeof $==="boolean"},a$=function($){return typeof $==="number"},BX=function($){return a$($)&&Number.isInteger($)},k8=function($){return typeof $==="bigint"},g8=function($){return typeof $==="string"},f8=function($){return typeof $==="function"},T8=function($){return typeof $==="symbol"},FX=function($){return k8($)||x8($)||V8($)||a$($)||g8($)||T8($)||E8($)};Object.defineProperty(d8,"__esModule",{value:!0});d8.IsValueType=d8.IsSymbol=d8.IsFunction=d8.IsString=d8.IsBigInt=d8.IsInteger=d8.IsNumber=d8.IsBoolean=d8.IsNull=d8.IsUndefined=d8.IsArray=d8.IsObject=d8.IsPlainObject=d8.HasPropertyKey=d8.IsDate=d8.IsUint8Array=d8.IsPromise=d8.IsTypedArray=d8.IsIterator=d8.IsAsyncIterator=void 0;d8.IsAsyncIterator=ZX;d8.IsIterator=QX;d8.IsTypedArray=JX;d8.IsPromise=zX;d8.IsUint8Array=HX;d8.IsDate=qX;d8.HasPropertyKey=MX;d8.IsPlainObject=NX;d8.IsObject=j$;d8.IsArray=UX;d8.IsUndefined=E8;d8.IsNull=V8;d8.IsBoolean=x8;d8.IsNumber=a$;d8.IsInteger=BX;d8.IsBigInt=k8;d8.IsString=g8;d8.IsFunction=f8;d8.IsSymbol=T8;d8.IsValueType=FX});var f0=J0((m8)=>{Object.defineProperty(m8,"__esModule",{value:!0});m8.Type=m8.JsonType=m8.JavaScriptTypeBuilder=m8.JsonTypeBuilder=m8.TypeBuilder=m8.TypeBuilderError=m8.TransformEncodeBuilder=m8.TransformDecodeBuilder=m8.TemplateLiteralDslParser=m8.TemplateLiteralGenerator=m8.TemplateLiteralGeneratorError=m8.TemplateLiteralFinite=m8.TemplateLiteralFiniteError=m8.TemplateLiteralParser=m8.TemplateLiteralParserError=m8.TemplateLiteralResolver=m8.TemplateLiteralPattern=m8.TemplateLiteralPatternError=m8.UnionResolver=m8.KeyArrayResolver=m8.KeyArrayResolverError=m8.KeyResolver=m8.ObjectMap=m8.Intrinsic=m8.IndexedAccessor=m8.TypeClone=m8.TypeExtends=m8.TypeExtendsResult=m8.TypeExtendsError=m8.ExtendsUndefined=m8.TypeGuard=m8.TypeGuardUnknownTypeError=m8.ValueGuard=m8.FormatRegistry=m8.TypeBoxError=m8.TypeRegistry=m8.PatternStringExact=m8.PatternNumberExact=m8.PatternBooleanExact=m8.PatternString=m8.PatternNumber=m8.PatternBoolean=m8.Kind=m8.Hint=m8.Optional=m8.Readonly=m8.Transform=void 0;m8.Transform=Symbol.for("TypeBox.Transform");m8.Readonly=Symbol.for("TypeBox.Readonly");m8.Optional=Symbol.for("TypeBox.Optional");m8.Hint=Symbol.for("TypeBox.Hint");m8.Kind=Symbol.for("TypeBox.Kind");m8.PatternBoolean="(true|false)";m8.PatternNumber="(0|[1-9][0-9]*)";m8.PatternString="(.*)";m8.PatternBooleanExact=`^${m8.PatternBoolean}\$`;m8.PatternNumberExact=`^${m8.PatternNumber}\$`;m8.PatternStringExact=`^${m8.PatternString}\$`;var e$;(function($){const W=new Map;function Y(){return new Map(W)}$.Entries=Y;function X(){return W.clear()}$.Clear=X;function Z(B){return W.delete(B)}$.Delete=Z;function Q(B){return W.has(B)}$.Has=Q;function J(B,D){W.set(B,D)}$.Set=J;function z(B){return W.get(B)}$.Get=z})(e$||(m8.TypeRegistry=e$={}));class $1 extends Error{constructor($){super($)}}m8.TypeBoxError=$1;var v8;(function($){const W=new Map;function Y(){return new Map(W)}$.Entries=Y;function X(){return W.clear()}$.Clear=X;function Z(B){return W.delete(B)}$.Delete=Z;function Q(B){return W.has(B)}$.Has=Q;function J(B,D){W.set(B,D)}$.Set=J;function z(B){return W.get(B)}$.Get=z})(v8||(m8.FormatRegistry=v8={}));var V;(function($){function W(D){return Array.isArray(D)}$.IsArray=W;function Y(D){return typeof D==="bigint"}$.IsBigInt=Y;function X(D){return typeof D==="boolean"}$.IsBoolean=X;function Z(D){return D===null}$.IsNull=Z;function Q(D){return typeof D==="number"}$.IsNumber=Q;function J(D){return typeof D==="object"&&D!==null}$.IsObject=J;function z(D){return typeof D==="string"}$.IsString=z;function B(D){return D===void 0}$.IsUndefined=B})(V||(m8.ValueGuard=V={}));class i8 extends $1{}m8.TypeGuardUnknownTypeError=i8;var F;(function($){function W(M){try{return new RegExp(M),!0}catch{return!1}}function Y(M){if(!V.IsString(M))return!1;for(let l=0;l<M.length;l++){const S0=M.charCodeAt(l);if(S0>=7&&S0<=13||S0===27||S0===127)return!1}return!0}function X(M){return J(M)||X0(M)}function Z(M){return V.IsUndefined(M)||V.IsBigInt(M)}function Q(M){return V.IsUndefined(M)||V.IsNumber(M)}function J(M){return V.IsUndefined(M)||V.IsBoolean(M)}function z(M){return V.IsUndefined(M)||V.IsString(M)}function B(M){return V.IsUndefined(M)||V.IsString(M)&&Y(M)&&W(M)}function D(M){return V.IsUndefined(M)||V.IsString(M)&&Y(M)}function A(M){return V.IsUndefined(M)||X0(M)}function S(M){return _(M,"Any")&&z(M.$id)}$.TAny=S;function G(M){return _(M,"Array")&&M.type==="array"&&z(M.$id)&&X0(M.items)&&Q(M.minItems)&&Q(M.maxItems)&&J(M.uniqueItems)&&A(M.contains)&&Q(M.minContains)&&Q(M.maxContains)}$.TArray=G;function K(M){return _(M,"AsyncIterator")&&M.type==="AsyncIterator"&&z(M.$id)&&X0(M.items)}$.TAsyncIterator=K;function N(M){return _(M,"BigInt")&&M.type==="bigint"&&z(M.$id)&&Z(M.exclusiveMaximum)&&Z(M.exclusiveMinimum)&&Z(M.maximum)&&Z(M.minimum)&&Z(M.multipleOf)}$.TBigInt=N;function j(M){return _(M,"Boolean")&&M.type==="boolean"&&z(M.$id)}$.TBoolean=j;function O(M){return _(M,"Constructor")&&M.type==="Constructor"&&z(M.$id)&&V.IsArray(M.parameters)&&M.parameters.every((l)=>X0(l))&&X0(M.returns)}$.TConstructor=O;function U(M){return _(M,"Date")&&M.type==="Date"&&z(M.$id)&&Q(M.exclusiveMaximumTimestamp)&&Q(M.exclusiveMinimumTimestamp)&&Q(M.maximumTimestamp)&&Q(M.minimumTimestamp)&&Q(M.multipleOfTimestamp)}$.TDate=U;function w(M){return _(M,"Function")&&M.type==="Function"&&z(M.$id)&&V.IsArray(M.parameters)&&M.parameters.every((l)=>X0(l))&&X0(M.returns)}$.TFunction=w;function I(M){return _(M,"Integer")&&M.type==="integer"&&z(M.$id)&&Q(M.exclusiveMaximum)&&Q(M.exclusiveMinimum)&&Q(M.maximum)&&Q(M.minimum)&&Q(M.multipleOf)}$.TInteger=I;function R(M){return _(M,"Intersect")&&(V.IsString(M.type)&&M.type!=="object"?!1:!0)&&V.IsArray(M.allOf)&&M.allOf.every((l)=>X0(l)&&!D0(l))&&z(M.type)&&(J(M.unevaluatedProperties)||A(M.unevaluatedProperties))&&z(M.$id)}$.TIntersect=R;function x(M){return _(M,"Iterator")&&M.type==="Iterator"&&z(M.$id)&&X0(M.items)}$.TIterator=x;function _(M,l){return e(M)&&M[m8.Kind]===l}$.TKindOf=_;function e(M){return V.IsObject(M)&&(m8.Kind in M)&&V.IsString(M[m8.Kind])}$.TKind=e;function o(M){return R0(M)&&V.IsString(M.const)}$.TLiteralString=o;function r(M){return R0(M)&&V.IsNumber(M.const)}$.TLiteralNumber=r;function g0(M){return R0(M)&&V.IsBoolean(M.const)}$.TLiteralBoolean=g0;function R0(M){return _(M,"Literal")&&z(M.$id)&&(V.IsBoolean(M.const)||V.IsNumber(M.const)||V.IsString(M.const))}$.TLiteral=R0;function E0(M){return _(M,"Never")&&V.IsObject(M.not)&&Object.getOwnPropertyNames(M.not).length===0}$.TNever=E0;function H0(M){return _(M,"Not")&&X0(M.not)}$.TNot=H0;function z0(M){return _(M,"Null")&&M.type==="null"&&z(M.$id)}$.TNull=z0;function u0(M){return _(M,"Number")&&M.type==="number"&&z(M.$id)&&Q(M.exclusiveMaximum)&&Q(M.exclusiveMinimum)&&Q(M.maximum)&&Q(M.minimum)&&Q(M.multipleOf)}$.TNumber=u0;function a0(M){return _(M,"Object")&&M.type==="object"&&z(M.$id)&&V.IsObject(M.properties)&&X(M.additionalProperties)&&Q(M.minProperties)&&Q(M.maxProperties)&&Object.entries(M.properties).every(([l,S0])=>Y(l)&&X0(S0))}$.TObject=a0;function v0(M){return _(M,"Promise")&&M.type==="Promise"&&z(M.$id)&&X0(M.item)}$.TPromise=v0;function b(M){return _(M,"Record")&&M.type==="object"&&z(M.$id)&&X(M.additionalProperties)&&V.IsObject(M.patternProperties)&&((l)=>{const S0=Object.getOwnPropertyNames(l.patternProperties);return S0.length===1&&W(S0[0])&&V.IsObject(l.patternProperties)&&X0(l.patternProperties[S0[0]])})(M)}$.TRecord=b;function f(M){return V.IsObject(M)&&(m8.Hint in M)&&M[m8.Hint]==="Recursive"}$.TRecursive=f;function i(M){return _(M,"Ref")&&z(M.$id)&&V.IsString(M.$ref)}$.TRef=i;function n(M){return _(M,"String")&&M.type==="string"&&z(M.$id)&&Q(M.minLength)&&Q(M.maxLength)&&B(M.pattern)&&D(M.format)}$.TString=n;function q0(M){return _(M,"Symbol")&&M.type==="symbol"&&z(M.$id)}$.TSymbol=q0;function A0(M){return _(M,"TemplateLiteral")&&M.type==="string"&&V.IsString(M.pattern)&&M.pattern[0]==="^"&&M.pattern[M.pattern.length-1]==="$"}$.TTemplateLiteral=A0;function w0(M){return _(M,"This")&&z(M.$id)&&V.IsString(M.$ref)}$.TThis=w0;function D0(M){return V.IsObject(M)&&(m8.Transform in M)}$.TTransform=D0;function M0(M){return _(M,"Tuple")&&M.type==="array"&&z(M.$id)&&V.IsNumber(M.minItems)&&V.IsNumber(M.maxItems)&&M.minItems===M.maxItems&&(V.IsUndefined(M.items)&&V.IsUndefined(M.additionalItems)&&M.minItems===0||V.IsArray(M.items)&&M.items.every((l)=>X0(l)))}$.TTuple=M0;function A1(M){return _(M,"Undefined")&&M.type==="undefined"&&z(M.$id)}$.TUndefined=A1;function P(M){return E(M)&&M.anyOf.every((l)=>o(l)||r(l))}$.TUnionLiteral=P;function E(M){return _(M,"Union")&&z(M.$id)&&V.IsObject(M)&&V.IsArray(M.anyOf)&&M.anyOf.every((l)=>X0(l))}$.TUnion=E;function L(M){return _(M,"Uint8Array")&&M.type==="Uint8Array"&&z(M.$id)&&Q(M.minByteLength)&&Q(M.maxByteLength)}$.TUint8Array=L;function p(M){return _(M,"Unknown")&&z(M.$id)}$.TUnknown=p;function T(M){return _(M,"Unsafe")}$.TUnsafe=T;function d(M){return _(M,"Void")&&M.type==="void"&&z(M.$id)}$.TVoid=d;function Y0(M){return V.IsObject(M)&&M[m8.Readonly]==="Readonly"}$.TReadonly=Y0;function j0(M){return V.IsObject(M)&&M[m8.Optional]==="Optional"}$.TOptional=j0;function X0(M){return V.IsObject(M)&&(S(M)||G(M)||j(M)||N(M)||K(M)||O(M)||U(M)||w(M)||I(M)||R(M)||x(M)||R0(M)||E0(M)||H0(M)||z0(M)||u0(M)||a0(M)||v0(M)||b(M)||i(M)||n(M)||q0(M)||A0(M)||w0(M)||M0(M)||A1(M)||E(M)||L(M)||p(M)||T(M)||d(M)||e(M)&&e$.Has(M[m8.Kind]))}$.TSchema=X0})(F||(m8.TypeGuard=F={}));var p8;(function($){function W(Y){return Y[m8.Kind]==="Intersect"?Y.allOf.every((X)=>W(X)):Y[m8.Kind]==="Union"?Y.anyOf.some((X)=>W(X)):Y[m8.Kind]==="Undefined"?!0:Y[m8.Kind]==="Not"?!W(Y.not):!1}$.Check=W})(p8||(m8.ExtendsUndefined=p8={}));class X6 extends $1{}m8.TypeExtendsError=X6;var C;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(C||(m8.TypeExtendsResult=C={}));var P1;(function($){function W(H){return H===C.False?H:C.True}function Y(H){throw new X6(H)}function X(H){return F.TNever(H)||F.TIntersect(H)||F.TUnion(H)||F.TUnknown(H)||F.TAny(H)}function Z(H,q){return F.TNever(q)?_(H,q):F.TIntersect(q)?w(H,q):F.TUnion(q)?t$(H,q):F.TUnknown(q)?O8(H,q):F.TAny(q)?Q(H,q):Y("StructuralRight")}function Q(H,q){return C.True}function J(H,q){return F.TIntersect(q)?w(H,q):F.TUnion(q)&&q.anyOf.some(($0)=>F.TAny($0)||F.TUnknown($0))?C.True:F.TUnion(q)?C.Union:F.TUnknown(q)?C.True:F.TAny(q)?C.True:C.Union}function z(H,q){return F.TUnknown(H)?C.False:F.TAny(H)?C.Union:F.TNever(H)?C.True:C.False}function B(H,q){return F.TObject(q)&&A0(q)?C.True:X(q)?Z(H,q):!F.TArray(q)?C.False:W(Q0(H.items,q.items))}function D(H,q){return X(q)?Z(H,q):!F.TAsyncIterator(q)?C.False:W(Q0(H.items,q.items))}function A(H,q){return X(q)?Z(H,q):F.TObject(q)?M0(H,q):F.TRecord(q)?p(H,q):F.TBigInt(q)?C.True:C.False}function S(H,q){return F.TLiteral(H)&&V.IsBoolean(H.const)?C.True:F.TBoolean(H)?C.True:C.False}function G(H,q){return X(q)?Z(H,q):F.TObject(q)?M0(H,q):F.TRecord(q)?p(H,q):F.TBoolean(q)?C.True:C.False}function K(H,q){return X(q)?Z(H,q):F.TObject(q)?M0(H,q):!F.TConstructor(q)?C.False:H.parameters.length>q.parameters.length?C.False:!H.parameters.every(($0,h0)=>W(Q0(q.parameters[h0],$0))===C.True)?C.False:W(Q0(H.returns,q.returns))}function N(H,q){return X(q)?Z(H,q):F.TObject(q)?M0(H,q):F.TRecord(q)?p(H,q):F.TDate(q)?C.True:C.False}function j(H,q){return X(q)?Z(H,q):F.TObject(q)?M0(H,q):!F.TFunction(q)?C.False:H.parameters.length>q.parameters.length?C.False:!H.parameters.every(($0,h0)=>W(Q0(q.parameters[h0],$0))===C.True)?C.False:W(Q0(H.returns,q.returns))}function O(H,q){return F.TLiteral(H)&&V.IsNumber(H.const)?C.True:F.TNumber(H)||F.TInteger(H)?C.True:C.False}function U(H,q){return F.TInteger(q)||F.TNumber(q)?C.True:X(q)?Z(H,q):F.TObject(q)?M0(H,q):F.TRecord(q)?p(H,q):C.False}function w(H,q){return q.allOf.every(($0)=>Q0(H,$0)===C.True)?C.True:C.False}function I(H,q){return H.allOf.some(($0)=>Q0($0,q)===C.True)?C.True:C.False}function R(H,q){return X(q)?Z(H,q):!F.TIterator(q)?C.False:W(Q0(H.items,q.items))}function x(H,q){return F.TLiteral(q)&&q.const===H.const?C.True:X(q)?Z(H,q):F.TObject(q)?M0(H,q):F.TRecord(q)?p(H,q):F.TString(q)?d(H,q):F.TNumber(q)?R0(H,q):F.TInteger(q)?O(H,q):F.TBoolean(q)?S(H,q):C.False}function _(H,q){return C.False}function e(H,q){return C.True}function o(H){let[q,$0]=[H,0];while(!0){if(!F.TNot(q))break;q=q.not,$0+=1}return $0%2===0?q:m8.Type.Unknown()}function r(H,q){return F.TNot(H)?Q0(o(H),q):F.TNot(q)?Q0(H,o(q)):Y("Invalid fallthrough for Not")}function g0(H,q){return X(q)?Z(H,q):F.TObject(q)?M0(H,q):F.TRecord(q)?p(H,q):F.TNull(q)?C.True:C.False}function R0(H,q){return F.TLiteralNumber(H)?C.True:F.TNumber(H)||F.TInteger(H)?C.True:C.False}function E0(H,q){return X(q)?Z(H,q):F.TObject(q)?M0(H,q):F.TRecord(q)?p(H,q):F.TInteger(q)||F.TNumber(q)?C.True:C.False}function H0(H,q){return Object.getOwnPropertyNames(H.properties).length===q}function z0(H){return A0(H)}function u0(H){return H0(H,0)||H0(H,1)&&("description"in H.properties)&&F.TUnion(H.properties.description)&&H.properties.description.anyOf.length===2&&(F.TString(H.properties.description.anyOf[0])&&F.TUndefined(H.properties.description.anyOf[1])||F.TString(H.properties.description.anyOf[1])&&F.TUndefined(H.properties.description.anyOf[0]))}function a0(H){return H0(H,0)}function v0(H){return H0(H,0)}function b(H){return H0(H,0)}function f(H){return H0(H,0)}function i(H){return A0(H)}function n(H){const q=m8.Type.Number();return H0(H,0)||H0(H,1)&&("length"in H.properties)&&W(Q0(H.properties.length,q))===C.True}function q0(H){return H0(H,0)}function A0(H){const q=m8.Type.Number();return H0(H,0)||H0(H,1)&&("length"in H.properties)&&W(Q0(H.properties.length,q))===C.True}function w0(H){const q=m8.Type.Function([m8.Type.Any()],m8.Type.Any());return H0(H,0)||H0(H,1)&&("then"in H.properties)&&W(Q0(H.properties.then,q))===C.True}function D0(H,q){return Q0(H,q)===C.False?C.False:F.TOptional(H)&&!F.TOptional(q)?C.False:C.True}function M0(H,q){return F.TUnknown(H)?C.False:F.TAny(H)?C.Union:F.TNever(H)||F.TLiteralString(H)&&z0(q)||F.TLiteralNumber(H)&&a0(q)||F.TLiteralBoolean(H)&&v0(q)||F.TSymbol(H)&&u0(q)||F.TBigInt(H)&&b(q)||F.TString(H)&&z0(q)||F.TSymbol(H)&&u0(q)||F.TNumber(H)&&a0(q)||F.TInteger(H)&&a0(q)||F.TBoolean(H)&&v0(q)||F.TUint8Array(H)&&i(q)||F.TDate(H)&&f(q)||F.TConstructor(H)&&q0(q)||F.TFunction(H)&&n(q)?C.True:F.TRecord(H)&&F.TString(E(H))?(()=>{return q[m8.Hint]==="Record"?C.True:C.False})():F.TRecord(H)&&F.TNumber(E(H))?(()=>{return H0(q,0)?C.True:C.False})():C.False}function A1(H,q){return X(q)?Z(H,q):F.TRecord(q)?p(H,q):!F.TObject(q)?C.False:(()=>{for(let $0 of Object.getOwnPropertyNames(q.properties)){if(!($0 in H.properties))return C.False;if(D0(H.properties[$0],q.properties[$0])===C.False)return C.False}return C.True})()}function P(H,q){return X(q)?Z(H,q):F.TObject(q)&&w0(q)?C.True:!F.TPromise(q)?C.False:W(Q0(H.item,q.item))}function E(H){return m8.PatternNumberExact in H.patternProperties?m8.Type.Number():(m8.PatternStringExact in H.patternProperties)?m8.Type.String():Y("Unknown record key pattern")}function L(H){return m8.PatternNumberExact in H.patternProperties?H.patternProperties[m8.PatternNumberExact]:(m8.PatternStringExact in H.patternProperties)?H.patternProperties[m8.PatternStringExact]:Y("Unable to get record value schema")}function p(H,q){const[$0,h0]=[E(q),L(q)];return F.TLiteralString(H)&&F.TNumber($0)&&W(Q0(H,h0))===C.True?C.True:F.TUint8Array(H)&&F.TNumber($0)?Q0(H,h0):F.TString(H)&&F.TNumber($0)?Q0(H,h0):F.TArray(H)&&F.TNumber($0)?Q0(H,h0):F.TObject(H)?(()=>{for(let rY of Object.getOwnPropertyNames(H.properties))if(D0(h0,H.properties[rY])===C.False)return C.False;return C.True})():C.False}function T(H,q){return X(q)?Z(H,q):F.TObject(q)?M0(H,q):!F.TRecord(q)?C.False:Q0(L(H),L(q))}function d(H,q){return F.TLiteral(H)&&V.IsString(H.const)?C.True:F.TString(H)?C.True:C.False}function Y0(H,q){return X(q)?Z(H,q):F.TObject(q)?M0(H,q):F.TRecord(q)?p(H,q):F.TString(q)?C.True:C.False}function j0(H,q){return X(q)?Z(H,q):F.TObject(q)?M0(H,q):F.TRecord(q)?p(H,q):F.TSymbol(q)?C.True:C.False}function X0(H,q){return F.TTemplateLiteral(H)?Q0(J1.Resolve(H),q):F.TTemplateLiteral(q)?Q0(H,J1.Resolve(q)):Y("Invalid fallthrough for TemplateLiteral")}function M(H,q){return F.TArray(q)&&H.items!==void 0&&H.items.every(($0)=>Q0($0,q.items)===C.True)}function l(H,q){return F.TNever(H)?C.True:F.TUnknown(H)?C.False:F.TAny(H)?C.Union:C.False}function S0(H,q){return X(q)?Z(H,q):F.TObject(q)&&A0(q)?C.True:F.TArray(q)&&M(H,q)?C.True:!F.TTuple(q)?C.False:V.IsUndefined(H.items)&&!V.IsUndefined(q.items)||!V.IsUndefined(H.items)&&V.IsUndefined(q.items)?C.False:V.IsUndefined(H.items)&&!V.IsUndefined(q.items)?C.True:H.items.every(($0,h0)=>Q0($0,q.items[h0])===C.True)?C.True:C.False}function c$(H,q){return X(q)?Z(H,q):F.TObject(q)?M0(H,q):F.TRecord(q)?p(H,q):F.TUint8Array(q)?C.True:C.False}function l$(H,q){return X(q)?Z(H,q):F.TObject(q)?M0(H,q):F.TRecord(q)?p(H,q):F.TVoid(q)?lY(H,q):F.TUndefined(q)?C.True:C.False}function t$(H,q){return q.anyOf.some(($0)=>Q0(H,$0)===C.True)?C.True:C.False}function nY(H,q){return H.anyOf.every(($0)=>Q0($0,q)===C.True)?C.True:C.False}function O8(H,q){return C.True}function cY(H,q){return F.TNever(q)?_(H,q):F.TIntersect(q)?w(H,q):F.TUnion(q)?t$(H,q):F.TAny(q)?Q(H,q):F.TString(q)?d(H,q):F.TNumber(q)?R0(H,q):F.TInteger(q)?O(H,q):F.TBoolean(q)?S(H,q):F.TArray(q)?z(H,q):F.TTuple(q)?l(H,q):F.TObject(q)?M0(H,q):F.TUnknown(q)?C.True:C.False}function lY(H,q){return F.TUndefined(H)?C.True:F.TUndefined(H)?C.True:C.False}function tY(H,q){return F.TIntersect(q)?w(H,q):F.TUnion(q)?t$(H,q):F.TUnknown(q)?O8(H,q):F.TAny(q)?Q(H,q):F.TObject(q)?M0(H,q):F.TVoid(q)?C.True:C.False}function Q0(H,q){return F.TTemplateLiteral(H)||F.TTemplateLiteral(q)?X0(H,q):F.TNot(H)||F.TNot(q)?r(H,q):F.TAny(H)?J(H,q):F.TArray(H)?B(H,q):F.TBigInt(H)?A(H,q):F.TBoolean(H)?G(H,q):F.TAsyncIterator(H)?D(H,q):F.TConstructor(H)?K(H,q):F.TDate(H)?N(H,q):F.TFunction(H)?j(H,q):F.TInteger(H)?U(H,q):F.TIntersect(H)?I(H,q):F.TIterator(H)?R(H,q):F.TLiteral(H)?x(H,q):F.TNever(H)?e(H,q):F.TNull(H)?g0(H,q):F.TNumber(H)?E0(H,q):F.TObject(H)?A1(H,q):F.TRecord(H)?T(H,q):F.TString(H)?Y0(H,q):F.TSymbol(H)?j0(H,q):F.TTuple(H)?S0(H,q):F.TPromise(H)?P(H,q):F.TUint8Array(H)?c$(H,q):F.TUndefined(H)?l$(H,q):F.TUnion(H)?nY(H,q):F.TUnknown(H)?cY(H,q):F.TVoid(H)?tY(H,q):Y(`Unknown left type operand '${H[m8.Kind]}'`)}function sY(H,q){return Q0(H,q)}$.Extends=sY})(P1||(m8.TypeExtends=P1={}));var m;(function($){function W(J){const z=Object.getOwnPropertyNames(J).reduce((D,A)=>({...D,[A]:X(J[A])}),{}),B=Object.getOwnPropertySymbols(J).reduce((D,A)=>({...D,[A]:X(J[A])}),{});return{...z,...B}}function Y(J){return J.map((z)=>X(z))}function X(J){return V.IsArray(J)?Y(J):V.IsObject(J)?W(J):J}function Z(J){return J.map((z)=>Q(z))}$.Rest=Z;function Q(J,z={}){return{...X(J),...z}}$.Type=Q})(m||(m8.TypeClone=m={}));var $6;(function($){function W(K){return K.map((N)=>{const{[m8.Optional]:j,...O}=m.Type(N);return O})}function Y(K){return K.every((N)=>F.TOptional(N))}function X(K){return K.some((N)=>F.TOptional(N))}function Z(K){return Y(K.allOf)?m8.Type.Optional(m8.Type.Intersect(W(K.allOf))):K}function Q(K){return X(K.anyOf)?m8.Type.Optional(m8.Type.Union(W(K.anyOf))):K}function J(K){return K[m8.Kind]==="Intersect"?Z(K):K[m8.Kind]==="Union"?Q(K):K}function z(K,N){const j=K.allOf.reduce((O,U)=>{const w=S(U,N);return w[m8.Kind]==="Never"?O:[...O,w]},[]);return J(m8.Type.Intersect(j))}function B(K,N){const j=K.anyOf.map((O)=>S(O,N));return J(m8.Type.Union(j))}function D(K,N){const j=K.properties[N];return V.IsUndefined(j)?m8.Type.Never():m8.Type.Union([j])}function A(K,N){const j=K.items;if(V.IsUndefined(j))return m8.Type.Never();const O=j[N];if(V.IsUndefined(O))return m8.Type.Never();return O}function S(K,N){return K[m8.Kind]==="Intersect"?z(K,N):K[m8.Kind]==="Union"?B(K,N):K[m8.Kind]==="Object"?D(K,N):K[m8.Kind]==="Tuple"?A(K,N):m8.Type.Never()}function G(K,N,j={}){const O=N.map((U)=>S(K,U.toString()));return J(m8.Type.Union(O,j))}$.Resolve=G})($6||(m8.IndexedAccessor=$6={}));var E1;(function($){function W(A){const[S,G]=[A.slice(0,1),A.slice(1)];return`${S.toLowerCase()}${G}`}function Y(A){const[S,G]=[A.slice(0,1),A.slice(1)];return`${S.toUpperCase()}${G}`}function X(A){return A.toUpperCase()}function Z(A){return A.toLowerCase()}function Q(A,S){const G=g1.ParseExact(A.pattern);if(!f1.Check(G))return{...A,pattern:J(A.pattern,S)};const j=[...T1.Generate(G)].map((w)=>m8.Type.Literal(w)),O=z(j,S),U=m8.Type.Union(O);return m8.Type.TemplateLiteral([U])}function J(A,S){return typeof A==="string"?S==="Uncapitalize"?W(A):S==="Capitalize"?Y(A):S==="Uppercase"?X(A):S==="Lowercase"?Z(A):A:A.toString()}function z(A,S){if(A.length===0)return[];const[G,...K]=A;return[D(G,S),...z(K,S)]}function B(A,S){return F.TTemplateLiteral(A)?Q(A,S):F.TUnion(A)?m8.Type.Union(z(A.anyOf,S)):F.TLiteral(A)?m8.Type.Literal(J(A.const,S)):A}function D(A,S){return B(A,S)}$.Map=D})(E1||(m8.Intrinsic=E1={}));var V1;(function($){function W(J,z){return m8.Type.Intersect(J.allOf.map((B)=>Z(B,z)),{...J})}function Y(J,z){return m8.Type.Union(J.anyOf.map((B)=>Z(B,z)),{...J})}function X(J,z){return z(J)}function Z(J,z){return J[m8.Kind]==="Intersect"?W(J,z):J[m8.Kind]==="Union"?Y(J,z):J[m8.Kind]==="Object"?X(J,z):J}function Q(J,z,B){return{...Z(m.Type(J),z),...B}}$.Map=Q})(V1||(m8.ObjectMap=V1={}));var P$;(function($){function W(D){return D[0]==="^"&&D[D.length-1]==="$"?D.slice(1,D.length-1):D}function Y(D,A){return D.allOf.reduce((S,G)=>[...S,...J(G,A)],[])}function X(D,A){const S=D.anyOf.map((G)=>J(G,A));return[...S.reduce((G,K)=>K.map((N)=>S.every((j)=>j.includes(N))?G.add(N):G)[0],new Set)]}function Z(D,A){return Object.getOwnPropertyNames(D.properties)}function Q(D,A){return A.includePatterns?Object.getOwnPropertyNames(D.patternProperties):[]}function J(D,A){return F.TIntersect(D)?Y(D,A):F.TUnion(D)?X(D,A):F.TObject(D)?Z(D,A):F.TRecord(D)?Q(D,A):[]}function z(D,A){return[...new Set(J(D,A))]}$.ResolveKeys=z;function B(D){return`^(${z(D,{includePatterns:!0}).map((G)=>`(${W(G)})`).join("|")})\$`}$.ResolvePattern=B})(P$||(m8.KeyResolver=P$={}));class Z6 extends $1{}m8.KeyArrayResolverError=Z6;var r1;(function($){function W(Y){return Array.isArray(Y)?Y:F.TUnionLiteral(Y)?Y.anyOf.map((X)=>X.const.toString()):F.TLiteral(Y)?[Y.const]:F.TTemplateLiteral(Y)?(()=>{const X=g1.ParseExact(Y.pattern);if(!f1.Check(X))throw new Z6("Cannot resolve keys from infinite template expression");return[...T1.Generate(X)]})():[]}$.Resolve=W})(r1||(m8.KeyArrayResolver=r1={}));var W6;(function($){function*W(X){for(let Z of X.anyOf)if(Z[m8.Kind]==="Union")yield*W(Z);else yield Z}function Y(X){return m8.Type.Union([...W(X)],{...X})}$.Resolve=Y})(W6||(m8.UnionResolver=W6={}));class Q6 extends $1{}m8.TemplateLiteralPatternError=Q6;var O$;(function($){function W(Q){throw new Q6(Q)}function Y(Q){return Q.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function X(Q,J){return F.TTemplateLiteral(Q)?Q.pattern.slice(1,Q.pattern.length-1):F.TUnion(Q)?`(${Q.anyOf.map((z)=>X(z,J)).join("|")})`:F.TNumber(Q)?`${J}${m8.PatternNumber}`:F.TInteger(Q)?`${J}${m8.PatternNumber}`:F.TBigInt(Q)?`${J}${m8.PatternNumber}`:F.TString(Q)?`${J}${m8.PatternString}`:F.TLiteral(Q)?`${J}${Y(Q.const.toString())}`:F.TBoolean(Q)?`${J}${m8.PatternBoolean}`:W(`Unexpected Kind '${Q[m8.Kind]}'`)}function Z(Q){return`^${Q.map((J)=>X(J,"")).join("")}$`}$.Create=Z})(O$||(m8.TemplateLiteralPattern=O$={}));var J1;(function($){function W(Y){const X=g1.ParseExact(Y.pattern);if(!f1.Check(X))return m8.Type.String();const Z=[...T1.Generate(X)].map((Q)=>m8.Type.Literal(Q));return m8.Type.Union(Z)}$.Resolve=W})(J1||(m8.TemplateLiteralResolver=J1={}));class S$ extends $1{}m8.TemplateLiteralParserError=S$;var g1;(function($){function W(K,N,j){return K[N]===j&&K.charCodeAt(N-1)!==92}function Y(K,N){return W(K,N,"(")}function X(K,N){return W(K,N,")")}function Z(K,N){return W(K,N,"|")}function Q(K){if(!(Y(K,0)&&X(K,K.length-1)))return!1;let N=0;for(let j=0;j<K.length;j++){if(Y(K,j))N+=1;if(X(K,j))N-=1;if(N===0&&j!==K.length-1)return!1}return!0}function J(K){return K.slice(1,K.length-1)}function z(K){let N=0;for(let j=0;j<K.length;j++){if(Y(K,j))N+=1;if(X(K,j))N-=1;if(Z(K,j)&&N===0)return!0}return!1}function B(K){for(let N=0;N<K.length;N++)if(Y(K,N))return!0;return!1}function D(K){let[N,j]=[0,0];const O=[];for(let w=0;w<K.length;w++){if(Y(K,w))N+=1;if(X(K,w))N-=1;if(Z(K,w)&&N===0){const I=K.slice(j,w);if(I.length>0)O.push(S(I));j=w+1}}const U=K.slice(j);if(U.length>0)O.push(S(U));if(O.length===0)return{type:"const",const:""};if(O.length===1)return O[0];return{type:"or",expr:O}}function A(K){function N(U,w){if(!Y(U,w))throw new S$("TemplateLiteralParser: Index must point to open parens");let I=0;for(let R=w;R<U.length;R++){if(Y(U,R))I+=1;if(X(U,R))I-=1;if(I===0)return[w,R]}throw new S$("TemplateLiteralParser: Unclosed group parens in expression")}function j(U,w){for(let I=w;I<U.length;I++)if(Y(U,I))return[w,I];return[w,U.length]}const O=[];for(let U=0;U<K.length;U++)if(Y(K,U)){const[w,I]=N(K,U),R=K.slice(w,I+1);O.push(S(R)),U=I}else{const[w,I]=j(K,U),R=K.slice(w,I);if(R.length>0)O.push(S(R));U=I-1}return O.length===0?{type:"const",const:""}:O.length===1?O[0]:{type:"and",expr:O}}function S(K){return Q(K)?S(J(K)):z(K)?D(K):B(K)?A(K):{type:"const",const:K}}$.Parse=S;function G(K){return S(K.slice(1,K.length-1))}$.ParseExact=G})(g1||(m8.TemplateLiteralParser=g1={}));class J6 extends $1{}m8.TemplateLiteralFiniteError=J6;var f1;(function($){function W(J){throw new J6(J)}function Y(J){return J.type==="or"&&J.expr.length===2&&J.expr[0].type==="const"&&J.expr[0].const==="0"&&J.expr[1].type==="const"&&J.expr[1].const==="[1-9][0-9]*"}function X(J){return J.type==="or"&&J.expr.length===2&&J.expr[0].type==="const"&&J.expr[0].const==="true"&&J.expr[1].type==="const"&&J.expr[1].const==="false"}function Z(J){return J.type==="const"&&J.const===".*"}function Q(J){return X(J)?!0:Y(J)||Z(J)?!1:J.type==="and"?J.expr.every((z)=>Q(z)):J.type==="or"?J.expr.every((z)=>Q(z)):J.type==="const"?!0:W("Unknown expression type")}$.Check=Q})(f1||(m8.TemplateLiteralFinite=f1={}));class z6 extends $1{}m8.TemplateLiteralGeneratorError=z6;var T1;(function($){function*W(J){if(J.length===1)return yield*J[0];for(let z of J[0])for(let B of W(J.slice(1)))yield`${z}${B}`}function*Y(J){return yield*W(J.expr.map((z)=>[...Q(z)]))}function*X(J){for(let z of J.expr)yield*Q(z)}function*Z(J){return yield J.const}function*Q(J){return J.type==="and"?yield*Y(J):J.type==="or"?yield*X(J):J.type==="const"?yield*Z(J):(()=>{throw new z6("Unknown expression")})()}$.Generate=Q})(T1||(m8.TemplateLiteralGenerator=T1={}));var Y6;(function($){function*W(Q){const J=Q.trim().replace(/"|'/g,"");return J==="boolean"?yield m8.Type.Boolean():J==="number"?yield m8.Type.Number():J==="bigint"?yield m8.Type.BigInt():J==="string"?yield m8.Type.String():yield(()=>{const z=J.split("|").map((B)=>m8.Type.Literal(B.trim()));return z.length===0?m8.Type.Never():z.length===1?z[0]:m8.Type.Union(z)})()}function*Y(Q){if(Q[1]!=="{"){const J=m8.Type.Literal("$"),z=X(Q.slice(1));return yield*[J,...z]}for(let J=2;J<Q.length;J++)if(Q[J]==="}"){const z=W(Q.slice(2,J)),B=X(Q.slice(J+1));return yield*[...z,...B]}yield m8.Type.Literal(Q)}function*X(Q){for(let J=0;J<Q.length;J++)if(Q[J]==="$"){const z=m8.Type.Literal(Q.slice(0,J)),B=Y(Q.slice(J));return yield*[z,...B]}yield m8.Type.Literal(Q)}function Z(Q){return[...X(Q)]}$.Parse=Z})(Y6||(m8.TemplateLiteralDslParser=Y6={}));class H6{constructor($){this.schema=$}Decode($){return new q6(this.schema,$)}}m8.TransformDecodeBuilder=H6;class q6{constructor($,W){this.schema=$,this.decode=W}Encode($){const W=m.Type(this.schema);return F.TTransform(W)?(()=>{const Z={Encode:(Q)=>W[m8.Transform].Encode($(Q)),Decode:(Q)=>this.decode(W[m8.Transform].Decode(Q))};return{...W,[m8.Transform]:Z}})():(()=>{const Y={Decode:this.decode,Encode:$};return{...W,[m8.Transform]:Y}})()}}m8.TransformEncodeBuilder=q6;var gX=0;class M6 extends $1{}m8.TypeBuilderError=M6;class N6{Create($){return $}Throw($){throw new M6($)}Discard($,W){return W.reduce((Y,X)=>{const{[X]:Z,...Q}=Y;return Q},$)}Strict($){return JSON.parse(JSON.stringify($))}}m8.TypeBuilder=N6;class L$ extends N6{ReadonlyOptional($){return this.Readonly(this.Optional($))}Readonly($){return{...m.Type($),[m8.Readonly]:"Readonly"}}Optional($){return{...m.Type($),[m8.Optional]:"Optional"}}Any($={}){return this.Create({...$,[m8.Kind]:"Any"})}Array($,W={}){return this.Create({...W,[m8.Kind]:"Array",type:"array",items:m.Type($)})}Boolean($={}){return this.Create({...$,[m8.Kind]:"Boolean",type:"boolean"})}Capitalize($,W={}){return{...E1.Map(m.Type($),"Capitalize"),...W}}Composite($,W){const Y=m8.Type.Intersect($,{}),Z=P$.ResolveKeys(Y,{includePatterns:!1}).reduce((Q,J)=>({...Q,[J]:m8.Type.Index(Y,[J])}),{});return m8.Type.Object(Z,W)}Enum($,W={}){const Y=Object.getOwnPropertyNames($).filter((Q)=>isNaN(Q)).map((Q)=>$[Q]),Z=[...new Set(Y)].map((Q)=>m8.Type.Literal(Q));return this.Union(Z,{...W,[m8.Hint]:"Enum"})}Extends($,W,Y,X,Z={}){switch(P1.Extends($,W)){case C.Union:return this.Union([m.Type(Y,Z),m.Type(X,Z)]);case C.True:return m.Type(Y,Z);case C.False:return m.Type(X,Z)}}Exclude($,W,Y={}){return F.TTemplateLiteral($)?this.Exclude(J1.Resolve($),W,Y):F.TTemplateLiteral(W)?this.Exclude($,J1.Resolve(W),Y):F.TUnion($)?(()=>{const X=$.anyOf.filter((Z)=>P1.Extends(Z,W)===C.False);return X.length===1?m.Type(X[0],Y):this.Union(X,Y)})():P1.Extends($,W)!==C.False?this.Never(Y):m.Type($,Y)}Extract($,W,Y={}){return F.TTemplateLiteral($)?this.Extract(J1.Resolve($),W,Y):F.TTemplateLiteral(W)?this.Extract($,J1.Resolve(W),Y):F.TUnion($)?(()=>{const X=$.anyOf.filter((Z)=>P1.Extends(Z,W)!==C.False);return X.length===1?m.Type(X[0],Y):this.Union(X,Y)})():P1.Extends($,W)!==C.False?m.Type($,Y):this.Never(Y)}Index($,W,Y={}){return F.TArray($)&&F.TNumber(W)?(()=>{return m.Type($.items,Y)})():F.TTuple($)&&F.TNumber(W)?(()=>{const Z=(V.IsUndefined($.items)?[]:$.items).map((Q)=>m.Type(Q));return this.Union(Z,Y)})():(()=>{const X=r1.Resolve(W),Z=m.Type($);return $6.Resolve(Z,X,Y)})()}Integer($={}){return this.Create({...$,[m8.Kind]:"Integer",type:"integer"})}Intersect($,W={}){if($.length===0)return m8.Type.Never();if($.length===1)return m.Type($[0],W);if($.some((Q)=>F.TTransform(Q)))this.Throw("Cannot intersect transform types");const Y=$.every((Q)=>F.TObject(Q)),X=m.Rest($),Z=F.TSchema(W.unevaluatedProperties)?{unevaluatedProperties:m.Type(W.unevaluatedProperties)}:{};return W.unevaluatedProperties===!1||F.TSchema(W.unevaluatedProperties)||Y?this.Create({...W,...Z,[m8.Kind]:"Intersect",type:"object",allOf:X}):this.Create({...W,...Z,[m8.Kind]:"Intersect",allOf:X})}KeyOf($,W={}){return F.TRecord($)?(()=>{const Y=Object.getOwnPropertyNames($.patternProperties)[0];return Y===m8.PatternNumberExact?this.Number(W):Y===m8.PatternStringExact?this.String(W):this.Throw("Unable to resolve key type from Record key pattern")})():F.TTuple($)?(()=>{const X=(V.IsUndefined($.items)?[]:$.items).map((Z,Q)=>m8.Type.Literal(Q.toString()));return this.Union(X,W)})():F.TArray($)?(()=>{return this.Number(W)})():(()=>{const Y=P$.ResolveKeys($,{includePatterns:!1});if(Y.length===0)return this.Never(W);const X=Y.map((Z)=>this.Literal(Z));return this.Union(X,W)})()}Literal($,W={}){return this.Create({...W,[m8.Kind]:"Literal",const:$,type:typeof $})}Lowercase($,W={}){return{...E1.Map(m.Type($),"Lowercase"),...W}}Never($={}){return this.Create({...$,[m8.Kind]:"Never",not:{}})}Not($,W){return this.Create({...W,[m8.Kind]:"Not",not:m.Type($)})}Null($={}){return this.Create({...$,[m8.Kind]:"Null",type:"null"})}Number($={}){return this.Create({...$,[m8.Kind]:"Number",type:"number"})}Object($,W={}){const Y=Object.getOwnPropertyNames($),X=Y.filter((z)=>F.TOptional($[z])),Z=Y.filter((z)=>!X.includes(z)),Q=F.TSchema(W.additionalProperties)?{additionalProperties:m.Type(W.additionalProperties)}:{},J=Y.reduce((z,B)=>({...z,[B]:m.Type($[B])}),{});return Z.length>0?this.Create({...W,...Q,[m8.Kind]:"Object",type:"object",properties:J,required:Z}):this.Create({...W,...Q,[m8.Kind]:"Object",type:"object",properties:J})}Omit($,W,Y={}){const X=r1.Resolve(W);return V1.Map(this.Discard(m.Type($),["$id",m8.Transform]),(Z)=>{if(V.IsArray(Z.required)){if(Z.required=Z.required.filter((Q)=>!X.includes(Q)),Z.required.length===0)delete Z.required}for(let Q of Object.getOwnPropertyNames(Z.properties))if(X.includes(Q))delete Z.properties[Q];return this.Create(Z)},Y)}Partial($,W={}){return V1.Map(this.Discard(m.Type($),["$id",m8.Transform]),(Y)=>{const X=Object.getOwnPropertyNames(Y.properties).reduce((Z,Q)=>{return{...Z,[Q]:this.Optional(Y.properties[Q])}},{});return this.Object(X,this.Discard(Y,["required"]))},W)}Pick($,W,Y={}){const X=r1.Resolve(W);return V1.Map(this.Discard(m.Type($),["$id",m8.Transform]),(Z)=>{if(V.IsArray(Z.required)){if(Z.required=Z.required.filter((Q)=>X.includes(Q)),Z.required.length===0)delete Z.required}for(let Q of Object.getOwnPropertyNames(Z.properties))if(!X.includes(Q))delete Z.properties[Q];return this.Create(Z)},Y)}Record($,W,Y={}){return F.TTemplateLiteral($)?(()=>{const X=g1.ParseExact($.pattern);return f1.Check(X)?this.Object([...T1.Generate(X)].reduce((Z,Q)=>({...Z,[Q]:m.Type(W)}),{}),Y):this.Create({...Y,[m8.Kind]:"Record",type:"object",patternProperties:{[$.pattern]:m.Type(W)}})})():F.TUnion($)?(()=>{const X=W6.Resolve($);if(F.TUnionLiteral(X)){const Z=X.anyOf.reduce((Q,J)=>({...Q,[J.const]:m.Type(W)}),{});return this.Object(Z,{...Y,[m8.Hint]:"Record"})}else this.Throw("Record key of type union contains non-literal types")})():F.TLiteral($)?(()=>{return V.IsString($.const)||V.IsNumber($.const)?this.Object({[$.const]:m.Type(W)},Y):this.Throw("Record key of type literal is not of type string or number")})():F.TInteger($)||F.TNumber($)?(()=>{return this.Create({...Y,[m8.Kind]:"Record",type:"object",patternProperties:{[m8.PatternNumberExact]:m.Type(W)}})})():F.TString($)?(()=>{const X=V.IsUndefined($.pattern)?m8.PatternStringExact:$.pattern;return this.Create({...Y,[m8.Kind]:"Record",type:"object",patternProperties:{[X]:m.Type(W)}})})():this.Never()}Recursive($,W={}){if(V.IsUndefined(W.$id))W.$id=`T${gX++}`;const Y=$({[m8.Kind]:"This",$ref:`${W.$id}`});return Y.$id=W.$id,this.Create({...W,[m8.Hint]:"Recursive",...Y})}Ref($,W={}){if(V.IsString($))return this.Create({...W,[m8.Kind]:"Ref",$ref:$});if(V.IsUndefined($.$id))this.Throw("Reference target type must specify an $id");return this.Create({...W,[m8.Kind]:"Ref",$ref:$.$id})}Required($,W={}){return V1.Map(this.Discard(m.Type($),["$id",m8.Transform]),(Y)=>{const X=Object.getOwnPropertyNames(Y.properties).reduce((Z,Q)=>{return{...Z,[Q]:this.Discard(Y.properties[Q],[m8.Optional])}},{});return this.Object(X,Y)},W)}Rest($){return F.TTuple($)&&!V.IsUndefined($.items)?m.Rest($.items):F.TIntersect($)?m.Rest($.allOf):F.TUnion($)?m.Rest($.anyOf):[]}String($={}){return this.Create({...$,[m8.Kind]:"String",type:"string"})}TemplateLiteral($,W={}){const Y=V.IsString($)?O$.Create(Y6.Parse($)):O$.Create($);return this.Create({...W,[m8.Kind]:"TemplateLiteral",type:"string",pattern:Y})}Transform($){return new H6($)}Tuple($,W={}){const[Y,X,Z]=[!1,$.length,$.length],Q=m.Rest($),J=$.length>0?{...W,[m8.Kind]:"Tuple",type:"array",items:Q,additionalItems:Y,minItems:X,maxItems:Z}:{...W,[m8.Kind]:"Tuple",type:"array",minItems:X,maxItems:Z};return this.Create(J)}Uncapitalize($,W={}){return{...E1.Map(m.Type($),"Uncapitalize"),...W}}Union($,W={}){return F.TTemplateLiteral($)?J1.Resolve($):(()=>{const Y=$;if(Y.length===0)return this.Never(W);if(Y.length===1)return this.Create(m.Type(Y[0],W));const X=m.Rest(Y);return this.Create({...W,[m8.Kind]:"Union",anyOf:X})})()}Unknown($={}){return this.Create({...$,[m8.Kind]:"Unknown"})}Unsafe($={}){return this.Create({...$,[m8.Kind]:$[m8.Kind]||"Unsafe"})}Uppercase($,W={}){return{...E1.Map(m.Type($),"Uppercase"),...W}}}m8.JsonTypeBuilder=L$;class U6 extends L${AsyncIterator($,W={}){return this.Create({...W,[m8.Kind]:"AsyncIterator",type:"AsyncIterator",items:m.Type($)})}Awaited($,W={}){const Y=(X)=>X.length>0?(()=>{const[Z,...Q]=X;return[this.Awaited(Z),...Y(Q)]})():X;return F.TIntersect($)?m8.Type.Intersect(Y($.allOf)):F.TUnion($)?m8.Type.Union(Y($.anyOf)):F.TPromise($)?this.Awaited($.item):m.Type($,W)}BigInt($={}){return this.Create({...$,[m8.Kind]:"BigInt",type:"bigint"})}ConstructorParameters($,W={}){return this.Tuple([...$.parameters],{...W})}Constructor($,W,Y){const[X,Z]=[m.Rest($),m.Type(W)];return this.Create({...Y,[m8.Kind]:"Constructor",type:"Constructor",parameters:X,returns:Z})}Date($={}){return this.Create({...$,[m8.Kind]:"Date",type:"Date"})}Function($,W,Y){const[X,Z]=[m.Rest($),m.Type(W)];return this.Create({...Y,[m8.Kind]:"Function",type:"Function",parameters:X,returns:Z})}InstanceType($,W={}){return m.Type($.returns,W)}Iterator($,W={}){return this.Create({...W,[m8.Kind]:"Iterator",type:"Iterator",items:m.Type($)})}Parameters($,W={}){return this.Tuple($.parameters,{...W})}Promise($,W={}){return this.Create({...W,[m8.Kind]:"Promise",type:"Promise",item:m.Type($)})}RegExp($,W={}){const Y=V.IsString($)?$:$.source;return this.Create({...W,[m8.Kind]:"String",type:"string",pattern:Y})}RegEx($,W={}){return this.RegExp($,W)}ReturnType($,W={}){return m.Type($.returns,W)}Symbol($){return this.Create({...$,[m8.Kind]:"Symbol",type:"symbol"})}Undefined($={}){return this.Create({...$,[m8.Kind]:"Undefined",type:"undefined"})}Uint8Array($={}){return this.Create({...$,[m8.Kind]:"Uint8Array",type:"Uint8Array"})}Void($={}){return this.Create({...$,[m8.Kind]:"Void",type:"void"})}}m8.JavaScriptTypeBuilder=U6;m8.JsonType=new L$;m8.Type=new U6});var j6=J0((n8)=>{var w6=function($,W){switch(W){case y.ValueErrorType.ArrayContains:return"Expected array to contain at least one matching value";case y.ValueErrorType.ArrayMaxContains:return`Expected array to contain no more than ${$.maxContains} matching values`;case y.ValueErrorType.ArrayMinContains:return`Expected array to contain at least ${$.minContains} matching values`;case y.ValueErrorType.ArrayMaxItems:return`Expected array length to be less or equal to ${$.maxItems}`;case y.ValueErrorType.ArrayMinItems:return`Expected array length to be greater or equal to ${$.minItems}`;case y.ValueErrorType.ArrayUniqueItems:return"Expected array elements to be unique";case y.ValueErrorType.Array:return"Expected array";case y.ValueErrorType.AsyncIterator:return"Expected AsyncIterator";case y.ValueErrorType.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.exclusiveMaximum}`;case y.ValueErrorType.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.exclusiveMinimum}`;case y.ValueErrorType.BigIntMaximum:return`Expected bigint to be less or equal to ${$.maximum}`;case y.ValueErrorType.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.minimum}`;case y.ValueErrorType.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.multipleOf}`;case y.ValueErrorType.BigInt:return"Expected bigint";case y.ValueErrorType.Boolean:return"Expected boolean";case y.ValueErrorType.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.exclusiveMinimumTimestamp}`;case y.ValueErrorType.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.exclusiveMaximumTimestamp}`;case y.ValueErrorType.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.minimumTimestamp}`;case y.ValueErrorType.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.maximumTimestamp}`;case y.ValueErrorType.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.multipleOfTimestamp}`;case y.ValueErrorType.Date:return"Expected Date";case y.ValueErrorType.Function:return"Expected function";case y.ValueErrorType.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.exclusiveMaximum}`;case y.ValueErrorType.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.exclusiveMinimum}`;case y.ValueErrorType.IntegerMaximum:return`Expected integer to be less or equal to ${$.maximum}`;case y.ValueErrorType.IntegerMinimum:return`Expected integer to be greater or equal to ${$.minimum}`;case y.ValueErrorType.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.multipleOf}`;case y.ValueErrorType.Integer:return"Expected integer";case y.ValueErrorType.IntersectUnevaluatedProperties:return"Unexpected property";case y.ValueErrorType.Intersect:return"Expected all values to match";case y.ValueErrorType.Iterator:return"Expected Iterator";case y.ValueErrorType.Literal:return`Expected ${typeof $.const==="string"?`'${$.const}'`:$.const}`;case y.ValueErrorType.Never:return"Never";case y.ValueErrorType.Not:return"Value should not match";case y.ValueErrorType.Null:return"Expected null";case y.ValueErrorType.NumberExclusiveMaximum:return`Expected number to be less than ${$.exclusiveMaximum}`;case y.ValueErrorType.NumberExclusiveMinimum:return`Expected number to be greater than ${$.exclusiveMinimum}`;case y.ValueErrorType.NumberMaximum:return`Expected number to be less or equal to ${$.maximum}`;case y.ValueErrorType.NumberMinimum:return`Expected number to be greater or equal to ${$.minimum}`;case y.ValueErrorType.NumberMultipleOf:return`Expected number to be a multiple of ${$.multipleOf}`;case y.ValueErrorType.Number:return"Expected number";case y.ValueErrorType.Object:return"Expected object";case y.ValueErrorType.ObjectAdditionalProperties:return"Unexpected property";case y.ValueErrorType.ObjectMaxProperties:return`Expected object to have no more than ${$.maxProperties} properties`;case y.ValueErrorType.ObjectMinProperties:return`Expected object to have at least ${$.minProperties} properties`;case y.ValueErrorType.ObjectRequiredProperty:return"Required property";case y.ValueErrorType.Promise:return"Expected Promise";case y.ValueErrorType.StringFormatUnknown:return`Unknown format '${$.format}'`;case y.ValueErrorType.StringFormat:return`Expected string to match '${$.format}' format`;case y.ValueErrorType.StringMaxLength:return`Expected string length less or equal to ${$.maxLength}`;case y.ValueErrorType.StringMinLength:return`Expected string length greater or equal to ${$.minLength}`;case y.ValueErrorType.StringPattern:return`Expected string to match '${$.pattern}'`;case y.ValueErrorType.String:return"Expected string";case y.ValueErrorType.Symbol:return"Expected symbol";case y.ValueErrorType.TupleLength:return`Expected tuple to have ${$.maxItems||0} elements`;case y.ValueErrorType.Tuple:return"Expected tuple";case y.ValueErrorType.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.maxByteLength}`;case y.ValueErrorType.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.minByteLength}`;case y.ValueErrorType.Uint8Array:return"Expected Uint8Array";case y.ValueErrorType.Undefined:return"Expected undefined";case y.ValueErrorType.Union:return"Expected union value";case y.ValueErrorType.Void:return"Expected void";case y.ValueErrorType.Kind:return`Expected kind '${$[z1.Kind]}'`;default:return"Unknown error type"}};Object.defineProperty(n8,"__esModule",{value:!0});n8.DefaultErrorFunction=n8.TypeSystemPolicy=n8.TypeSystemErrorFunction=n8.TypeSystem=n8.TypeSystemDuplicateFormat=n8.TypeSystemDuplicateTypeKind=void 0;var C$=x0(),y=$$(),z1=f0();class D6 extends z1.TypeBoxError{constructor($){super(`Duplicate type kind '${$}' detected`)}}n8.TypeSystemDuplicateTypeKind=D6;class K6 extends z1.TypeBoxError{constructor($){super(`Duplicate string format '${$}' detected`)}}n8.TypeSystemDuplicateFormat=K6;var u8;(function($){function W(X,Z){if(z1.TypeRegistry.Has(X))throw new D6(X);return z1.TypeRegistry.Set(X,Z),(Q={})=>z1.Type.Unsafe({...Q,[z1.Kind]:X})}$.Type=W;function Y(X,Z){if(z1.FormatRegistry.Has(X))throw new K6(X);return z1.FormatRegistry.Set(X,Z),X}$.Format=Y})(u8||(n8.TypeSystem=u8={}));var h8;(function($){let W=w6;function Y(){W=w6}$.Reset=Y;function X(Q){W=Q}$.Set=X;function Z(){return W}$.Get=Z})(h8||(n8.TypeSystemErrorFunction=h8={}));var o8;(function($){$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function W(J,z){return $.ExactOptionalPropertyTypes?z in J:J[z]!==void 0}$.IsExactOptionalProperty=W;function Y(J){const z=(0,C$.IsObject)(J);return $.AllowArrayObject?z:z&&!(0,C$.IsArray)(J)}$.IsObjectLike=Y;function X(J){return Y(J)&&!(J instanceof Date)&&!(J instanceof Uint8Array)}$.IsRecordLike=X;function Z(J){const z=(0,C$.IsNumber)(J);return $.AllowNaN?z:z&&Number.isFinite(J)}$.IsNumberLike=Z;function Q(J){const z=(0,C$.IsUndefined)(J);return $.AllowNullVoid?z||J===null:z}$.IsVoidLike=Q})(o8||(n8.TypeSystemPolicy=o8={}));n8.DefaultErrorFunction=w6});var w1=J0((l8)=>{var LZ=function($,W){const Y=W.findIndex((X)=>X.$id===$.$ref);if(Y===-1)throw new P6($);return W[Y]};Object.defineProperty(l8,"__esModule",{value:!0});l8.Deref=l8.TypeDereferenceError=void 0;var SZ=f0();class P6 extends SZ.TypeBoxError{constructor($){super(`Unable to dereference schema with \$id '${$.$id}'`);this.schema=$}}l8.TypeDereferenceError=P6;l8.Deref=LZ});var W$=J0((e8)=>{function*bZ($){const W=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let Y=0;Y<W;Y++)yield $>>8*(W-1-Y)&255}var _Z=function($){b0(T0.Array);for(let W of $)y1(W)},EZ=function($){b0(T0.Boolean),b0($?1:0)},VZ=function($){b0(T0.BigInt),r8.setBigInt64(0,$);for(let W of a8)b0(W)},xZ=function($){b0(T0.Date),y1($.getTime())},kZ=function($){b0(T0.Null)},gZ=function($){b0(T0.Number),r8.setFloat64(0,$);for(let W of a8)b0(W)},fZ=function($){b0(T0.Object);for(let W of globalThis.Object.keys($).sort())y1(W),y1($[W])},TZ=function($){b0(T0.String);for(let W=0;W<$.length;W++)for(let Y of bZ($.charCodeAt(W)))b0(Y)},dZ=function($){b0(T0.Symbol),y1($.description)},yZ=function($){b0(T0.Uint8Array);for(let W=0;W<$.length;W++)b0($[W])},vZ=function($){return b0(T0.Undefined)},y1=function($){if((0,o0.IsArray)($))return _Z($);if((0,o0.IsBoolean)($))return EZ($);if((0,o0.IsBigInt)($))return VZ($);if((0,o0.IsDate)($))return xZ($);if((0,o0.IsNull)($))return kZ($);if((0,o0.IsNumber)($))return gZ($);if((0,o0.IsPlainObject)($))return fZ($);if((0,o0.IsString)($))return TZ($);if((0,o0.IsSymbol)($))return dZ($);if((0,o0.IsUint8Array)($))return yZ($);if((0,o0.IsUndefined)($))return vZ($);throw new O6($)},b0=function($){d1=d1^GZ[$],d1=d1*IZ%RZ},pZ=function($){return d1=BigInt("14695981039346656037"),y1($),d1};Object.defineProperty(e8,"__esModule",{value:!0});e8.Hash=e8.ByteMarker=e8.ValueHashError=void 0;var o0=x0();class O6 extends Error{constructor($){super("Unable to hash value");this.value=$}}e8.ValueHashError=O6;var T0;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(T0||(e8.ByteMarker=T0={}));var d1=BigInt("14695981039346656037"),[IZ,RZ]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],GZ=Array.from({length:256}).map(($,W)=>BigInt(W)),s8=new Float64Array(1),r8=new DataView(s8.buffer),a8=new Uint8Array(s8.buffer);e8.Hash=pZ});var $$=J0((YW)=>{var t=function($){return $!==void 0},g=function($,W,Y,X){return{type:$,schema:W,path:Y,value:X,message:v1.TypeSystemErrorFunction.Get()(W,$)}};function*hZ($,W,Y,X){}function*oZ($,W,Y,X){if(!(0,B0.IsArray)(X))return yield g(k.Array,$,Y,X);if(t($.minItems)&&!(X.length>=$.minItems))yield g(k.ArrayMinItems,$,Y,X);if(t($.maxItems)&&!(X.length<=$.maxItems))yield g(k.ArrayMaxItems,$,Y,X);for(let J=0;J<X.length;J++)yield*L0($.items,W,`${Y}/${J}`,X[J]);if($.uniqueItems===!0&&!function(){const J=new Set;for(let z of X){const B=(0,uZ.Hash)(z);if(J.has(B))return!1;else J.add(B)}return!0}())yield g(k.ArrayUniqueItems,$,Y,X);if(!(t($.contains)||t($.minContains)||t($.maxContains)))return;const Z=t($.contains)?$.contains:p0.Type.Never(),Q=X.reduce((J,z,B)=>L0(Z,W,`${Y}${B}`,z).next().done===!0?J+1:J,0);if(Q===0)yield g(k.ArrayContains,$,Y,X);if((0,B0.IsNumber)($.minContains)&&Q<$.minContains)yield g(k.ArrayMinContains,$,Y,X);if((0,B0.IsNumber)($.maxContains)&&Q>$.maxContains)yield g(k.ArrayMaxContains,$,Y,X)}function*nZ($,W,Y,X){if(!(0,B0.IsAsyncIterator)(X))yield g(k.AsyncIterator,$,Y,X)}function*cZ($,W,Y,X){if(!(0,B0.IsBigInt)(X))return yield g(k.BigInt,$,Y,X);if(t($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield g(k.BigIntExclusiveMaximum,$,Y,X);if(t($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield g(k.BigIntExclusiveMinimum,$,Y,X);if(t($.maximum)&&!(X<=$.maximum))yield g(k.BigIntMaximum,$,Y,X);if(t($.minimum)&&!(X>=$.minimum))yield g(k.BigIntMinimum,$,Y,X);if(t($.multipleOf)&&X%$.multipleOf!==BigInt(0))yield g(k.BigIntMultipleOf,$,Y,X)}function*lZ($,W,Y,X){if(!(0,B0.IsBoolean)(X))yield g(k.Boolean,$,Y,X)}function*tZ($,W,Y,X){yield*L0($.returns,W,Y,X.prototype)}function*sZ($,W,Y,X){if(!(0,B0.IsDate)(X))return yield g(k.Date,$,Y,X);if(t($.exclusiveMaximumTimestamp)&&!(X.getTime()<$.exclusiveMaximumTimestamp))yield g(k.DateExclusiveMaximumTimestamp,$,Y,X);if(t($.exclusiveMinimumTimestamp)&&!(X.getTime()>$.exclusiveMinimumTimestamp))yield g(k.DateExclusiveMinimumTimestamp,$,Y,X);if(t($.maximumTimestamp)&&!(X.getTime()<=$.maximumTimestamp))yield g(k.DateMaximumTimestamp,$,Y,X);if(t($.minimumTimestamp)&&!(X.getTime()>=$.minimumTimestamp))yield g(k.DateMinimumTimestamp,$,Y,X);if(t($.multipleOfTimestamp)&&X.getTime()%$.multipleOfTimestamp!==0)yield g(k.DateMultipleOfTimestamp,$,Y,X)}function*rZ($,W,Y,X){if(!(0,B0.IsFunction)(X))yield g(k.Function,$,Y,X)}function*aZ($,W,Y,X){if(!(0,B0.IsInteger)(X))return yield g(k.Integer,$,Y,X);if(t($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield g(k.IntegerExclusiveMaximum,$,Y,X);if(t($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield g(k.IntegerExclusiveMinimum,$,Y,X);if(t($.maximum)&&!(X<=$.maximum))yield g(k.IntegerMaximum,$,Y,X);if(t($.minimum)&&!(X>=$.minimum))yield g(k.IntegerMinimum,$,Y,X);if(t($.multipleOf)&&X%$.multipleOf!==0)yield g(k.IntegerMultipleOf,$,Y,X)}function*eZ($,W,Y,X){for(let Z of $.allOf){const Q=L0(Z,W,Y,X).next();if(!Q.done)yield g(k.Intersect,$,Y,X),yield Q.value}if($.unevaluatedProperties===!1){const Z=new RegExp(p0.KeyResolver.ResolvePattern($));for(let Q of Object.getOwnPropertyNames(X))if(!Z.test(Q))yield g(k.IntersectUnevaluatedProperties,$,`${Y}/${Q}`,X)}if(typeof $.unevaluatedProperties==="object"){const Z=new RegExp(p0.KeyResolver.ResolvePattern($));for(let Q of Object.getOwnPropertyNames(X))if(!Z.test(Q)){const J=L0($.unevaluatedProperties,W,`${Y}/${Q}`,X[Q]).next();if(!J.done)yield J.value}}}function*$Q($,W,Y,X){if(!(0,B0.IsIterator)(X))yield g(k.Iterator,$,Y,X)}function*WQ($,W,Y,X){if(X!==$.const)yield g(k.Literal,$,Y,X)}function*YQ($,W,Y,X){yield g(k.Never,$,Y,X)}function*XQ($,W,Y,X){if(L0($.not,W,Y,X).next().done===!0)yield g(k.Not,$,Y,X)}function*ZQ($,W,Y,X){if(!(0,B0.IsNull)(X))yield g(k.Null,$,Y,X)}function*QQ($,W,Y,X){if(!v1.TypeSystemPolicy.IsNumberLike(X))return yield g(k.Number,$,Y,X);if(t($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield g(k.NumberExclusiveMaximum,$,Y,X);if(t($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield g(k.NumberExclusiveMinimum,$,Y,X);if(t($.maximum)&&!(X<=$.maximum))yield g(k.NumberMaximum,$,Y,X);if(t($.minimum)&&!(X>=$.minimum))yield g(k.NumberMinimum,$,Y,X);if(t($.multipleOf)&&X%$.multipleOf!==0)yield g(k.NumberMultipleOf,$,Y,X)}function*JQ($,W,Y,X){if(!v1.TypeSystemPolicy.IsObjectLike(X))return yield g(k.Object,$,Y,X);if(t($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))yield g(k.ObjectMinProperties,$,Y,X);if(t($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))yield g(k.ObjectMaxProperties,$,Y,X);const Z=Array.isArray($.required)?$.required:[],Q=Object.getOwnPropertyNames($.properties),J=Object.getOwnPropertyNames(X);for(let z of Z){if(J.includes(z))continue;yield g(k.ObjectRequiredProperty,$.properties[z],`${Y}/${z}`,void 0)}if($.additionalProperties===!1){for(let z of J)if(!Q.includes(z))yield g(k.ObjectAdditionalProperties,$,`${Y}/${z}`,X[z])}if(typeof $.additionalProperties==="object")for(let z of J){if(Q.includes(z))continue;yield*L0($.additionalProperties,W,`${Y}/${z}`,X[z])}for(let z of Q){const B=$.properties[z];if($.required&&$.required.includes(z)){if(yield*L0(B,W,`${Y}/${z}`,X[z]),p0.ExtendsUndefined.Check($)&&!(z in X))yield g(k.ObjectRequiredProperty,B,`${Y}/${z}`,void 0)}else if(v1.TypeSystemPolicy.IsExactOptionalProperty(X,z))yield*L0(B,W,`${Y}/${z}`,X[z])}}function*zQ($,W,Y,X){if(!(0,B0.IsPromise)(X))yield g(k.Promise,$,Y,X)}function*HQ($,W,Y,X){if(!v1.TypeSystemPolicy.IsRecordLike(X))return yield g(k.Object,$,Y,X);if(t($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))yield g(k.ObjectMinProperties,$,Y,X);if(t($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))yield g(k.ObjectMaxProperties,$,Y,X);const[Z,Q]=Object.entries($.patternProperties)[0],J=new RegExp(Z);for(let[z,B]of Object.entries(X))if(J.test(z))yield*L0(Q,W,`${Y}/${z}`,B);if(typeof $.additionalProperties==="object"){for(let[z,B]of Object.entries(X))if(!J.test(z))yield*L0($.additionalProperties,W,`${Y}/${z}`,B)}if($.additionalProperties===!1)for(let[z,B]of Object.entries(X)){if(J.test(z))continue;return yield g(k.ObjectAdditionalProperties,$,`${Y}/${z}`,B)}}function*qQ($,W,Y,X){yield*L0((0,WW.Deref)($,W),W,Y,X)}function*MQ($,W,Y,X){if(!(0,B0.IsString)(X))return yield g(k.String,$,Y,X);if(t($.minLength)&&!(X.length>=$.minLength))yield g(k.StringMinLength,$,Y,X);if(t($.maxLength)&&!(X.length<=$.maxLength))yield g(k.StringMaxLength,$,Y,X);if((0,B0.IsString)($.pattern)){if(!new RegExp($.pattern).test(X))yield g(k.StringPattern,$,Y,X)}if((0,B0.IsString)($.format)){if(!p0.FormatRegistry.Has($.format))yield g(k.StringFormatUnknown,$,Y,X);else if(!p0.FormatRegistry.Get($.format)(X))yield g(k.StringFormat,$,Y,X)}}function*NQ($,W,Y,X){if(!(0,B0.IsSymbol)(X))yield g(k.Symbol,$,Y,X)}function*UQ($,W,Y,X){if(!(0,B0.IsString)(X))return yield g(k.String,$,Y,X);if(!new RegExp($.pattern).test(X))yield g(k.StringPattern,$,Y,X)}function*BQ($,W,Y,X){yield*L0((0,WW.Deref)($,W),W,Y,X)}function*FQ($,W,Y,X){if(!(0,B0.IsArray)(X))return yield g(k.Tuple,$,Y,X);if($.items===void 0&&X.length!==0)return yield g(k.TupleLength,$,Y,X);if(X.length!==$.maxItems)return yield g(k.TupleLength,$,Y,X);if(!$.items)return;for(let Z=0;Z<$.items.length;Z++)yield*L0($.items[Z],W,`${Y}/${Z}`,X[Z])}function*AQ($,W,Y,X){if(!(0,B0.IsUndefined)(X))yield g(k.Undefined,$,Y,X)}function*wQ($,W,Y,X){let Z=0;for(let Q of $.anyOf){const J=[...L0(Q,W,Y,X)];if(J.length===0)return;Z+=J.length}if(Z>0)yield g(k.Union,$,Y,X)}function*DQ($,W,Y,X){if(!(0,B0.IsUint8Array)(X))return yield g(k.Uint8Array,$,Y,X);if(t($.maxByteLength)&&!(X.length<=$.maxByteLength))yield g(k.Uint8ArrayMaxByteLength,$,Y,X);if(t($.minByteLength)&&!(X.length>=$.minByteLength))yield g(k.Uint8ArrayMinByteLength,$,Y,X)}function*KQ($,W,Y,X){}function*jQ($,W,Y,X){if(!v1.TypeSystemPolicy.IsVoidLike(X))yield g(k.Void,$,Y,X)}function*PQ($,W,Y,X){if(!p0.TypeRegistry.Get($[p0.Kind])($,X))yield g(k.Kind,$,Y,X)}function*L0($,W,Y,X){const Z=t($.$id)?[...W,$]:W,Q=$;switch(Q[p0.Kind]){case"Any":return yield*hZ(Q,Z,Y,X);case"Array":return yield*oZ(Q,Z,Y,X);case"AsyncIterator":return yield*nZ(Q,Z,Y,X);case"BigInt":return yield*cZ(Q,Z,Y,X);case"Boolean":return yield*lZ(Q,Z,Y,X);case"Constructor":return yield*tZ(Q,Z,Y,X);case"Date":return yield*sZ(Q,Z,Y,X);case"Function":return yield*rZ(Q,Z,Y,X);case"Integer":return yield*aZ(Q,Z,Y,X);case"Intersect":return yield*eZ(Q,Z,Y,X);case"Iterator":return yield*$Q(Q,Z,Y,X);case"Literal":return yield*WQ(Q,Z,Y,X);case"Never":return yield*YQ(Q,Z,Y,X);case"Not":return yield*XQ(Q,Z,Y,X);case"Null":return yield*ZQ(Q,Z,Y,X);case"Number":return yield*QQ(Q,Z,Y,X);case"Object":return yield*JQ(Q,Z,Y,X);case"Promise":return yield*zQ(Q,Z,Y,X);case"Record":return yield*HQ(Q,Z,Y,X);case"Ref":return yield*qQ(Q,Z,Y,X);case"String":return yield*MQ(Q,Z,Y,X);case"Symbol":return yield*NQ(Q,Z,Y,X);case"TemplateLiteral":return yield*UQ(Q,Z,Y,X);case"This":return yield*BQ(Q,Z,Y,X);case"Tuple":return yield*FQ(Q,Z,Y,X);case"Undefined":return yield*AQ(Q,Z,Y,X);case"Union":return yield*wQ(Q,Z,Y,X);case"Uint8Array":return yield*DQ(Q,Z,Y,X);case"Unknown":return yield*KQ(Q,Z,Y,X);case"Void":return yield*jQ(Q,Z,Y,X);default:if(!p0.TypeRegistry.Has(Q[p0.Kind]))throw new S6($);return yield*PQ(Q,Z,Y,X)}}var OQ=function(...$){const W=$.length===3?L0($[0],$[1],"",$[2]):L0($[0],[],"",$[1]);return new L6(W)};Object.defineProperty(YW,"__esModule",{value:!0});YW.Errors=YW.ValueErrorIterator=YW.ValueErrorsUnknownTypeError=YW.ValueErrorType=void 0;var B0=x0(),v1=j6(),WW=w1(),uZ=W$(),p0=f0(),k;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.StringFormatUnknown=48]="StringFormatUnknown",$[$.StringFormat=49]="StringFormat",$[$.StringMaxLength=50]="StringMaxLength",$[$.StringMinLength=51]="StringMinLength",$[$.StringPattern=52]="StringPattern",$[$.String=53]="String",$[$.Symbol=54]="Symbol",$[$.TupleLength=55]="TupleLength",$[$.Tuple=56]="Tuple",$[$.Uint8ArrayMaxByteLength=57]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=58]="Uint8ArrayMinByteLength",$[$.Uint8Array=59]="Uint8Array",$[$.Undefined=60]="Undefined",$[$.Union=61]="Union",$[$.Void=62]="Void"})(k||(YW.ValueErrorType=k={}));class S6 extends p0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}YW.ValueErrorsUnknownTypeError=S6;class L6{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){const $=this.iterator.next();return $.done?void 0:$.value}}YW.ValueErrorIterator=L6;YW.Errors=OQ});var I$=J0((S1)=>{var IQ=S1&&S1.__createBinding||(Object.create?function($,W,Y,X){if(X===void 0)X=Y;var Z=Object.getOwnPropertyDescriptor(W,Y);if(!Z||("get"in Z?!W.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return W[Y]}};Object.defineProperty($,X,Z)}:function($,W,Y,X){if(X===void 0)X=Y;$[X]=W[Y]}),RQ=S1&&S1.__exportStar||function($,W){for(var Y in $)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(W,Y))IQ(W,$,Y)};Object.defineProperty(S1,"__esModule",{value:!0});RQ($$(),S1)});var R$=J0((QW)=>{Object.defineProperty(QW,"__esModule",{value:!0});QW.ValuePointer=QW.ValuePointerRootDeleteError=QW.ValuePointerRootSetError=void 0;class C6 extends Error{constructor($,W,Y){super("Cannot set root value");this.value=$,this.path=W,this.update=Y}}QW.ValuePointerRootSetError=C6;class I6 extends Error{constructor($,W){super("Cannot delete root value");this.value=$,this.path=W}}QW.ValuePointerRootDeleteError=I6;var ZW;(function($){function W(z){return z.indexOf("~")===-1?z:z.replace(/~1/g,"/").replace(/~0/g,"~")}function*Y(z){if(z==="")return;let[B,D]=[0,0];for(let A=0;A<z.length;A++)if(z.charAt(A)==="/")if(A===0)B=A+1;else D=A,yield W(z.slice(B,D)),B=A+1;else D=A;yield W(z.slice(B))}$.Format=Y;function X(z,B,D){if(B==="")throw new C6(z,B,D);let[A,S,G]=[null,z,""];for(let K of Y(B)){if(S[K]===void 0)S[K]={};A=S,S=S[K],G=K}A[G]=D}$.Set=X;function Z(z,B){if(B==="")throw new I6(z,B);let[D,A,S]=[null,z,""];for(let G of Y(B)){if(A[G]===void 0||A[G]===null)return;D=A,A=A[G],S=G}if(Array.isArray(D)){const G=parseInt(S);D.splice(G,1)}else delete D[S]}$.Delete=Z;function Q(z,B){if(B==="")return!0;let[D,A,S]=[null,z,""];for(let G of Y(B)){if(A[G]===void 0)return!1;D=A,A=A[G],S=G}return Object.getOwnPropertyNames(D).includes(S)}$.Has=Q;function J(z,B){if(B==="")return z;let D=z;for(let A of Y(B)){if(D[A]===void 0)return;D=D[A]}return D}$.Get=J})(ZW||(QW.ValuePointer=ZW={}))});var p1=J0((zW)=>{var _Q=function($){return[...Object.getOwnPropertyNames($),...Object.getOwnPropertySymbols($)].reduce((Y,X)=>({...Y,[X]:R6($[X])}),{})},EQ=function($){return $.map((W)=>R6(W))},VQ=function($){return $.slice()},xQ=function($){return new Date($.toISOString())},kQ=function($){return $},R6=function($){if((0,Y$.IsArray)($))return EQ($);if((0,Y$.IsDate)($))return xQ($);if((0,Y$.IsPlainObject)($))return _Q($);if((0,Y$.IsTypedArray)($))return VQ($);if((0,Y$.IsValueType)($))return kQ($);throw new Error("ValueClone: Unable to clone value")};Object.defineProperty(zW,"__esModule",{value:!0});zW.Clone=void 0;var Y$=x0();zW.Clone=R6});var E6=J0((NW)=>{var X$=function($,W){return{type:"update",path:$,value:W}},qW=function($,W){return{type:"insert",path:$,value:W}},MW=function($){return{type:"delete",path:$}};function*gQ($,W,Y){if(!(0,_0.IsPlainObject)(Y))return yield X$($,Y);const X=[...Object.keys(W),...Object.getOwnPropertySymbols(W)],Z=[...Object.keys(Y),...Object.getOwnPropertySymbols(Y)];for(let Q of X){if((0,_0.IsSymbol)(Q))throw new i1(Q);if((0,_0.IsUndefined)(Y[Q])&&Z.includes(Q))yield X$(`${$}/${String(Q)}`,void 0)}for(let Q of Z){if((0,_0.IsUndefined)(W[Q])||(0,_0.IsUndefined)(Y[Q]))continue;if((0,_0.IsSymbol)(Q))throw new i1(Q);yield*G$(`${$}/${String(Q)}`,W[Q],Y[Q])}for(let Q of Z){if((0,_0.IsSymbol)(Q))throw new i1(Q);if((0,_0.IsUndefined)(W[Q]))yield qW(`${$}/${String(Q)}`,Y[Q])}for(let Q of X.reverse()){if((0,_0.IsSymbol)(Q))throw new i1(Q);if((0,_0.IsUndefined)(Y[Q])&&!Z.includes(Q))yield MW(`${$}/${String(Q)}`)}}function*fQ($,W,Y){if(!(0,_0.IsArray)(Y))return yield X$($,Y);for(let X=0;X<Math.min(W.length,Y.length);X++)yield*G$(`${$}/${X}`,W[X],Y[X]);for(let X=0;X<Y.length;X++){if(X<W.length)continue;yield qW(`${$}/${X}`,Y[X])}for(let X=W.length-1;X>=0;X--){if(X<Y.length)continue;yield MW(`${$}/${X}`)}}function*TQ($,W,Y){if(!(0,_0.IsTypedArray)(Y)||W.length!==Y.length||Object.getPrototypeOf(W).constructor.name!==Object.getPrototypeOf(Y).constructor.name)return yield X$($,Y);for(let X=0;X<Math.min(W.length,Y.length);X++)yield*G$(`${$}/${X}`,W[X],Y[X])}function*dQ($,W,Y){if(W===Y)return;yield X$($,Y)}function*G$($,W,Y){if((0,_0.IsPlainObject)(W))return yield*gQ($,W,Y);if((0,_0.IsArray)(W))return yield*fQ($,W,Y);if((0,_0.IsTypedArray)(W))return yield*TQ($,W,Y);if((0,_0.IsValueType)(W))return yield*dQ($,W,Y);throw new _6(W)}var yQ=function($,W){return[...G$("",$,W)]},vQ=function($){return $.length>0&&$[0].path===""&&$[0].type==="update"},pQ=function($){return $.length===0},iQ=function($,W){if(vQ(W))return(0,b6.Clone)(W[0].value);if(pQ(W))return(0,b6.Clone)($);const Y=(0,b6.Clone)($);for(let X of W)switch(X.type){case"insert":{G6.ValuePointer.Set(Y,X.path,X.value);break}case"update":{G6.ValuePointer.Set(Y,X.path,X.value);break}case"delete":{G6.ValuePointer.Delete(Y,X.path);break}}return Y};Object.defineProperty(NW,"__esModule",{value:!0});NW.Patch=NW.Diff=NW.ValueDeltaUnableToDiffUnknownValue=NW.ValueDeltaObjectWithSymbolKeyError=NW.Edit=NW.Delete=NW.Update=NW.Insert=void 0;var _0=x0(),i0=f0(),G6=R$(),b6=p1();NW.Insert=i0.Type.Object({type:i0.Type.Literal("insert"),path:i0.Type.String(),value:i0.Type.Unknown()});NW.Update=i0.Type.Object({type:i0.Type.Literal("update"),path:i0.Type.String(),value:i0.Type.Unknown()});NW.Delete=i0.Type.Object({type:i0.Type.Literal("delete"),path:i0.Type.String()});NW.Edit=i0.Type.Union([NW.Insert,NW.Update,NW.Delete]);class i1 extends Error{constructor($){super("Cannot diff objects with symbol keys");this.key=$}}NW.ValueDeltaObjectWithSymbolKeyError=i1;class _6 extends Error{constructor($){super("Unable to create diff edits for unknown value");this.value=$}}NW.ValueDeltaUnableToDiffUnknownValue=_6;NW.Diff=yQ;NW.Patch=iQ});var jW=J0((DW)=>{var nQ=function($,W,Y,X){if(!(0,d0.IsPlainObject)(Y))b$.ValuePointer.Set($,W,(0,V6.Clone)(X));else{const Z=Object.keys(Y),Q=Object.keys(X);for(let J of Z)if(!Q.includes(J))delete Y[J];for(let J of Q)if(!Z.includes(J))Y[J]=null;for(let J of Q)g6($,`${W}/${J}`,Y[J],X[J])}},cQ=function($,W,Y,X){if(!(0,d0.IsArray)(Y))b$.ValuePointer.Set($,W,(0,V6.Clone)(X));else{for(let Z=0;Z<X.length;Z++)g6($,`${W}/${Z}`,Y[Z],X[Z]);Y.splice(X.length)}},lQ=function($,W,Y,X){if((0,d0.IsTypedArray)(Y)&&Y.length===X.length)for(let Z=0;Z<Y.length;Z++)Y[Z]=X[Z];else b$.ValuePointer.Set($,W,(0,V6.Clone)(X))},tQ=function($,W,Y,X){if(Y===X)return;b$.ValuePointer.Set($,W,X)},g6=function($,W,Y,X){if((0,d0.IsArray)(X))return cQ($,W,Y,X);if((0,d0.IsTypedArray)(X))return lQ($,W,Y,X);if((0,d0.IsPlainObject)(X))return nQ($,W,Y,X);if((0,d0.IsValueType)(X))return tQ($,W,Y,X)},wW=function($){return(0,d0.IsTypedArray)($)||(0,d0.IsValueType)($)},sQ=function($,W){return(0,d0.IsPlainObject)($)&&(0,d0.IsArray)(W)||(0,d0.IsArray)($)&&(0,d0.IsPlainObject)(W)},rQ=function($,W){if(wW($)||wW(W))throw new k6;if(sQ($,W))throw new x6;g6($,"",$,W)};Object.defineProperty(DW,"__esModule",{value:!0});DW.Mutate=DW.ValueMutateInvalidRootMutationError=DW.ValueMutateTypeMismatchError=void 0;var d0=x0(),b$=R$(),V6=p1();class x6 extends Error{constructor(){super("Cannot assign due type mismatch of assignable values")}}DW.ValueMutateTypeMismatchError=x6;class k6 extends Error{constructor(){super("Only object and array types can be mutated at the root level")}}DW.ValueMutateInvalidRootMutationError=k6;DW.Mutate=rQ});var SW=J0((PW)=>{var $4=function($,W){if(!(0,H1.IsPlainObject)(W))return!1;const Y=[...Object.keys($),...Object.getOwnPropertySymbols($)],X=[...Object.keys(W),...Object.getOwnPropertySymbols(W)];if(Y.length!==X.length)return!1;return Y.every((Z)=>_$($[Z],W[Z]))},W4=function($,W){return(0,H1.IsDate)(W)&&$.getTime()===W.getTime()},Y4=function($,W){if(!(0,H1.IsArray)(W)||$.length!==W.length)return!1;return $.every((Y,X)=>_$(Y,W[X]))},X4=function($,W){if(!(0,H1.IsTypedArray)(W)||$.length!==W.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(W).constructor.name)return!1;return $.every((Y,X)=>_$(Y,W[X]))},Z4=function($,W){return $===W},_$=function($,W){if((0,H1.IsPlainObject)($))return $4($,W);if((0,H1.IsDate)($))return W4($,W);if((0,H1.IsTypedArray)($))return X4($,W);if((0,H1.IsArray)($))return Y4($,W);if((0,H1.IsValueType)($))return Z4($,W);throw new Error("ValueEquals: Unable to compare value")};Object.defineProperty(PW,"__esModule",{value:!0});PW.Equal=void 0;var H1=x0();PW.Equal=_$});var E$=J0((q1)=>{var Q4=q1&&q1.__createBinding||(Object.create?function($,W,Y,X){if(X===void 0)X=Y;var Z=Object.getOwnPropertyDescriptor(W,Y);if(!Z||("get"in Z?!W.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return W[Y]}};Object.defineProperty($,X,Z)}:function($,W,Y,X){if(X===void 0)X=Y;$[X]=W[Y]}),J4=q1&&q1.__exportStar||function($,W){for(var Y in $)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(W,Y))Q4(W,$,Y)};Object.defineProperty(q1,"__esModule",{value:!0});q1.ValueErrorType=void 0;var z4=$$();Object.defineProperty(q1,"ValueErrorType",{enumerable:!0,get:function(){return z4.ValueErrorType}});J4(j6(),q1)});var Q$=J0((CW)=>{var q4=function($){return $[C0.Kind]==="Any"||$[C0.Kind]==="Unknown"},s=function($){return $!==void 0},M4=function($,W,Y){return!0},N4=function($,W,Y){if(!(0,F0.IsArray)(Y))return!1;if(s($.minItems)&&!(Y.length>=$.minItems))return!1;if(s($.maxItems)&&!(Y.length<=$.maxItems))return!1;if(!Y.every((Q)=>I0($.items,W,Q)))return!1;if($.uniqueItems===!0&&!function(){const Q=new Set;for(let J of Y){const z=(0,H4.Hash)(J);if(Q.has(z))return!1;else Q.add(z)}return!0}())return!1;if(!(s($.contains)||(0,F0.IsNumber)($.minContains)||(0,F0.IsNumber)($.maxContains)))return!0;const X=s($.contains)?$.contains:C0.Type.Never(),Z=Y.reduce((Q,J)=>I0(X,W,J)?Q+1:Q,0);if(Z===0)return!1;if((0,F0.IsNumber)($.minContains)&&Z<$.minContains)return!1;if((0,F0.IsNumber)($.maxContains)&&Z>$.maxContains)return!1;return!0},U4=function($,W,Y){return(0,F0.IsAsyncIterator)(Y)},B4=function($,W,Y){if(!(0,F0.IsBigInt)(Y))return!1;if(s($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(s($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(s($.maximum)&&!(Y<=$.maximum))return!1;if(s($.minimum)&&!(Y>=$.minimum))return!1;if(s($.multipleOf)&&Y%$.multipleOf!==BigInt(0))return!1;return!0},F4=function($,W,Y){return(0,F0.IsBoolean)(Y)},A4=function($,W,Y){return I0($.returns,W,Y.prototype)},w4=function($,W,Y){if(!(0,F0.IsDate)(Y))return!1;if(s($.exclusiveMaximumTimestamp)&&!(Y.getTime()<$.exclusiveMaximumTimestamp))return!1;if(s($.exclusiveMinimumTimestamp)&&!(Y.getTime()>$.exclusiveMinimumTimestamp))return!1;if(s($.maximumTimestamp)&&!(Y.getTime()<=$.maximumTimestamp))return!1;if(s($.minimumTimestamp)&&!(Y.getTime()>=$.minimumTimestamp))return!1;if(s($.multipleOfTimestamp)&&Y.getTime()%$.multipleOfTimestamp!==0)return!1;return!0},D4=function($,W,Y){return(0,F0.IsFunction)(Y)},K4=function($,W,Y){if(!(0,F0.IsInteger)(Y))return!1;if(s($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(s($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(s($.maximum)&&!(Y<=$.maximum))return!1;if(s($.minimum)&&!(Y>=$.minimum))return!1;if(s($.multipleOf)&&Y%$.multipleOf!==0)return!1;return!0},j4=function($,W,Y){const X=$.allOf.every((Z)=>I0(Z,W,Y));if($.unevaluatedProperties===!1){const Z=new RegExp(C0.KeyResolver.ResolvePattern($)),Q=Object.getOwnPropertyNames(Y).every((J)=>Z.test(J));return X&&Q}else if(C0.TypeGuard.TSchema($.unevaluatedProperties)){const Z=new RegExp(C0.KeyResolver.ResolvePattern($)),Q=Object.getOwnPropertyNames(Y).every((J)=>Z.test(J)||I0($.unevaluatedProperties,W,Y[J]));return X&&Q}else return X},P4=function($,W,Y){return(0,F0.IsIterator)(Y)},O4=function($,W,Y){return Y===$.const},S4=function($,W,Y){return!1},L4=function($,W,Y){return!I0($.not,W,Y)},C4=function($,W,Y){return(0,F0.IsNull)(Y)},I4=function($,W,Y){if(!Z$.TypeSystemPolicy.IsNumberLike(Y))return!1;if(s($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(s($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(s($.minimum)&&!(Y>=$.minimum))return!1;if(s($.maximum)&&!(Y<=$.maximum))return!1;if(s($.multipleOf)&&Y%$.multipleOf!==0)return!1;return!0},R4=function($,W,Y){if(!Z$.TypeSystemPolicy.IsObjectLike(Y))return!1;if(s($.minProperties)&&!(Object.getOwnPropertyNames(Y).length>=$.minProperties))return!1;if(s($.maxProperties)&&!(Object.getOwnPropertyNames(Y).length<=$.maxProperties))return!1;const X=Object.getOwnPropertyNames($.properties);for(let Z of X){const Q=$.properties[Z];if($.required&&$.required.includes(Z)){if(!I0(Q,W,Y[Z]))return!1;if((C0.ExtendsUndefined.Check(Q)||q4(Q))&&!(Z in Y))return!1}else if(Z$.TypeSystemPolicy.IsExactOptionalProperty(Y,Z)&&!I0(Q,W,Y[Z]))return!1}if($.additionalProperties===!1){const Z=Object.getOwnPropertyNames(Y);if($.required&&$.required.length===X.length&&Z.length===X.length)return!0;else return Z.every((Q)=>X.includes(Q))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(Y).every((Q)=>X.includes(Q)||I0($.additionalProperties,W,Y[Q]));else return!0},G4=function($,W,Y){return(0,F0.IsPromise)(Y)},b4=function($,W,Y){if(!Z$.TypeSystemPolicy.IsRecordLike(Y))return!1;if(s($.minProperties)&&!(Object.getOwnPropertyNames(Y).length>=$.minProperties))return!1;if(s($.maxProperties)&&!(Object.getOwnPropertyNames(Y).length<=$.maxProperties))return!1;const[X,Z]=Object.entries($.patternProperties)[0],Q=new RegExp(X),J=Object.entries(Y).every(([D,A])=>{return Q.test(D)?I0(Z,W,A):!0}),z=typeof $.additionalProperties==="object"?Object.entries(Y).every(([D,A])=>{return!Q.test(D)?I0($.additionalProperties,W,A):!0}):!0,B=$.additionalProperties===!1?Object.getOwnPropertyNames(Y).every((D)=>{return Q.test(D)}):!0;return J&&z&&B},_4=function($,W,Y){return I0((0,LW.Deref)($,W),W,Y)},E4=function($,W,Y){if(!(0,F0.IsString)(Y))return!1;if(s($.minLength)){if(!(Y.length>=$.minLength))return!1}if(s($.maxLength)){if(!(Y.length<=$.maxLength))return!1}if(s($.pattern)){if(!new RegExp($.pattern).test(Y))return!1}if(s($.format)){if(!C0.FormatRegistry.Has($.format))return!1;return C0.FormatRegistry.Get($.format)(Y)}return!0},V4=function($,W,Y){return(0,F0.IsSymbol)(Y)},x4=function($,W,Y){return(0,F0.IsString)(Y)&&new RegExp($.pattern).test(Y)},k4=function($,W,Y){return I0((0,LW.Deref)($,W),W,Y)},g4=function($,W,Y){if(!(0,F0.IsArray)(Y))return!1;if($.items===void 0&&Y.length!==0)return!1;if(Y.length!==$.maxItems)return!1;if(!$.items)return!0;for(let X=0;X<$.items.length;X++)if(!I0($.items[X],W,Y[X]))return!1;return!0},f4=function($,W,Y){return(0,F0.IsUndefined)(Y)},T4=function($,W,Y){return $.anyOf.some((X)=>I0(X,W,Y))},d4=function($,W,Y){if(!(0,F0.IsUint8Array)(Y))return!1;if(s($.maxByteLength)&&!(Y.length<=$.maxByteLength))return!1;if(s($.minByteLength)&&!(Y.length>=$.minByteLength))return!1;return!0},y4=function($,W,Y){return!0},v4=function($,W,Y){return Z$.TypeSystemPolicy.IsVoidLike(Y)},p4=function($,W,Y){if(!C0.TypeRegistry.Has($[C0.Kind]))return!1;return C0.TypeRegistry.Get($[C0.Kind])($,Y)},I0=function($,W,Y){const X=s($.$id)?[...W,$]:W,Z=$;switch(Z[C0.Kind]){case"Any":return M4(Z,X,Y);case"Array":return N4(Z,X,Y);case"AsyncIterator":return U4(Z,X,Y);case"BigInt":return B4(Z,X,Y);case"Boolean":return F4(Z,X,Y);case"Constructor":return A4(Z,X,Y);case"Date":return w4(Z,X,Y);case"Function":return D4(Z,X,Y);case"Integer":return K4(Z,X,Y);case"Intersect":return j4(Z,X,Y);case"Iterator":return P4(Z,X,Y);case"Literal":return O4(Z,X,Y);case"Never":return S4(Z,X,Y);case"Not":return L4(Z,X,Y);case"Null":return C4(Z,X,Y);case"Number":return I4(Z,X,Y);case"Object":return R4(Z,X,Y);case"Promise":return G4(Z,X,Y);case"Record":return b4(Z,X,Y);case"Ref":return _4(Z,X,Y);case"String":return E4(Z,X,Y);case"Symbol":return V4(Z,X,Y);case"TemplateLiteral":return x4(Z,X,Y);case"This":return k4(Z,X,Y);case"Tuple":return g4(Z,X,Y);case"Undefined":return f4(Z,X,Y);case"Union":return T4(Z,X,Y);case"Uint8Array":return d4(Z,X,Y);case"Unknown":return y4(Z,X,Y);case"Void":return v4(Z,X,Y);default:if(!C0.TypeRegistry.Has(Z[C0.Kind]))throw new f6(Z);return p4(Z,X,Y)}},i4=function(...$){return $.length===3?I0($[0],$[1],$[2]):I0($[0],[],$[1])};Object.defineProperty(CW,"__esModule",{value:!0});CW.Check=CW.ValueCheckUnknownTypeError=void 0;var F0=x0(),Z$=E$(),LW=w1(),H4=W$(),C0=f0();class f6 extends C0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}CW.ValueCheckUnknownTypeError=f6;CW.Check=i4});var m6=J0((_W)=>{var h4=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else return{}},o4=function($,W){if($.uniqueItems===!0&&!(0,a.HasPropertyKey)($,"default"))throw new Error("ValueCreate.Array: Array with the uniqueItems constraint requires a default value");else if(("contains"in $)&&!(0,a.HasPropertyKey)($,"default"))throw new Error("ValueCreate.Array: Array with the contains constraint requires a default value");else if("default"in $)return $.default;else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((Y)=>{return y0($.items,W)});else return[]},n4=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else return async function*(){}()},c4=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else return BigInt(0)},l4=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else return!1},t4=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else{const Y=y0($.returns,W);if(typeof Y==="object"&&!Array.isArray(Y))return class{constructor(){for(let[X,Z]of Object.entries(Y)){const Q=this;Q[X]=Z}}};else return class{}}},s4=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date(0)},r4=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else return()=>y0($.returns,W)},a4=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else if($.minimum!==void 0)return $.minimum;else return 0},e4=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else{const Y=$.allOf.reduce((X,Z)=>{const Q=y0(Z,W);return typeof Q==="object"?{...X,...Q}:Q},{});if(!(0,u4.Check)($,W,Y))throw new v6($);return Y}},$J=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else return function*(){}()},WJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else return $.const},YJ=function($,W){throw new d6($)},XJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else throw new y6($)},ZJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else return null},QJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else if($.minimum!==void 0)return $.minimum;else return 0},JJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else{const Y=new Set($.required);return $.default||Object.entries($.properties).reduce((X,[Z,Q])=>{return Y.has(Z)?{...X,[Z]:y0(Q,W)}:{...X}},{})}},zJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else return Promise.resolve(y0($.item,W))},HJ=function($,W){const[Y,X]=Object.entries($.patternProperties)[0];if((0,a.HasPropertyKey)($,"default"))return $.default;else if(!(Y===k0.PatternStringExact||Y===k0.PatternNumberExact))return Y.slice(1,Y.length-1).split("|").reduce((Q,J)=>{return{...Q,[J]:y0(X,W)}},{});else return{}},qJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else return y0((0,GW.Deref)($,W),W)},MJ=function($,W){if($.pattern!==void 0)if(!(0,a.HasPropertyKey)($,"default"))throw new Error("ValueCreate.String: String types with patterns must specify a default value");else return $.default;else if($.format!==void 0)if(!(0,a.HasPropertyKey)($,"default"))throw new Error("ValueCreate.String: String types with formats must specify a default value");else return $.default;else if((0,a.HasPropertyKey)($,"default"))return $.default;else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>".").join("");else return""},NJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else if("value"in $)return Symbol.for($.value);else return Symbol()},UJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;const Y=k0.TemplateLiteralParser.ParseExact($.pattern);if(!k0.TemplateLiteralFinite.Check(Y))throw new p6($);return k0.TemplateLiteralGenerator.Generate(Y).next().value},BJ=function($,W){if(bW++>RW)throw new i6($,RW);if((0,a.HasPropertyKey)($,"default"))return $.default;else return y0((0,GW.Deref)($,W),W)},FJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((Y,X)=>y0($.items[X],W))},AJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else return},wJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else if($.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return y0($.anyOf[0],W)},DJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)},KJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else return{}},jJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else return},PJ=function($,W){if((0,a.HasPropertyKey)($,"default"))return $.default;else throw new Error("User defined types must specify a default value")},y0=function($,W){const Y=(0,a.IsString)($.$id)?[...W,$]:W,X=$;switch(X[k0.Kind]){case"Any":return h4(X,Y);case"Array":return o4(X,Y);case"AsyncIterator":return n4(X,Y);case"BigInt":return c4(X,Y);case"Boolean":return l4(X,Y);case"Constructor":return t4(X,Y);case"Date":return s4(X,Y);case"Function":return r4(X,Y);case"Integer":return a4(X,Y);case"Intersect":return e4(X,Y);case"Iterator":return $J(X,Y);case"Literal":return WJ(X,Y);case"Never":return YJ(X,Y);case"Not":return XJ(X,Y);case"Null":return ZJ(X,Y);case"Number":return QJ(X,Y);case"Object":return JJ(X,Y);case"Promise":return zJ(X,Y);case"Record":return HJ(X,Y);case"Ref":return qJ(X,Y);case"String":return MJ(X,Y);case"Symbol":return NJ(X,Y);case"TemplateLiteral":return UJ(X,Y);case"This":return BJ(X,Y);case"Tuple":return FJ(X,Y);case"Undefined":return AJ(X,Y);case"Union":return wJ(X,Y);case"Uint8Array":return DJ(X,Y);case"Unknown":return KJ(X,Y);case"Void":return jJ(X,Y);default:if(!k0.TypeRegistry.Has(X[k0.Kind]))throw new T6(X);return PJ(X,Y)}},OJ=function(...$){return bW=0,$.length===2?y0($[0],$[1]):y0($[0],[])};Object.defineProperty(_W,"__esModule",{value:!0});_W.Create=_W.ValueCreateRecursiveInstantiationError=_W.ValueCreateTempateLiteralTypeError=_W.ValueCreateIntersectTypeError=_W.ValueCreateNotTypeError=_W.ValueCreateNeverTypeError=_W.ValueCreateUnknownTypeError=void 0;var a=x0(),u4=Q$(),GW=w1(),k0=f0();class T6 extends k0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}_W.ValueCreateUnknownTypeError=T6;class d6 extends k0.TypeBoxError{constructor($){super("Never types cannot be created");this.schema=$}}_W.ValueCreateNeverTypeError=d6;class y6 extends k0.TypeBoxError{constructor($){super("Not types must have a default value");this.schema=$}}_W.ValueCreateNotTypeError=y6;class v6 extends k0.TypeBoxError{constructor($){super("Intersect produced invalid value. Consider using a default value.");this.schema=$}}_W.ValueCreateIntersectTypeError=v6;class p6 extends k0.TypeBoxError{constructor($){super("Can only create template literal values from patterns that produce finite sequences. Consider using a default value.");this.schema=$}}_W.ValueCreateTempateLiteralTypeError=p6;class i6 extends k0.TypeBoxError{constructor($,W){super("Value cannot be created as recursive type may produce value of infinite size. Consider using a default.");this.schema=$,this.recursiveMaxDepth=W}}_W.ValueCreateRecursiveInstantiationError=i6;var RW=512,bW=0;_W.Create=OJ});var dW=J0((fW)=>{var kW=function($,W,Y){return(0,m0.Check)($,W,Y)?(0,m1.Clone)(Y):(0,N1.Create)($,W)},h6=function($,W,Y){return(0,m0.Check)($,W,Y)?Y:(0,N1.Create)($,W)},bJ=function($,W,Y){if((0,m0.Check)($,W,Y))return(0,m1.Clone)(Y);const X=(0,D1.IsArray)(Y)?(0,m1.Clone)(Y):(0,N1.Create)($,W),Z=(0,D1.IsNumber)($.minItems)&&X.length<$.minItems?[...X,...Array.from({length:$.minItems-X.length},()=>null)]:X,J=((0,D1.IsNumber)($.maxItems)&&Z.length>$.maxItems?Z.slice(0,$.maxItems):Z).map((B)=>W1($.items,W,B));if($.uniqueItems!==!0)return J;const z=[...new Set(J)];if(!(0,m0.Check)($,W,z))throw new o6($,z);return z},_J=function($,W,Y){if((0,m0.Check)($,W,Y))return(0,N1.Create)($,W);const X=new Set($.returns.required||[]),Z=function(){};for(let[Q,J]of Object.entries($.returns.properties)){if(!X.has(Q)&&Y.prototype[Q]===void 0)continue;Z.prototype[Q]=W1(J,W,Y.prototype[Q])}return Z},EJ=function($,W,Y){const X=(0,N1.Create)($,W),Z=(0,D1.IsPlainObject)(X)&&(0,D1.IsPlainObject)(Y)?{...X,...Y}:Y;return(0,m0.Check)($,W,Z)?Z:(0,N1.Create)($,W)},VJ=function($,W,Y){throw new n6($)},xJ=function($,W,Y){if((0,m0.Check)($,W,Y))return Y;if(Y===null||typeof Y!=="object")return(0,N1.Create)($,W);const X=new Set($.required||[]),Z={};for(let[Q,J]of Object.entries($.properties)){if(!X.has(Q)&&Y[Q]===void 0)continue;Z[Q]=W1(J,W,Y[Q])}if(typeof $.additionalProperties==="object"){const Q=Object.getOwnPropertyNames($.properties);for(let J of Object.getOwnPropertyNames(Y)){if(Q.includes(J))continue;Z[J]=W1($.additionalProperties,W,Y[J])}}return Z},kJ=function($,W,Y){if((0,m0.Check)($,W,Y))return(0,m1.Clone)(Y);if(Y===null||typeof Y!=="object"||Array.isArray(Y)||Y instanceof Date)return(0,N1.Create)($,W);const X=Object.getOwnPropertyNames($.patternProperties)[0],Z=$.patternProperties[X],Q={};for(let[J,z]of Object.entries(Y))Q[J]=W1(Z,W,z);return Q},gJ=function($,W,Y){return W1((0,VW.Deref)($,W),W,Y)},fJ=function($,W,Y){return W1((0,VW.Deref)($,W),W,Y)},TJ=function($,W,Y){if((0,m0.Check)($,W,Y))return(0,m1.Clone)(Y);if(!(0,D1.IsArray)(Y))return(0,N1.Create)($,W);if($.items===void 0)return[];return $.items.map((X,Z)=>W1(X,W,Y[Z]))},dJ=function($,W,Y){return(0,m0.Check)($,W,Y)?(0,m1.Clone)(Y):u6.Create($,W,Y)},W1=function($,W,Y){const X=(0,D1.IsString)($.$id)?[...W,$]:W,Z=$;switch($[M1.Kind]){case"Array":return bJ(Z,X,Y);case"Constructor":return _J(Z,X,Y);case"Intersect":return EJ(Z,X,Y);case"Never":return VJ(Z,X,Y);case"Object":return xJ(Z,X,Y);case"Record":return kJ(Z,X,Y);case"Ref":return gJ(Z,X,Y);case"This":return fJ(Z,X,Y);case"Tuple":return TJ(Z,X,Y);case"Union":return dJ(Z,X,Y);case"Date":case"Symbol":case"Uint8Array":return kW($,W,Y);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Function":case"Integer":case"Iterator":case"Literal":case"Not":case"Null":case"Number":case"Promise":case"String":case"TemplateLiteral":case"Undefined":case"Unknown":case"Void":return h6(Z,X,Y);default:if(!M1.TypeRegistry.Has(Z[M1.Kind]))throw new c6(Z);return h6(Z,X,Y)}},gW=function(...$){return $.length===3?W1($[0],$[1],$[2]):W1($[0],[],$[1])};Object.defineProperty(fW,"__esModule",{value:!0});fW.Cast=fW.Default=fW.DefaultClone=fW.ValueCastUnknownTypeError=fW.ValueCastRecursiveTypeError=fW.ValueCastNeverTypeError=fW.ValueCastArrayUniqueItemsTypeError=void 0;var D1=x0(),N1=m6(),m0=Q$(),m1=p1(),VW=w1(),M1=f0();class o6 extends M1.TypeBoxError{constructor($,W){super("Array cast produced invalid data due to uniqueItems constraint");this.schema=$,this.value=W}}fW.ValueCastArrayUniqueItemsTypeError=o6;class n6 extends M1.TypeBoxError{constructor($){super("Never types cannot be cast");this.schema=$}}fW.ValueCastNeverTypeError=n6;class xW extends M1.TypeBoxError{constructor($){super("Cannot cast recursive schemas");this.schema=$}}fW.ValueCastRecursiveTypeError=xW;class c6 extends M1.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}fW.ValueCastUnknownTypeError=c6;var u6;(function($){function W(Z,Q,J){if(Z[M1.Kind]==="Object"&&typeof J==="object"&&!(0,D1.IsNull)(J)){const z=Z,B=Object.getOwnPropertyNames(J),D=Object.entries(z.properties),[A,S]=[1/D.length,D.length];return D.reduce((G,[K,N])=>{const j=N[M1.Kind]==="Literal"&&N.const===J[K]?S:0,O=(0,m0.Check)(N,Q,J[K])?A:0,U=B.includes(K)?A:0;return G+(j+O+U)},0)}else return(0,m0.Check)(Z,Q,J)?1:0}function Y(Z,Q,J){let[z,B]=[Z.anyOf[0],0];for(let D of Z.anyOf){const A=W(D,Q,J);if(A>B)z=D,B=A}return z}function X(Z,Q,J){if("default"in Z)return Z.default;else{const z=Y(Z,Q,J);return gW(z,Q,J)}}$.Create=X})(u6||(u6={}));fW.DefaultClone=kW;fW.Default=h6;fW.Cast=gW});var hW=J0((mW)=>{var V$=function($){return(0,Z0.IsString)($)&&!isNaN($)&&!isNaN(parseFloat($))},nJ=function($){return(0,Z0.IsBigInt)($)||(0,Z0.IsBoolean)($)||(0,Z0.IsNumber)($)},J$=function($){return $===!0||(0,Z0.IsNumber)($)&&$===1||(0,Z0.IsBigInt)($)&&$===BigInt("1")||(0,Z0.IsString)($)&&($.toLowerCase()==="true"||$==="1")},z$=function($){return $===!1||(0,Z0.IsNumber)($)&&($===0||Object.is($,-0))||(0,Z0.IsBigInt)($)&&$===BigInt("0")||(0,Z0.IsString)($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")},cJ=function($){return(0,Z0.IsString)($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},lJ=function($){return(0,Z0.IsString)($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},tJ=function($){return(0,Z0.IsString)($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},sJ=function($){return(0,Z0.IsString)($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},rJ=function($){return(0,Z0.IsString)($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)},aJ=function($,W){const Y=pW($);return Y===W?Y:$},eJ=function($,W){const Y=iW($);return Y===W?Y:$},$9=function($,W){const Y=vW($);return Y===W?Y:$},W9=function($,W){if(typeof $.const==="string")return aJ(W,$.const);else if(typeof $.const==="number")return eJ(W,$.const);else if(typeof $.const==="boolean")return $9(W,$.const);else return(0,hJ.Clone)(W)},vW=function($){return J$($)?!0:z$($)?!1:$},Y9=function($){return V$($)?BigInt(parseInt($)):(0,Z0.IsNumber)($)?BigInt($|0):z$($)?BigInt(0):J$($)?BigInt(1):$},pW=function($){return nJ($)?$.toString():(0,Z0.IsSymbol)($)&&$.description!==void 0?$.description.toString():$},iW=function($){return V$($)?parseFloat($):J$($)?1:z$($)?0:$},X9=function($){return V$($)?parseInt($):(0,Z0.IsNumber)($)?$|0:J$($)?1:z$($)?0:$},Z9=function($){return(0,Z0.IsString)($)&&$.toLowerCase()==="null"?null:$},Q9=function($){return(0,Z0.IsString)($)&&$==="undefined"?void 0:$},J9=function($){return(0,Z0.IsDate)($)?$:(0,Z0.IsNumber)($)?new Date($):J$($)?new Date(1):z$($)?new Date(0):V$($)?new Date(parseInt($)):lJ($)?new Date(`1970-01-01T${$}.000Z`):cJ($)?new Date(`1970-01-01T${$}`):sJ($)?new Date(`${$}.000Z`):tJ($)?new Date($):rJ($)?new Date(`${$}T00:00:00.000Z`):$},l6=function($){return $},z9=function($,W,Y){if((0,Z0.IsArray)(Y))return Y.map((X)=>n0($.items,W,X));return Y},H9=function($,W,Y){return Y9(Y)},q9=function($,W,Y){return vW(Y)},M9=function($,W,Y){return J9(Y)},N9=function($,W,Y){return X9(Y)},U9=function($,W,Y){return $.allOf.every((X)=>u1.TypeGuard.TObject(X))?n0(u1.Type.Composite($.allOf),W,Y):n0($.allOf[0],W,Y)},B9=function($,W,Y){return W9($,Y)},F9=function($,W,Y){return Z9(Y)},A9=function($,W,Y){return iW(Y)},w9=function($,W,Y){if((0,Z0.IsObject)(Y))return Object.getOwnPropertyNames($.properties).reduce((X,Z)=>{return Y[Z]!==void 0?{...X,[Z]:n0($.properties[Z],W,Y[Z])}:{...X}},Y);return Y},D9=function($,W,Y){const X=Object.getOwnPropertyNames($.patternProperties)[0],Z=$.patternProperties[X],Q={};for(let[J,z]of Object.entries(Y))Q[J]=n0(Z,W,z);return Q},K9=function($,W,Y){return n0((0,yW.Deref)($,W),W,Y)},j9=function($,W,Y){return pW(Y)},P9=function($,W,Y){return(0,Z0.IsString)(Y)||(0,Z0.IsNumber)(Y)?Symbol(Y):Y},O9=function($,W,Y){return n0((0,yW.Deref)($,W),W,Y)},S9=function($,W,Y){if((0,Z0.IsArray)(Y)&&!(0,Z0.IsUndefined)($.items))return Y.map((X,Z)=>{return Z<$.items.length?n0($.items[Z],W,X):X});return Y},L9=function($,W,Y){return Q9(Y)},C9=function($,W,Y){for(let X of $.anyOf){const Z=n0(X,W,Y);if((0,oJ.Check)(X,W,Z))return Z}return Y},n0=function($,W,Y){const X=(0,Z0.IsString)($.$id)?[...W,$]:W,Z=$;switch($[u1.Kind]){case"Array":return z9(Z,X,Y);case"BigInt":return H9(Z,X,Y);case"Boolean":return q9(Z,X,Y);case"Date":return M9(Z,X,Y);case"Integer":return N9(Z,X,Y);case"Intersect":return U9(Z,X,Y);case"Literal":return B9(Z,X,Y);case"Null":return F9(Z,X,Y);case"Number":return A9(Z,X,Y);case"Object":return w9(Z,X,Y);case"Record":return D9(Z,X,Y);case"Ref":return K9(Z,X,Y);case"String":return j9(Z,X,Y);case"Symbol":return P9(Z,X,Y);case"This":return O9(Z,X,Y);case"Tuple":return S9(Z,X,Y);case"Undefined":return L9(Z,X,Y);case"Union":return C9(Z,X,Y);case"Any":case"AsyncIterator":case"Constructor":case"Function":case"Iterator":case"Never":case"Promise":case"TemplateLiteral":case"Uint8Array":case"Unknown":case"Void":return l6(Y);default:if(!u1.TypeRegistry.Has(Z[u1.Kind]))throw new t6(Z);return l6(Y)}},I9=function(...$){return $.length===3?n0($[0],$[1],$[2]):n0($[0],[],$[1])};Object.defineProperty(mW,"__esModule",{value:!0});mW.Convert=mW.Default=mW.ValueConvertUnknownTypeError=void 0;var Z0=x0(),hJ=p1(),oJ=Q$(),yW=w1(),u1=f0();class t6 extends u1.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}mW.ValueConvertUnknownTypeError=t6;mW.Default=l6;mW.Convert=I9});var a6=J0((sW)=>{Object.defineProperty(sW,"__esModule",{value:!0});sW.EncodeTransform=sW.DecodeTransform=sW.HasTransform=sW.TransformEncodeError=sW.TransformDecodeError=sW.TransformEncodeCheckError=sW.TransformDecodeCheckError=sW.TransformUnknownTypeError=void 0;var c0=x0(),h1=w1(),h=f0();class H$ extends h.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}sW.TransformUnknownTypeError=H$;class lW extends h.TypeBoxError{constructor($,W,Y){super("Unable to decode due to invalid value");this.schema=$,this.value=W,this.error=Y}}sW.TransformDecodeCheckError=lW;class tW extends h.TypeBoxError{constructor($,W,Y){super("Unable to encode due to invalid value");this.schema=$,this.value=W,this.error=Y}}sW.TransformEncodeCheckError=tW;class s6 extends h.TypeBoxError{constructor($,W,Y){super(`${Y instanceof Error?Y.message:"Unknown error"}`);this.schema=$,this.value=W}}sW.TransformDecodeError=s6;class r6 extends h.TypeBoxError{constructor($,W,Y){super(`${Y instanceof Error?Y.message:"Unknown error"}`);this.schema=$,this.value=W}}sW.TransformEncodeError=r6;var oW;(function($){function W(w,I){return h.TypeGuard.TTransform(w)||j(w.items,I)}function Y(w,I){return h.TypeGuard.TTransform(w)||j(w.items,I)}function X(w,I){return h.TypeGuard.TTransform(w)||j(w.returns,I)||w.parameters.some((R)=>j(R,I))}function Z(w,I){return h.TypeGuard.TTransform(w)||j(w.returns,I)||w.parameters.some((R)=>j(R,I))}function Q(w,I){return h.TypeGuard.TTransform(w)||h.TypeGuard.TTransform(w.unevaluatedProperties)||w.allOf.some((R)=>j(R,I))}function J(w,I){return h.TypeGuard.TTransform(w)||j(w.items,I)}function z(w,I){return h.TypeGuard.TTransform(w)||j(w.not,I)}function B(w,I){return h.TypeGuard.TTransform(w)||Object.values(w.properties).some((R)=>j(R,I))||h.TypeGuard.TSchema(w.additionalProperties)&&j(w.additionalProperties,I)}function D(w,I){return h.TypeGuard.TTransform(w)||j(w.item,I)}function A(w,I){const R=Object.getOwnPropertyNames(w.patternProperties)[0],x=w.patternProperties[R];return h.TypeGuard.TTransform(w)||j(x,I)||h.TypeGuard.TSchema(w.additionalProperties)&&h.TypeGuard.TTransform(w.additionalProperties)}function S(w,I){if(h.TypeGuard.TTransform(w))return!0;return j((0,h1.Deref)(w,I),I)}function G(w,I){if(h.TypeGuard.TTransform(w))return!0;return j((0,h1.Deref)(w,I),I)}function K(w,I){return h.TypeGuard.TTransform(w)||h.TypeGuard.TSchema(w.items)&&w.items.some((R)=>j(R,I))}function N(w,I){return h.TypeGuard.TTransform(w)||w.anyOf.some((R)=>j(R,I))}function j(w,I){const R=(0,c0.IsString)(w.$id)?[...I,w]:I,x=w;if(w.$id&&O.has(w.$id))return!1;if(w.$id)O.add(w.$id);switch(w[h.Kind]){case"Array":return W(x,R);case"AsyncIterator":return Y(x,R);case"Constructor":return X(x,R);case"Function":return Z(x,R);case"Intersect":return Q(x,R);case"Iterator":return J(x,R);case"Not":return z(x,R);case"Object":return B(x,R);case"Promise":return D(x,R);case"Record":return A(x,R);case"Ref":return S(x,R);case"This":return G(x,R);case"Tuple":return K(x,R);case"Union":return N(x,R);case"Any":case"BigInt":case"Boolean":case"Date":case"Integer":case"Literal":case"Never":case"Null":case"Number":case"String":case"Symbol":case"TemplateLiteral":case"Undefined":case"Uint8Array":case"Unknown":case"Void":return h.TypeGuard.TTransform(w);default:if(!h.TypeRegistry.Has(x[h.Kind]))throw new H$(x);return h.TypeGuard.TTransform(w)}}const O=new Set;function U(w,I){return O.clear(),j(w,I)}$.Has=U})(oW||(sW.HasTransform=oW={}));var nW;(function($){function W(N,j){try{return h.TypeGuard.TTransform(N)?N[h.Transform].Decode(j):j}catch(O){throw new s6(N,j,O)}}function Y(N,j,O){const U=O.map((w)=>S(N.items,j,w));return W(N,U)}function X(N,j,O){if(!(0,c0.IsPlainObject)(O)||(0,c0.IsValueType)(O))return W(N,O);const U=h.KeyResolver.ResolveKeys(N,{includePatterns:!1}),w=Object.entries(O).reduce((R,[x,_])=>{return!U.includes(x)?{...R,[x]:_}:{...R,[x]:W(h.IndexedAccessor.Resolve(N,[x]),_)}},{});if(!h.TypeGuard.TTransform(N.unevaluatedProperties))return W(N,w);const I=Object.entries(w).reduce((R,[x,_])=>{return U.includes(x)?{...R,[x]:_}:{...R,[x]:W(N.unevaluatedProperties,_)}},{});return W(N,I)}function Z(N,j,O){const U=S(N.not,j,O);return W(N,U)}function Q(N,j,O){if(!(0,c0.IsPlainObject)(O))return W(N,O);const U=Object.entries(O).reduce((R,[x,_])=>{return!(x in N.properties)?{...R,[x]:_}:{...R,[x]:S(N.properties[x],j,_)}},{});if(!h.TypeGuard.TSchema(N.additionalProperties))return W(N,U);const w=N.additionalProperties,I=Object.entries(U).reduce((R,[x,_])=>{return x in N.properties?{...R,[x]:_}:{...R,[x]:S(w,j,_)}},{});return W(N,I)}function J(N,j,O){if(!(0,c0.IsPlainObject)(O))return W(N,O);const U=Object.getOwnPropertyNames(N.patternProperties)[0],w=N.patternProperties[U],I=new RegExp(U),R=Object.entries(O).reduce((e,[o,r])=>{return!I.test(o)?{...e,[o]:r}:{...e,[o]:S(w,j,r)}},{});if(!h.TypeGuard.TSchema(N.additionalProperties))return W(N,R);const x=N.additionalProperties,_=Object.entries(R).reduce((e,[o,r])=>{return I.test(o)?{...e,[o]:r}:{...e,[o]:S(x,j,r)}},{});return W(N,_)}function z(N,j,O){const U=(0,h1.Deref)(N,j),w=S(U,j,O);return W(N,w)}function B(N,j,O){const U=(0,h1.Deref)(N,j),w=S(U,j,O);return W(N,w)}function D(N,j,O){const U=(0,c0.IsArray)(N.items)?N.items.map((w,I)=>S(w,j,O[I])):[];return W(N,U)}function A(N,j,O){const U=W(N,O);for(let w of N.anyOf){if(!G(w,j,U))continue;return S(w,j,U)}return U}function S(N,j,O){const U=typeof N.$id==="string"?[...j,N]:j,w=N;switch(N[h.Kind]){case"Array":return Y(w,U,O);case"Intersect":return X(w,U,O);case"Not":return Z(w,U,O);case"Object":return Q(w,U,O);case"Record":return J(w,U,O);case"Ref":return z(w,U,O);case"Symbol":return W(w,O);case"This":return B(w,U,O);case"Tuple":return D(w,U,O);case"Union":return A(w,U,O);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Constructor":case"Date":case"Function":case"Integer":case"Iterator":case"Literal":case"Never":case"Null":case"Number":case"Promise":case"String":case"TemplateLiteral":case"Undefined":case"Uint8Array":case"Unknown":case"Void":return W(w,O);default:if(!h.TypeRegistry.Has(w[h.Kind]))throw new H$(w);return W(w,O)}}let G=()=>!1;function K(N,j,O,U){return G=U,S(N,j,O)}$.Decode=K})(nW||(sW.DecodeTransform=nW={}));var cW;(function($){function W(N,j){try{return h.TypeGuard.TTransform(N)?N[h.Transform].Encode(j):j}catch(O){throw new r6(N,j,O)}}function Y(N,j,O){return W(N,O).map((w)=>S(N.items,j,w))}function X(N,j,O){const U=W(N,O);if(!(0,c0.IsPlainObject)(O)||(0,c0.IsValueType)(O))return U;const w=h.KeyResolver.ResolveKeys(N,{includePatterns:!1}),I=Object.entries(U).reduce((R,[x,_])=>{return!w.includes(x)?{...R,[x]:_}:{...R,[x]:W(h.IndexedAccessor.Resolve(N,[x]),_)}},{});if(!h.TypeGuard.TTransform(N.unevaluatedProperties))return W(N,I);return Object.entries(I).reduce((R,[x,_])=>{return w.includes(x)?{...R,[x]:_}:{...R,[x]:W(N.unevaluatedProperties,_)}},{})}function Z(N,j,O){const U=W(N,O);return W(N.not,U)}function Q(N,j,O){const U=W(N,O);if(!(0,c0.IsPlainObject)(O))return U;const w=Object.entries(U).reduce((R,[x,_])=>{return!(x in N.properties)?{...R,[x]:_}:{...R,[x]:S(N.properties[x],j,_)}},{});if(!h.TypeGuard.TSchema(N.additionalProperties))return w;const I=N.additionalProperties;return Object.entries(w).reduce((R,[x,_])=>{return x in N.properties?{...R,[x]:_}:{...R,[x]:S(I,j,_)}},{})}function J(N,j,O){const U=W(N,O);if(!(0,c0.IsPlainObject)(O))return U;const w=Object.getOwnPropertyNames(N.patternProperties)[0],I=N.patternProperties[w],R=new RegExp(w),x=Object.entries(U).reduce((e,[o,r])=>{return!R.test(o)?{...e,[o]:r}:{...e,[o]:S(I,j,r)}},{});if(!h.TypeGuard.TSchema(N.additionalProperties))return W(N,x);const _=N.additionalProperties;return Object.entries(x).reduce((e,[o,r])=>{return R.test(o)?{...e,[o]:r}:{...e,[o]:S(_,j,r)}},{})}function z(N,j,O){const U=(0,h1.Deref)(N,j),w=S(U,j,O);return W(N,w)}function B(N,j,O){const U=(0,h1.Deref)(N,j),w=S(U,j,O);return W(N,w)}function D(N,j,O){const U=W(N,O);return(0,c0.IsArray)(N.items)?N.items.map((w,I)=>S(w,j,U[I])):[]}function A(N,j,O){for(let U of N.anyOf){if(!G(U,j,O))continue;const w=S(U,j,O);return W(N,w)}return W(N,O)}function S(N,j,O){const U=typeof N.$id==="string"?[...j,N]:j,w=N;switch(N[h.Kind]){case"Array":return Y(w,U,O);case"Intersect":return X(w,U,O);case"Not":return Z(w,U,O);case"Object":return Q(w,U,O);case"Record":return J(w,U,O);case"Ref":return z(w,U,O);case"This":return B(w,U,O);case"Tuple":return D(w,U,O);case"Union":return A(w,U,O);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Constructor":case"Date":case"Function":case"Integer":case"Iterator":case"Literal":case"Never":case"Null":case"Number":case"Promise":case"String":case"Symbol":case"TemplateLiteral":case"Undefined":case"Uint8Array":case"Unknown":case"Void":return W(w,O);default:if(!h.TypeRegistry.Has(w[h.Kind]))throw new H$(w);return W(w,O)}}let G=()=>!1;function K(N,j,O,U){return G=U,S(N,j,O)}$.Encode=K})(cW||(sW.EncodeTransform=cW={}))});var JY=J0((ZY)=>{Object.defineProperty(ZY,"__esModule",{value:!0});ZY.Value=void 0;var aW=I$(),f9=jW(),T9=W$(),d9=SW(),eW=dW(),y9=p1(),$Y=hW(),WY=m6(),x$=Q$(),YY=E6(),k$=a6(),XY;(function($){function W(...N){return eW.Cast.apply(eW,N)}$.Cast=W;function Y(...N){return WY.Create.apply(WY,N)}$.Create=Y;function X(...N){return x$.Check.apply(x$,N)}$.Check=X;function Z(...N){return $Y.Convert.apply($Y,N)}$.Convert=Z;function Q(N){return y9.Clone(N)}$.Clone=Q;function J(...N){const[j,O,U]=N.length===3?[N[0],N[1],N[2]]:[N[0],[],N[1]];if(!X(j,O,U))throw new k$.TransformDecodeCheckError(j,U,B(j,O,U).First());return k$.DecodeTransform.Decode(j,O,U,x$.Check)}$.Decode=J;function z(...N){const[j,O,U]=N.length===3?[N[0],N[1],N[2]]:[N[0],[],N[1]],w=k$.EncodeTransform.Encode(j,O,U,x$.Check);if(!X(j,O,w))throw new k$.TransformEncodeCheckError(j,U,B(j,O,U).First());return w}$.Encode=z;function B(...N){return aW.Errors.apply(aW,N)}$.Errors=B;function D(N,j){return d9.Equal(N,j)}$.Equal=D;function A(N,j){return YY.Diff(N,j)}$.Diff=A;function S(N){return T9.Hash(N)}$.Hash=S;function G(N,j){return YY.Patch(N,j)}$.Patch=G;function K(N,j){f9.Mutate(N,j)}$.Mutate=K})(XY||(ZY.Value=XY={}))});var e6=J0((Y1)=>{Object.defineProperty(Y1,"__esModule",{value:!0});Y1.Value=Y1.ValuePointer=Y1.Delete=Y1.Update=Y1.Insert=Y1.Edit=Y1.ValueErrorIterator=Y1.ValueErrorType=void 0;var zY=I$();Object.defineProperty(Y1,"ValueErrorType",{enumerable:!0,get:function(){return zY.ValueErrorType}});Object.defineProperty(Y1,"ValueErrorIterator",{enumerable:!0,get:function(){return zY.ValueErrorIterator}});var g$=E6();Object.defineProperty(Y1,"Edit",{enumerable:!0,get:function(){return g$.Edit}});Object.defineProperty(Y1,"Insert",{enumerable:!0,get:function(){return g$.Insert}});Object.defineProperty(Y1,"Update",{enumerable:!0,get:function(){return g$.Update}});Object.defineProperty(Y1,"Delete",{enumerable:!0,get:function(){return g$.Delete}});var v9=R$();Object.defineProperty(Y1,"ValuePointer",{enumerable:!0,get:function(){return v9.ValuePointer}});var p9=JY();Object.defineProperty(Y1,"Value",{enumerable:!0,get:function(){return p9.Value}})});var BY=J0((NY)=>{Object.defineProperty(NY,"__esModule",{value:!0});NY.TypeCompiler=NY.Policy=NY.TypeCompilerTypeGuardError=NY.TypeCompilerUnknownTypeError=NY.TypeCheck=void 0;var N$=a6(),c=x0(),t9=$$(),U$=E$(),s9=w1(),r9=W$(),U0=f0();class Z8{constructor($,W,Y,X){this.schema=$,this.references=W,this.checkFunc=Y,this.code=X,this.hasTransform=N$.HasTransform.Has($,W)}Code(){return this.code}Errors($){return(0,t9.Errors)(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new N$.TransformDecodeCheckError(this.schema,$,this.Errors($).First());return this.hasTransform?N$.DecodeTransform.Decode(this.schema,this.references,$,(W,Y,X)=>this.Check(X)):$}Encode($){const W=this.hasTransform?N$.EncodeTransform.Encode(this.schema,this.references,$,(Y,X,Z)=>this.Check(Z)):$;if(!this.checkFunc(W))throw new N$.TransformEncodeCheckError(this.schema,$,this.Errors($).First());return W}}NY.TypeCheck=Z8;var U1;(function($){function W(Q){return Q===36}$.DollarSign=W;function Y(Q){return Q===95}$.IsUnderscore=Y;function X(Q){return Q>=65&&Q<=90||Q>=97&&Q<=122}$.IsAlpha=X;function Z(Q){return Q>=48&&Q<=57}$.IsNumeric=Z})(U1||(U1={}));var v$;(function($){function W(Q){if(Q.length===0)return!1;return U1.IsNumeric(Q.charCodeAt(0))}function Y(Q){if(W(Q))return!1;for(let J=0;J<Q.length;J++){const z=Q.charCodeAt(J);if(!(U1.IsAlpha(z)||U1.IsNumeric(z)||U1.DollarSign(z)||U1.IsUnderscore(z)))return!1}return!0}function X(Q){return Q.replace(/'/g,"\\'")}function Z(Q,J){return Y(J)?`${Q}.${J}`:`${Q}['${X(J)}']`}$.Encode=Z})(v$||(v$={}));var Y8;(function($){function W(Y){const X=[];for(let Z=0;Z<Y.length;Z++){const Q=Y.charCodeAt(Z);if(U1.IsNumeric(Q)||U1.IsAlpha(Q))X.push(Y.charAt(Z));else X.push(`_${Q}_`)}return X.join("").replace(/__/g,"_")}$.Encode=W})(Y8||(Y8={}));var X8;(function($){function W(Y){return Y.replace(/'/g,"\\'")}$.Escape=W})(X8||(X8={}));class Q8 extends U0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}NY.TypeCompilerUnknownTypeError=Q8;class p$ extends U0.TypeBoxError{constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}NY.TypeCompilerTypeGuardError=p$;var C1;(function($){function W(J,z,B){return U$.TypeSystemPolicy.ExactOptionalPropertyTypes?`('${z}' in ${J} ? ${B} : true)`:`(${v$.Encode(J,z)} !== undefined ? ${B} : true)`}$.IsExactOptionalProperty=W;function Y(J){return!U$.TypeSystemPolicy.AllowArrayObject?`(typeof ${J} === 'object' && ${J} !== null && !Array.isArray(${J}))`:`(typeof ${J} === 'object' && ${J} !== null)`}$.IsObjectLike=Y;function X(J){return!U$.TypeSystemPolicy.AllowArrayObject?`(typeof ${J} === 'object' && ${J} !== null && !Array.isArray(${J}) && !(${J} instanceof Date) && !(${J} instanceof Uint8Array))`:`(typeof ${J} === 'object' && ${J} !== null && !(${J} instanceof Date) && !(${J} instanceof Uint8Array))`}$.IsRecordLike=X;function Z(J){return!U$.TypeSystemPolicy.AllowNaN?`(typeof ${J} === 'number' && Number.isFinite(${J}))`:`typeof ${J} === 'number'`}$.IsNumberLike=Z;function Q(J){return U$.TypeSystemPolicy.AllowNullVoid?`(${J} === undefined || ${J} === null)`:`${J} === undefined`}$.IsVoidLike=Q})(C1||(NY.Policy=C1={}));var MY;(function($){function W(P){return P[U0.Kind]==="Any"||P[U0.Kind]==="Unknown"}function*Y(P,E,L){yield"true"}function*X(P,E,L){yield`Array.isArray(${L})`;const[p,T]=[A0("value","any"),A0("acc","number")];if((0,c.IsNumber)(P.maxItems))yield`${L}.length <= ${P.maxItems}`;if((0,c.IsNumber)(P.minItems))yield`${L}.length >= ${P.minItems}`;const d=f(P.items,E,"value");if(yield`${L}.every((${p}) => ${d})`,U0.TypeGuard.TSchema(P.contains)||(0,c.IsNumber)(P.minContains)||(0,c.IsNumber)(P.maxContains)){const Y0=U0.TypeGuard.TSchema(P.contains)?P.contains:U0.Type.Never(),j0=f(Y0,E,"value"),X0=(0,c.IsNumber)(P.minContains)?[`(count >= ${P.minContains})`]:[],M=(0,c.IsNumber)(P.maxContains)?[`(count <= ${P.maxContains})`]:[],l=`const count = value.reduce((${T}, ${p}) => ${j0} ? acc + 1 : acc, 0)`,S0=["(count > 0)",...X0,...M].join(" && ");yield`((${p}) => { ${l}; return ${S0}})(${L})`}if(P.uniqueItems===!0)yield`((${p}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${L})`}function*Z(P,E,L){yield`(typeof value === 'object' && Symbol.asyncIterator in ${L})`}function*Q(P,E,L){if(yield`(typeof ${L} === 'bigint')`,(0,c.IsBigInt)(P.exclusiveMaximum))yield`${L} < BigInt(${P.exclusiveMaximum})`;if((0,c.IsBigInt)(P.exclusiveMinimum))yield`${L} > BigInt(${P.exclusiveMinimum})`;if((0,c.IsBigInt)(P.maximum))yield`${L} <= BigInt(${P.maximum})`;if((0,c.IsBigInt)(P.minimum))yield`${L} >= BigInt(${P.minimum})`;if((0,c.IsBigInt)(P.multipleOf))yield`(${L} % BigInt(${P.multipleOf})) === 0`}function*J(P,E,L){yield`(typeof ${L} === 'boolean')`}function*z(P,E,L){yield*v0(P.returns,E,`${L}.prototype`)}function*B(P,E,L){if(yield`(${L} instanceof Date) && Number.isFinite(${L}.getTime())`,(0,c.IsNumber)(P.exclusiveMaximumTimestamp))yield`${L}.getTime() < ${P.exclusiveMaximumTimestamp}`;if((0,c.IsNumber)(P.exclusiveMinimumTimestamp))yield`${L}.getTime() > ${P.exclusiveMinimumTimestamp}`;if((0,c.IsNumber)(P.maximumTimestamp))yield`${L}.getTime() <= ${P.maximumTimestamp}`;if((0,c.IsNumber)(P.minimumTimestamp))yield`${L}.getTime() >= ${P.minimumTimestamp}`;if((0,c.IsNumber)(P.multipleOfTimestamp))yield`(${L}.getTime() % ${P.multipleOfTimestamp}) === 0`}function*D(P,E,L){yield`(typeof ${L} === 'function')`}function*A(P,E,L){if(yield`(typeof ${L} === 'number' && Number.isInteger(${L}))`,(0,c.IsNumber)(P.exclusiveMaximum))yield`${L} < ${P.exclusiveMaximum}`;if((0,c.IsNumber)(P.exclusiveMinimum))yield`${L} > ${P.exclusiveMinimum}`;if((0,c.IsNumber)(P.maximum))yield`${L} <= ${P.maximum}`;if((0,c.IsNumber)(P.minimum))yield`${L} >= ${P.minimum}`;if((0,c.IsNumber)(P.multipleOf))yield`(${L} % ${P.multipleOf}) === 0`}function*S(P,E,L){const p=P.allOf.map((T)=>f(T,E,L)).join(" && ");if(P.unevaluatedProperties===!1){const T=n(`${new RegExp(U0.KeyResolver.ResolvePattern(P))};`),d=`Object.getOwnPropertyNames(${L}).every(key => ${T}.test(key))`;yield`(${p} && ${d})`}else if(U0.TypeGuard.TSchema(P.unevaluatedProperties)){const T=n(`${new RegExp(U0.KeyResolver.ResolvePattern(P))};`),d=`Object.getOwnPropertyNames(${L}).every(key => ${T}.test(key) || ${f(P.unevaluatedProperties,E,`${L}[key]`)})`;yield`(${p} && ${d})`}else yield`(${p})`}function*G(P,E,L){yield`(typeof value === 'object' && Symbol.iterator in ${L})`}function*K(P,E,L){if(typeof P.const==="number"||typeof P.const==="boolean")yield`(${L} === ${P.const})`;else yield`(${L} === '${X8.Escape(P.const)}')`}function*N(P,E,L){yield"false"}function*j(P,E,L){yield`(!${f(P.not,E,L)})`}function*O(P,E,L){yield`(${L} === null)`}function*U(P,E,L){if(yield C1.IsNumberLike(L),(0,c.IsNumber)(P.exclusiveMaximum))yield`${L} < ${P.exclusiveMaximum}`;if((0,c.IsNumber)(P.exclusiveMinimum))yield`${L} > ${P.exclusiveMinimum}`;if((0,c.IsNumber)(P.maximum))yield`${L} <= ${P.maximum}`;if((0,c.IsNumber)(P.minimum))yield`${L} >= ${P.minimum}`;if((0,c.IsNumber)(P.multipleOf))yield`(${L} % ${P.multipleOf}) === 0`}function*w(P,E,L){if(yield C1.IsObjectLike(L),(0,c.IsNumber)(P.minProperties))yield`Object.getOwnPropertyNames(${L}).length >= ${P.minProperties}`;if((0,c.IsNumber)(P.maxProperties))yield`Object.getOwnPropertyNames(${L}).length <= ${P.maxProperties}`;const p=Object.getOwnPropertyNames(P.properties);for(let T of p){const d=v$.Encode(L,T),Y0=P.properties[T];if(P.required&&P.required.includes(T)){if(yield*v0(Y0,E,d),U0.ExtendsUndefined.Check(Y0)||W(Y0))yield`('${T}' in ${L})`}else{const j0=f(Y0,E,d);yield C1.IsExactOptionalProperty(L,T,j0)}}if(P.additionalProperties===!1)if(P.required&&P.required.length===p.length)yield`Object.getOwnPropertyNames(${L}).length === ${p.length}`;else{const T=`[${p.map((d)=>`'${d}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${L}).every(key => ${T}.includes(key))`}if(typeof P.additionalProperties==="object"){const T=f(P.additionalProperties,E,`${L}[key]`),d=`[${p.map((Y0)=>`'${Y0}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${L}).every(key => ${d}.includes(key) || ${T}))`}}function*I(P,E,L){yield`(typeof value === 'object' && typeof ${L}.then === 'function')`}function*R(P,E,L){if(yield C1.IsRecordLike(L),(0,c.IsNumber)(P.minProperties))yield`Object.getOwnPropertyNames(${L}).length >= ${P.minProperties}`;if((0,c.IsNumber)(P.maxProperties))yield`Object.getOwnPropertyNames(${L}).length <= ${P.maxProperties}`;const[p,T]=Object.entries(P.patternProperties)[0],d=n(`${new RegExp(p)}`),Y0=f(T,E,"value"),j0=U0.TypeGuard.TSchema(P.additionalProperties)?f(P.additionalProperties,E,L):P.additionalProperties===!1?"false":"true",X0=`(${d}.test(key) ? ${Y0} : ${j0})`;yield`(Object.entries(${L}).every(([key, value]) => ${X0}))`}function*x(P,E,L){const p=(0,s9.Deref)(P,E);if(b.functions.has(P.$ref))return yield`${i(P.$ref)}(${L})`;yield*v0(p,E,L)}function*_(P,E,L){if(yield`(typeof ${L} === 'string')`,(0,c.IsNumber)(P.maxLength))yield`${L}.length <= ${P.maxLength}`;if((0,c.IsNumber)(P.minLength))yield`${L}.length >= ${P.minLength}`;if(P.pattern!==void 0)yield`${n(`${new RegExp(P.pattern)};`)}.test(${L})`;if(P.format!==void 0)yield`format('${P.format}', ${L})`}function*e(P,E,L){yield`(typeof ${L} === 'symbol')`}function*o(P,E,L){yield`(typeof ${L} === 'string')`,yield`${n(`${new RegExp(P.pattern)};`)}.test(${L})`}function*r(P,E,L){yield`${i(P.$ref)}(${L})`}function*g0(P,E,L){if(yield`Array.isArray(${L})`,P.items===void 0)return yield`${L}.length === 0`;yield`(${L}.length === ${P.maxItems})`;for(let p=0;p<P.items.length;p++)yield`${f(P.items[p],E,`${L}[${p}]`)}`}function*R0(P,E,L){yield`${L} === undefined`}function*E0(P,E,L){yield`(${P.anyOf.map((T)=>f(T,E,L)).join(" || ")})`}function*H0(P,E,L){if(yield`${L} instanceof Uint8Array`,(0,c.IsNumber)(P.maxByteLength))yield`(${L}.length <= ${P.maxByteLength})`;if((0,c.IsNumber)(P.minByteLength))yield`(${L}.length >= ${P.minByteLength})`}function*z0(P,E,L){yield"true"}function*u0(P,E,L){yield C1.IsVoidLike(L)}function*a0(P,E,L){const p=b.instances.size;b.instances.set(p,P),yield`kind('${P[U0.Kind]}', ${p}, ${L})`}function*v0(P,E,L,p=!0){const T=(0,c.IsString)(P.$id)?[...E,P]:E,d=P;if(p&&(0,c.IsString)(P.$id)){const Y0=i(P.$id);if(b.functions.has(Y0))return yield`${Y0}(${L})`;else{const j0=q0(Y0,P,E,"value",!1);return b.functions.set(Y0,j0),yield`${Y0}(${L})`}}switch(d[U0.Kind]){case"Any":return yield*Y(d,T,L);case"Array":return yield*X(d,T,L);case"AsyncIterator":return yield*Z(d,T,L);case"BigInt":return yield*Q(d,T,L);case"Boolean":return yield*J(d,T,L);case"Constructor":return yield*z(d,T,L);case"Date":return yield*B(d,T,L);case"Function":return yield*D(d,T,L);case"Integer":return yield*A(d,T,L);case"Intersect":return yield*S(d,T,L);case"Iterator":return yield*G(d,T,L);case"Literal":return yield*K(d,T,L);case"Never":return yield*N(d,T,L);case"Not":return yield*j(d,T,L);case"Null":return yield*O(d,T,L);case"Number":return yield*U(d,T,L);case"Object":return yield*w(d,T,L);case"Promise":return yield*I(d,T,L);case"Record":return yield*R(d,T,L);case"Ref":return yield*x(d,T,L);case"String":return yield*_(d,T,L);case"Symbol":return yield*e(d,T,L);case"TemplateLiteral":return yield*o(d,T,L);case"This":return yield*r(d,T,L);case"Tuple":return yield*g0(d,T,L);case"Undefined":return yield*R0(d,T,L);case"Union":return yield*E0(d,T,L);case"Uint8Array":return yield*H0(d,T,L);case"Unknown":return yield*z0(d,T,L);case"Void":return yield*u0(d,T,L);default:if(!U0.TypeRegistry.Has(d[U0.Kind]))throw new Q8(P);return yield*a0(d,T,L)}}const b={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function f(P,E,L,p=!0){return`(${[...v0(P,E,L,p)].join(" && ")})`}function i(P){return`check_${Y8.Encode(P)}`}function n(P){const E=`local_${b.variables.size}`;return b.variables.set(E,`const ${E} = ${P}`),E}function q0(P,E,L,p,T=!0){const[d,Y0]=["\n",(l)=>"".padStart(l," ")],j0=A0("value","any"),X0=w0("boolean"),M=[...v0(E,L,p,T)].map((l)=>`${Y0(4)}${l}`).join(` &&${d}`);return`function ${P}(${j0})${X0} {${d}${Y0(2)}return (${d}${M}${d}${Y0(2)})\n}`}function A0(P,E){const L=b.language==="typescript"?`: ${E}`:"";return`${P}${L}`}function w0(P){return b.language==="typescript"?`: ${P}`:""}function D0(P,E,L){const p=q0("check",P,E,"value"),T=A0("value","any"),d=w0("boolean"),Y0=[...b.functions.values()],j0=[...b.variables.values()],X0=(0,c.IsString)(P.$id)?`return function check(${T})${d} {\n  return ${i(P.$id)}(value)\n}`:`return ${p}`;return[...j0,...Y0,X0].join("\n")}function M0(...P){const E={language:"javascript"},[L,p,T]=P.length===2&&(0,c.IsArray)(P[1])?[P[0],P[1],E]:P.length===2&&!(0,c.IsArray)(P[1])?[P[0],[],P[1]]:P.length===3?[P[0],P[1],P[2]]:P.length===1?[P[0],[],E]:[null,[],E];if(b.language=T.language,b.variables.clear(),b.functions.clear(),b.instances.clear(),!U0.TypeGuard.TSchema(L))throw new p$(L);for(let d of p)if(!U0.TypeGuard.TSchema(d))throw new p$(d);return D0(L,p,T)}$.Code=M0;function A1(P,E=[]){const L=M0(P,E,{language:"javascript"}),p=globalThis.Function("kind","format","hash",L),T=new Map(b.instances);function d(M,l,S0){if(!U0.TypeRegistry.Has(M)||!T.has(l))return!1;const c$=U0.TypeRegistry.Get(M),l$=T.get(l);return c$(l$,S0)}function Y0(M,l){if(!U0.FormatRegistry.Has(M))return!1;return U0.FormatRegistry.Get(M)(l)}function j0(M){return(0,r9.Hash)(M)}const X0=p(d,Y0,j0);return new Z8(P,E,X0,L)}$.Compile=A1})(MY||(NY.TypeCompiler=MY={}))});var AY=J0((l0)=>{var Y7=l0&&l0.__createBinding||(Object.create?function($,W,Y,X){if(X===void 0)X=Y;var Z=Object.getOwnPropertyDescriptor(W,Y);if(!Z||("get"in Z?!W.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return W[Y]}};Object.defineProperty($,X,Z)}:function($,W,Y,X){if(X===void 0)X=Y;$[X]=W[Y]}),X7=l0&&l0.__exportStar||function($,W){for(var Y in $)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(W,Y))Y7(W,$,Y)};Object.defineProperty(l0,"__esModule",{value:!0});l0.ValueErrorIterator=l0.ValueErrorType=void 0;var FY=I$();Object.defineProperty(l0,"ValueErrorType",{enumerable:!0,get:function(){return FY.ValueErrorType}});Object.defineProperty(l0,"ValueErrorIterator",{enumerable:!0,get:function(){return FY.ValueErrorIterator}});X7(BY(),l0)});var IY=J0((Az,CY)=>{var J7=function($){var W=$.indexOf("%");if(W===-1)return $;var Y=$.length,X="",Z=0,Q=0,J=W,z=SY;while(W>-1&&W<Y){var B=LY($[W+1],4),D=LY($[W+2],0),A=B|D,S=B8[A];if(z=B8[256+z+S],Q=Q<<6|A&B8[364+S],z===SY)X+=$.slice(Z,J),X+=Q<=65535?String.fromCharCode(Q):String.fromCharCode(55232+(Q>>10),56320+(Q&1023)),Q=0,Z=W+3,W=J=$.indexOf("%",Z);else if(z===Q7)return null;else{if(W+=3,W<Y&&$.charCodeAt(W)===37)continue;return null}}return X+$.slice(Z)},LY=function($,W){var Y=z7[$];return Y===void 0?255:Y<<W},SY=12,Q7=0,B8=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7],z7={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};CY.exports=J7});var EY=J0((wz,_Y)=>{var H7=function($){const W=new bY;if(typeof $!=="string")return W;let Y=$.length,X="",Z="",Q=-1,J=-1,z=!1,B=!1,D=!1,A=!1,S=!1,G=0;for(let K=0;K<Y+1;K++)if(G=K!==Y?$.charCodeAt(K):38,G===38){if(S=J>Q,!S)J=K;if(X=$.slice(Q+1,J),S||X.length>0){if(D)X=X.replace(GY," ");if(z)X=RY(X)||X;if(S){if(Z=$.slice(J+1,K),A)Z=Z.replace(GY," ");if(B)Z=RY(Z)||Z}const N=W[X];if(N===void 0)W[X]=Z;else if(N.pop)N.push(Z);else W[X]=[N,Z]}Z="",Q=K,J=K,z=!1,B=!1,D=!1,A=!1}else if(G===61)if(J<=Q)J=K;else B=!0;else if(G===43)if(J>Q)A=!0;else D=!0;else if(G===37)if(J>Q)B=!0;else z=!0;return W},RY=IY(),GY=/\+/g,bY=function(){};bY.prototype=Object.create(null);_Y.exports=H7});var xY=J0((Dz,VY)=>{var M7=function($){const W=$.length;if(W===0)return"";let Y="",X=0,Z=0;$:for(;Z<W;Z++){let Q=$.charCodeAt(Z);while(Q<128){if(q7[Q]!==1){if(X<Z)Y+=$.slice(X,Z);X=Z+1,Y+=Z1[Q]}if(++Z===W)break $;Q=$.charCodeAt(Z)}if(X<Z)Y+=$.slice(X,Z);if(Q<2048){X=Z+1,Y+=Z1[192|Q>>6]+Z1[128|Q&63];continue}if(Q<55296||Q>=57344){X=Z+1,Y+=Z1[224|Q>>12]+Z1[128|Q>>6&63]+Z1[128|Q&63];continue}if(++Z,Z>=W)throw new Error("URI malformed");const J=$.charCodeAt(Z)&1023;X=Z+1,Q=65536+((Q&1023)<<10|J),Y+=Z1[240|Q>>18]+Z1[128|Q>>12&63]+Z1[128|Q>>6&63]+Z1[128|Q&63]}if(X===0)return $;if(X<W)return Y+$.slice(X);return Y},Z1=Array.from({length:256},($,W)=>"%"+((W<16?"0":"")+W.toString(16)).toUpperCase()),q7=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);VY.exports={encodeString:M7}});var fY=J0((Kz,gY)=>{var kY=function($){const W=typeof $;if(W==="string")return F8($);else if(W==="bigint")return $.toString();else if(W==="boolean")return $?"true":"false";else if(W==="number"&&Number.isFinite($))return $<1000000000000000000000?""+$:F8(""+$);return""},N7=function($){let W="";if($===null||typeof $!=="object")return W;const Y="&",X=Object.keys($),Z=X.length;let Q=0;for(let J=0;J<Z;J++){const z=X[J],B=$[z],D=F8(z)+"=";if(J)W+=Y;if(Array.isArray(B)){Q=B.length;for(let A=0;A<Q;A++){if(A)W+=Y;W+=D,W+=kY(B[A])}}else W+=D,W+=kY(B)}return W},{encodeString:F8}=xY();gY.exports=N7});var A8=J0((jz,A$)=>{var TY=EY(),dY=fY(),yY={parse:TY,stringify:dY};A$.exports=yY;A$.exports.default=yY;A$.exports.parse=TY;A$.exports.stringify=dY});var _1=($,W)=>({part:$,store:null,inert:W!==void 0?new Map(W.map((Y)=>[Y.part.charCodeAt(0),Y])):null,params:null,wildcardStore:null}),L8=($,W)=>({...$,part:W}),C8=($)=>({paramName:$,store:null,inert:null});class j1{root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g};add($,W,Y){let X;if(typeof W!="string")throw TypeError("Route path must be a string");W===""?W="/":W[0]!=="/"&&(W=`/${W}`),this.history.push([$,W,Y]);let Z=W[W.length-1]==="*";Z&&(W=W.slice(0,-1));let Q=W.split(j1.regex.static),J=W.match(j1.regex.params)||[];Q[Q.length-1]===""&&Q.pop(),X=this.root[$]?this.root[$]:this.root[$]=_1("/");let z=0;for(let B=0;B<Q.length;++B){let D=Q[B];if(B>0){let A=J[z++].slice(1);if(X.params===null)X.params=C8(A);else if(X.params.paramName!==A)throw Error(`Cannot create route "${W}" with parameter "${A}" because a route already exists with a different parameter name ("${X.params.paramName}") in the same location`);let S=X.params;if(S.inert===null){X=S.inert=_1(D);continue}X=S.inert}for(let A=0;;){if(A===D.length){if(A<X.part.length){let S=L8(X,X.part.slice(A));Object.assign(X,_1(D,[S]))}break}if(A===X.part.length){if(X.inert===null)X.inert=new Map;else if(X.inert.has(D.charCodeAt(A))){X=X.inert.get(D.charCodeAt(A)),D=D.slice(A),A=0;continue}let S=_1(D.slice(A));X.inert.set(D.charCodeAt(A),S),X=S;break}if(D[A]!==X.part[A]){let S=L8(X,X.part.slice(A)),G=_1(D.slice(A));Object.assign(X,_1(X.part.slice(0,A),[S,G])),X=G;break}++A}}if(z<J.length){let B=J[z],D=B.slice(1);if(X.params===null)X.params=C8(D);else if(X.params.paramName!==D)throw Error(`Cannot create route "${W}" with parameter "${D}" because a route already exists with a different parameter name ("${X.params.paramName}") in the same location`);return X.params.store===null&&(X.params.store=Y),X.params.store}return Z?(X.wildcardStore===null&&(X.wildcardStore=Y),X.wildcardStore):(X.store===null&&(X.store=Y),X.store)}find($,W){let Y=this.root[$];return Y?s$(W,W.length,Y,0):null}}var s$=($,W,Y,X)=>{let Z=Y?.part,Q=X+Z.length;if(Z.length>1){if(Q>W)return null;if(Z.length<15){for(let J=1,z=X+1;J<Z.length;++J,++z)if(Z.charCodeAt(J)!==$.charCodeAt(z))return null}else if($.substring(X,Q)!==Z)return null}if(Q===W)return Y.store!==null?{store:Y.store,params:{}}:Y.wildcardStore!==null?{store:Y.wildcardStore,params:{"*":""}}:null;if(Y.inert!==null){let J=Y.inert.get($.charCodeAt(Q));if(J!==void 0){let z=s$($,W,J,Q);if(z!==null)return z}}if(Y.params!==null){let J=Y.params,z=$.indexOf("/",Q);if(z!==Q){if(z===-1||z>=W){if(J.store!==null){let B={};return B[J.paramName]=$.substring(Q,W),{store:J.store,params:B}}}else if(J.inert!==null){let B=s$($,W,J.inert,z);if(B!==null)return B.params[J.paramName]=$.substring(Q,z),B}}}return Y.wildcardStore!==null?{store:Y.wildcardStore,params:{"*":$.substring(Q,W)}}:null};var G8=Q1(R8(),1);var b8=G8.default;var _8=($,W)=>{return async function Y(X){const Z=X.id;if(X.event==="request"&&X.type==="begin"){const Q=()=>{let j,O,U=-1;const w=[],I=[];let R=!1;const x=new Promise((o)=>{j=(r)=>{if(R)return;else R=!0;o(r)}});let _=!1;const e=new Promise((o)=>{O=(r)=>{if(_)return;else _=!0;if(U===-1)U=0;for(;U<I.length;U++){let g0;const R0={name:"anonymous",time:performance.now(),skip:!0,end:new Promise((E0)=>{E0(g0)}),children:[]};g0=performance.now(),w[U](R0)}o(r)}});return{signal:x,consumeChild(o){switch(o.type){case"begin":w[++U]({name:o.name,time:o.time,skip:!1,end:new Promise((r)=>{I.push(r)})});break;case"end":I[U](o.time);break}},consume(o){switch(o.type){case"begin":const r=[],g0=o.unit??0;for(let R0=0;R0<g0;R0++){let E0;r.push(new Promise((H0)=>{E0=H0})),w.push(E0)}j({name:o.name,time:o.time,skip:!1,end:e,children:r});break;case"end":O(o.time);break}},resolve(){if(R&&_)return;let o;const r={name:"anonymous",time:performance.now(),skip:!0,end:new Promise((g0)=>{g0(o)}),children:[]};o=performance.now(),j(r),O(o)}}},J=Q(),z=Q(),B=Q(),D=Q(),A=Q(),S=Q(),G=Q(),K=Q();J.consume(X);const N=(j)=>{if(j.id===Z)switch(j.event){case"request":J.consume(j);break;case"request.unit":J.consumeChild(j);break;case"parse":z.consume(j);break;case"parse.unit":z.consumeChild(j);break;case"transform":B.consume(j);break;case"transform.unit":B.consumeChild(j);break;case"beforeHandle":D.consume(j);break;case"beforeHandle.unit":D.consumeChild(j);break;case"handle":A.consume(j);break;case"afterHandle":S.consume(j);break;case"afterHandle.unit":S.consumeChild(j);break;case"error":G.consume(j);break;case"error.unit":G.consumeChild(j);break;case"response":if(j.type==="begin")J.resolve(),z.resolve(),B.resolve(),D.resolve(),A.resolve(),S.resolve(),G.resolve();else $.off("event",N);K.consume(j);break;case"response.unit":K.consumeChild(j);break}};$.on("event",N),await W({id:X.id,context:X.ctx,set:X.ctx?.set,store:X.ctx?.store,time:X.time,request:J.signal,parse:z.signal,transform:B.signal,beforeHandle:D.signal,handle:A.signal,afterHandle:S.signal,error:G.signal,response:K.signal}),$.emit(`res${Z}`,void 0)}}};var $8=Q1(e6(),1),HY=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,o1=Symbol("ErrorCode"),q$=(HY?.NODE_ENV??HY?.ENV)==="production";class f$ extends Error{code="INTERNAL_SERVER_ERROR";status=500;constructor($){super($??"INTERNAL_SERVER_ERROR")}}class L1 extends Error{code="NOT_FOUND";status=404;constructor($){super($??"NOT_FOUND")}}class qY extends Error{code="PARSE";status=400;constructor($){super($??"PARSE")}}class M$ extends Error{$;code="INVALID_COOKIE_SIGNATURE";status=400;constructor($,W){super(W??`"${$}" has invalid cookie signature`);this.key=$}}class P0 extends Error{$;W;Y;code="VALIDATION";status=400;constructor($,W,Y){const X=q$?void 0:W.Errors(Y).First(),Z=X?.schema.error?typeof X.schema.error==="function"?X.schema.error($,W,Y):X.schema.error:void 0,Q=q$?Z??`Invalid ${$??X?.schema.error??X?.message}`:Z??`Invalid ${$}, '${X?.path?.slice(1)||"type"}': ${X?.message}`+"\n\nExpected: "+JSON.stringify($8.Value.Create(W.schema),null,2)+"\n\nFound: "+JSON.stringify(Y,null,2);super(Q);this.type=$;this.validator=W;this.value=Y;Object.setPrototypeOf(this,P0.prototype)}get all(){return[...this.validator.Errors(this.value)]}get model(){return $8.Value.Create(this.validator.schema)}toResponse($){return new Response(this.message,{status:400,headers:$})}}var W8={open($){$.data.open?.($)},message($,W){$.data.message?.($,W)},drain($){$.data.drain?.($)},close($,W,Y){$.data.close?.($,W,Y)}};class n1{$;W;id;validator;constructor($,W){this.raw=$;this.data=W;this.validator=$.data.validator,this.id=Date.now()}get publish(){return($,W=void 0,Y)=>{if(this.validator?.Check(W)===!1)throw new P0("message",this.validator,W);if(typeof W==="object")W=JSON.stringify(W);return this.raw.publish($,W,Y),this}}get send(){return($)=>{if(this.validator?.Check($)===!1)throw new P0("message",this.validator,$);if(Buffer.isBuffer($))return this.raw.send($),this;if(typeof $==="object")$=JSON.stringify($);return this.raw.send($),this}}get subscribe(){return($)=>{return this.raw.subscribe($),this}}get unsubscribe(){return($)=>{return this.raw.unsubscribe($),this}}get cork(){return($)=>{return this.raw.cork($),this}}get close(){return()=>{return this.raw.close(),this}}get terminate(){return this.raw.terminate.bind(this.raw)}get isSubscribed(){return this.raw.isSubscribed.bind(this.raw)}get remoteAddress(){return this.raw.remoteAddress}}var u9=function($,W){if(typeof $!=="string")throw new TypeError("argument str must be a string");var Y={},X=W||{},Z=X.decode||o9,Q=0;while(Q<$.length){var J=$.indexOf("=",Q);if(J===-1)break;var z=$.indexOf(";",Q);if(z===-1)z=$.length;else if(z<J){Q=$.lastIndexOf(";",J-1)+1;continue}var B=$.slice(Q,J).trim();if(Y[B]===void 0){var D=$.slice(J+1,z).trim();if(D.charCodeAt(0)===34)D=D.slice(1,-1);Y[B]=l9(D,Z)}Q=z+1}return Y},h9=function($,W,Y){var X=Y||{},Z=X.encode||n9;if(typeof Z!=="function")throw new TypeError("option encode is invalid");if(!T$.test($))throw new TypeError("argument name is invalid");var Q=Z(W);if(Q&&!T$.test(Q))throw new TypeError("argument val is invalid");var J=$+"="+Q;if(X.maxAge!=null){var z=X.maxAge-0;if(isNaN(z)||!isFinite(z))throw new TypeError("option maxAge is invalid");J+="; Max-Age="+Math.floor(z)}if(X.domain){if(!T$.test(X.domain))throw new TypeError("option domain is invalid");J+="; Domain="+X.domain}if(X.path){if(!T$.test(X.path))throw new TypeError("option path is invalid");J+="; Path="+X.path}if(X.expires){var B=X.expires;if(!c9(B)||isNaN(B.valueOf()))throw new TypeError("option expires is invalid");J+="; Expires="+B.toUTCString()}if(X.httpOnly)J+="; HttpOnly";if(X.secure)J+="; Secure";if(X.priority){var D=typeof X.priority==="string"?X.priority.toLowerCase():X.priority;switch(D){case"low":J+="; Priority=Low";break;case"medium":J+="; Priority=Medium";break;case"high":J+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(X.sameSite){var A=typeof X.sameSite==="string"?X.sameSite.toLowerCase():X.sameSite;switch(A){case!0:J+="; SameSite=Strict";break;case"lax":J+="; SameSite=Lax";break;case"strict":J+="; SameSite=Strict";break;case"none":J+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return J},o9=function($){return $.indexOf("%")!==-1?decodeURIComponent($):$},n9=function($){return encodeURIComponent($)},c9=function($){return m9.call($)==="[object Date]"||$ instanceof Date},l9=function($,W){try{return W($)}catch(Y){return $}};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var d$=u9,y$=h9;var m9=Object.prototype.toString,T$=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;var i$=Q1(f0(),1),B$=Q1(e6(),1),z8=Q1(AY(),1);var J8=($)=>$&&typeof $==="object"&&!Array.isArray($),Z7=($)=>typeof $==="function"&&/^\s*class\s+/.test($.toString())||$.toString().startsWith("[object ")||t0(Object.getPrototypeOf($)),B1=($,W,{skipKeys:Y}={})=>{if(J8($)&&J8(W))for(let[X,Z]of Object.entries(W)){if(Y?.includes(X))continue;if(!J8(Z)){$[X]=Z;continue}if(!(X in $)){$[X]=Z;continue}if(Z7(Z)){$[X]=Z;continue}$[X]=B1($[X],Z)}return $},wY=($,W)=>B1($,W,{skipKeys:["properties"]}),O0=($,W)=>{const Y=[...Array.isArray($)?$:[$]],X=[];for(let Z of Y)if(Z.$elysiaChecksum)X.push(Z.$elysiaChecksum);for(let Z of Array.isArray(W)?W:[W])if(!X.includes(Z?.$elysiaChecksum))Y.push(Z);return Y},I1=($,W)=>{return{body:W?.body??$?.body,headers:W?.headers??$?.headers,params:W?.params??$?.params,query:W?.query??$?.query,response:W?.response??$?.response,type:$?.type||W?.type,detail:B1(W?.detail??{},$?.detail??{}),parse:O0($?.parse??[],W?.parse??[]),transform:O0($?.transform??[],W?.transform??[]),beforeHandle:O0($?.beforeHandle??[],W?.beforeHandle??[]),afterHandle:O0($?.afterHandle??[],W?.afterHandle??[]),onResponse:O0($?.onResponse??[],W?.onResponse??[]),trace:O0($?.trace??[],W?.trace??[]),error:O0($?.error??[],W?.error??[])}},X1=($,{models:W={},additionalProperties:Y=!1,dynamic:X=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in W))return;const Z=typeof $==="string"?W[$]:$;if(Z.type==="object"&&("additionalProperties"in Z)===!1)Z.additionalProperties=Y;if(X)return{schema:Z,references:"",checkFunc:()=>{},code:"",Check:(Q)=>B$.Value.Check(Z,Q),Errors:(Q)=>B$.Value.Errors(Z,Q),Code:()=>""};return z8.TypeCompiler.Compile(Z)},H8=($,{models:W={},additionalProperties:Y=!1,dynamic:X=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in W))return;const Z=typeof $==="string"?W[$]:$,Q=(z)=>{if(X)return{schema:z,references:"",checkFunc:()=>{},code:"",Check:(B)=>B$.Value.Check(z,B),Errors:(B)=>B$.Value.Errors(z,B),Code:()=>""};return z8.TypeCompiler.Compile(z)};if(i$.Kind in Z){if(("additionalProperties"in Z)===!1)Z.additionalProperties=Y;return{200:Q(Z)}}const J={};return Object.keys(Z).forEach((z)=>{const B=Z[+z];if(typeof B==="string"){if(B in W){const D=W[B];D.type==="object"&&("additionalProperties"in D),J[+z]=(i$.Kind in D)?Q(D):D}return}if(B.type==="object"&&("additionalProperties"in B)===!1)B.additionalProperties=Y;J[+z]=(i$.Kind in B)?Q(B):B}),J},q8=($)=>{let W=9;for(let Y=0;Y<$.length;)W=Math.imul(W^$.charCodeAt(Y++),387420489);return W=W^W>>>9},m$=($,W,Y)=>{const X=(Z)=>{if(Y)Z.$elysiaChecksum=Y;return Z};return{start:O0($.start,("start"in W?W.start??[]:[]).map(X)),request:O0($.request,("request"in W?W.request??[]:[]).map(X)),parse:O0($.parse,"parse"in W?W?.parse??[]:[]).map(X),transform:O0($.transform,(W?.transform??[]).map(X)),beforeHandle:O0($.beforeHandle,(W?.beforeHandle??[]).map(X)),afterHandle:O0($.afterHandle,(W?.afterHandle??[]).map(X)),onResponse:O0($.onResponse,(W?.onResponse??[]).map(X)),trace:O0($.trace,("trace"in W?W.trace??[]:[]).map(X)),error:O0($.error,(W?.error??[]).map(X)),stop:O0($.stop,("stop"in W?W.stop??[]:[]).map(X))}};var DY=($,W=!0)=>{if(!$)return $;if(typeof $==="function"){if(W)$.$elysiaHookType="global";else $.$elysiaHookType=void 0;return $}return $.map((Y)=>{if(W)Y.$elysiaHookType="global";else Y.$elysiaHookType=void 0;return Y})},c1=($)=>{if(!$)return $;if(typeof $==="function")return $.$elysiaHookType==="global"?$:void 0;return $.filter((W)=>W.$elysiaHookType==="global")},M8=($)=>{return{...$,type:$?.type,detail:$?.detail,parse:c1($?.parse),transform:c1($?.transform),beforeHandle:c1($?.beforeHandle),afterHandle:c1($?.afterHandle),onResponse:c1($?.onResponse),error:c1($?.error)}},N8={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},l1=async($,W)=>{if(typeof $!=="string")throw new TypeError("Cookie value must be provided as a string.");if(W===null)throw new TypeError("Secret key must be provided.");const Y=new TextEncoder,X=await crypto.subtle.importKey("raw",Y.encode(W),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Z=await crypto.subtle.sign("HMAC",X,Y.encode($)),Q=Array.from(new Uint8Array(Z)),J=btoa(String.fromCharCode(...Q));return`${$}.${J.replace(/=+$/,"")}`},U8=async($,W)=>{if(typeof $!=="string")throw new TypeError("Signed cookie string must be provided.");if(W===null)throw new TypeError("Secret key must be provided.");const Y=$.slice(0,$.lastIndexOf("."));return await l1(Y,W)===$?Y:!1};class s0{$;W;name;setter;constructor($,W={}){this._value=$;this.property=W}get(){return this._value}get value(){return this._value}set value($){if(typeof $==="object"){if(JSON.stringify(this.value)===JSON.stringify($))return}else if(this.value===$)return;this._value=$,this.sync()}add($){const W=Object.assign(this.property,typeof $==="function"?$(Object.assign(this.property,this.value)):$);if("value"in W)this._value=W.value,delete W.value;return this.property=W,this.sync()}set($){const W=typeof $==="function"?$(Object.assign(this.property,this.value)):$;if("value"in W)this._value=W.value,delete W.value;return this.property=W,this.sync()}remove(){if(this.value===void 0)return;this.set({value:"",expires:new Date(0),maxAge:0})}get domain(){return this.property.domain}set domain($){if(this.property.domain===$)return;this.property.domain=$,this.sync()}get expires(){return this.property.expires}set expires($){if(this.property.expires?.getTime()===$?.getTime())return;this.property.expires=$,this.sync()}get httpOnly(){return this.property.httpOnly}set httpOnly($){if(this.property.domain===$)return;this.property.httpOnly=$,this.sync()}get maxAge(){return this.property.maxAge}set maxAge($){if(this.property.maxAge===$)return;this.property.maxAge=$,this.sync()}get path(){return this.property.path}set path($){if(this.property.path===$)return;this.property.path=$,this.sync()}get priority(){return this.property.priority}set priority($){if(this.property.priority===$)return;this.property.priority=$,this.sync()}get sameSite(){return this.property.sameSite}set sameSite($){if(this.property.sameSite===$)return;this.property.sameSite=$,this.sync()}get secure(){return this.property.secure}set secure($){if(this.property.secure===$)return;this.property.secure=$,this.sync()}toString(){return typeof this.value==="object"?JSON.stringify(this.value):this.value?.toString()??""}sync(){if(!this.name||!this.setter)return this;if(!this.setter.cookie)this.setter.cookie={[this.name]:Object.assign(this.property,{value:this.toString()})};else this.setter.cookie[this.name]=Object.assign(this.property,{value:this.toString()});return this}}var KY=($,W,Y)=>new Proxy($,{get(X,Z){if(Z in X)return X[Z];const Q=new s0(void 0,Y?{...Y}:void 0);return Q.setter=W,Q.name=Z,Q},set(X,Z,Q){if(!(Q instanceof s0))return!1;if(!W.cookie)W.cookie={};return Q.setter=W,Q.name=Z,Q.sync(),X[Z]=Q,!0}}),u$=async($,W,{secret:Y,sign:X,...Z}={})=>{if(!W)return KY({},$,Z);const Q={},J=typeof Y==="string";if(X&&X!==!0&&!Array.isArray(X))X=[X];const z=Object.keys(d$(W));for(let B=0;B<z.length;B++){const D=z[B];let A=d$(W)[D];if(X===!0||X?.includes(D)){if(!Y)throw new Error("No secret is provided to cookie plugin");if(J){if(A=await U8(A,Y),A===!1)throw new M$(D)}else{let K=!0;for(let N=0;N<Y.length;N++){const j=await U8(A,Y[N]);if(j!==!1){A=j,K=!1;break}}if(K)throw new M$(D)}}if(A===void 0)continue;const S=A.charCodeAt(0);if(S===123||S===91)try{const K=new s0(JSON.parse(A));K.setter=$,K.name=D,Q[D]=K;continue}catch{}if(!Number.isNaN(+A))A=+A;else if(A==="true")A=!0;else if(A==="false")A=!1;const G=new s0(A,Z);G.setter=$,G.name=D,Q[D]=G}return KY(Q,$)};var jY="toJSON"in new Headers,t0=($)=>{for(let W in $)return!0;return!1},PY=($,W)=>{if(!$||!Array.isArray(W))return $;$.delete("Set-Cookie");for(let Y=0;Y<W.length;Y++){const X=W[Y].indexOf("=");$.append("Set-Cookie",`${W[Y].slice(0,X)}=${W[Y].slice(X+1)}`)}return $},OY=($)=>{if(!$||typeof $!=="object"||!t0($))return;const W=[];for(let[Y,X]of Object.entries($)){if(!Y||!X)continue;if(Array.isArray(X.value))for(let Z=0;Z<X.value.length;Z++){let Q=X.value[Z];if(Q===void 0||Q===null)continue;if(typeof Q==="object")Q=JSON.stringify(Q);W.push(y$(Y,Q,X))}else{let Z=X.value;if(Z===void 0||Z===null)continue;if(typeof Z==="object")Z=JSON.stringify(Z);W.push(y$(Y,X.value,X))}}if(W.length===0)return;if(W.length===1)return W[0];return W},F1=($,W)=>{if($?.$elysia==="ElyEden")$=$.value;if(t0(W.headers)||W.status!==200||W.redirect||W.cookie){if(typeof W.status==="string")W.status=N8[W.status];if(W.redirect){if(W.headers.Location=W.redirect,!W.status||W.status<300||W.status>=400)W.status=302}if(W.cookie&&t0(W.cookie))W.headers["Set-Cookie"]=OY(W.cookie);if(W.headers["Set-Cookie"]&&Array.isArray(W.headers["Set-Cookie"]))W.headers=PY(new Headers(W.headers),W.headers["Set-Cookie"]);switch($?.constructor?.name){case"String":case"Blob":return new Response($,{status:W.status,headers:W.headers});case"Object":case"Array":return Response.json($,W);case void 0:if(!$)return new Response("",W);return Response.json($,W);case"Response":const Y={...W.headers};if(jY)W.headers=$.headers.toJSON();else for(let[Z,Q]of $.headers.entries())if(Z in W.headers)W.headers[Z]=Q;for(let Z in Y)$.headers.append(Z,Y[Z]);return $;case"Error":return F$($,W);case"Promise":return $.then((Z)=>F1(Z,W));case"Function":return F1($(),W);case"Number":case"Boolean":return new Response($.toString(),W);case"Cookie":if($ instanceof s0)return new Response($.value,W);return new Response($?.toString(),W);default:const X=JSON.stringify($);if(X.charCodeAt(0)===123){if(!W.headers["Content-Type"])W.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),W)}return new Response(X,W)}}else switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return F$($,W);case"Promise":return $.then((X)=>{const Z=K1(X);if(Z!==void 0)return Z;return new Response("")});case"Function":return K1($());case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof s0)return new Response($.value,W);return new Response($?.toString(),W);default:const Y=JSON.stringify($);if(Y.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(Y)}},r0=($,W)=>{if($===void 0||$===null)return;if($?.$elysia==="ElyEden")$=$.value;if(t0(W.headers)||W.status!==200||W.redirect||W.cookie){if(typeof W.status==="string")W.status=N8[W.status];if(W.redirect){if(W.headers.Location=W.redirect,!W.status||W.status<300||W.status>=400)W.status=302}if(W.cookie&&t0(W.cookie))W.headers["Set-Cookie"]=OY(W.cookie);if(W.headers["Set-Cookie"]&&Array.isArray(W.headers["Set-Cookie"]))W.headers=PY(new Headers(W.headers),W.headers["Set-Cookie"]);switch($?.constructor?.name){case"String":case"Blob":return new Response($,W);case"Object":case"Array":return Response.json($,W);case void 0:if(!$)return;return Response.json($,W);case"Response":const Y=Object.assign({},W.headers);if(jY)W.headers=$.headers.toJSON();else for(let[Z,Q]of $.headers.entries())if(!(Z in W.headers))W.headers[Z]=Q;for(let Z in Y)$.headers.append(Z,Y[Z]);if($.status!==W.status)W.status=$.status;return $;case"Promise":return $.then((Z)=>{const Q=r0(Z,W);if(Q!==void 0)return Q;return});case"Error":return F$($,W);case"Function":return r0($(),W);case"Number":case"Boolean":return new Response($.toString(),W);case"Cookie":if($ instanceof s0)return new Response($.value,W);return new Response($?.toString(),W);default:const X=JSON.stringify($);if(X.charCodeAt(0)===123){if(!W.headers["Content-Type"])W.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),W)}return new Response(X,W)}}else switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Promise":return $.then((X)=>{const Z=r0(X,W);if(Z!==void 0)return Z;return});case"Error":return F$($,W);case"Function":return K1($());case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof s0)return new Response($.value,W);return new Response($?.toString(),W);default:const Y=JSON.stringify($);if(Y.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(Y)}},K1=($)=>{switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return F$($);case"Promise":return $.then((Y)=>{const X=K1(Y);if(X!==void 0)return X;return new Response("")});case"Function":return K1($());case"Number":case"Boolean":return new Response($.toString());default:const W=JSON.stringify($);if(W.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(W)}},F$=($,W)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:W?.status!==200?W?.status??500:500,headers:W?.headers});var vY=Q1(A8(),1);var U7=(new Headers()).toJSON,pY=new RegExp(" (\\w+) = context","g"),iY={value:0},mY=({hasTrace:$,hasTraceSet:W=!1,addFn:Y,condition:X={}})=>{if($)return(Z,{name:Q,attribute:J="",unit:z=0}={})=>{const B=Z.indexOf("."),D=B===-1;if(Z!=="request"&&Z!=="response"&&!X[D?Z:Z.slice(0,B)])return()=>{if(W&&Z==="afterHandle")Y("\nawait traceDone\n")};if(D)Q||=Z;else Q||="anonymous";Y("\n"+`reporter.emit('event', { 
					id,
					event: '${Z}',
					type: 'begin',
					name: '${Q}',
					time: performance.now(),
					${D?`unit: ${z},`:""}
					${J}
				})`.replace(/(\t| |\n)/g,"")+"\n");let A=!1;return()=>{if(A)return;if(A=!0,Y("\n"+`reporter.emit('event', {
							id,
							event: '${Z}',
							type: 'end',
							time: performance.now()
						})`.replace(/(\t| |\n)/g,"")+"\n"),W&&Z==="afterHandle")Y("\nawait traceDone\n")}};else return()=>()=>{}},w$=($)=>{const W=$.indexOf(")");if($.charCodeAt(W+2)===61&&$.charCodeAt(W+5)!==123)return!0;return $.includes("return")},B7=($,{injectResponse:W=""}={})=>({composeValidation:(Y,X=`c.${Y}`)=>$?`c.set.status = 400; throw new ValidationError(
'${Y}',
${Y},
${X}
)`:`c.set.status = 400; return new ValidationError(
	'${Y}',
	${Y},
	${X}
).toResponse(c.set.headers)`,composeResponseValidation:(Y="r")=>{const X=$?`throw new ValidationError(
'response',
response[c.set.status],
${Y}
)`:`return new ValidationError(
'response',
response[c.set.status],
${Y}
).toResponse(c.set.headers)`;return`\n${W}
		if(response[c.set.status]?.Check(${Y}) === false) { 
	if(!(response instanceof Error))
		${X}
}\n`}}),K0=($,W)=>{if(W=W.trimStart(),W=W.replaceAll(/^async /g,""),/^(\w+)\(/g.test(W))W=W.slice(W.indexOf("("));const Y=W.charCodeAt(0)===40||W.startsWith("function")?W.slice(W.indexOf("(")+1,W.indexOf(")")):W.slice(0,W.indexOf("=")-1);if(Y==="")return!1;const X=Y.charCodeAt(0)===123?Y.indexOf("..."):-1;if(Y.charCodeAt(0)===123){if(Y.includes($))return!0;if(X===-1)return!1}if(W.match(new RegExp(`${Y}(.${$}|\\["${$}"\\])`)))return!0;const Z=X!==-1?Y.slice(X+3,Y.indexOf(" ",X+3)):void 0;if(W.match(new RegExp(`${Z}(.${$}|\\["${$}"\\])`)))return!0;const Q=[Y];if(Z)Q.push(Z);for(let z of W.matchAll(pY))Q.push(z[1]);const J=new RegExp(`{.*?} = (${Q.join("|")})`,"g");for(let[z]of W.matchAll(J))if(z.includes(`{ ${$}`)||z.includes(`, ${$}`))return!0;return!1},D$=($)=>{if($=$.trimStart(),$=$.replaceAll(/^async /g,""),/^(\w+)\(/g.test($))$=$.slice($.indexOf("("));const W=$.charCodeAt(0)===40||$.startsWith("function")?$.slice($.indexOf("(")+1,$.indexOf(")")):$.slice(0,$.indexOf("=")-1);if(W==="")return!1;const Y=W.charCodeAt(0)===123?W.indexOf("..."):-1,X=Y!==-1?W.slice(Y+3,W.indexOf(" ",Y+3)):void 0,Z=[W];if(X)Z.push(X);for(let J of $.matchAll(pY))Z.push(J[1]);for(let J of Z)if(new RegExp(`\\b\\w+\\([^)]*\\b${J}\\b[^)]*\\)`).test($))return!0;const Q=new RegExp(`{.*?} = (${Z.join("|")})`,"g");for(let[J]of $.matchAll(Q))if(new RegExp(`\\b\\w+\\([^)]*\\b${J}\\b[^)]*\\)`).test($))return!0;return!1},t1=Symbol.for("TypeBox.Kind"),h$=($,W)=>{if(!W)return;if((t1 in W)&&W[t1]===$)return!0;if(W.type==="object"){const Y=W.properties;for(let X of Object.keys(Y)){const Z=Y[X];if(Z.type==="object"){if(h$($,Z))return!0}else if(Z.anyOf){for(let Q=0;Q<Z.anyOf.length;Q++)if(h$($,Z.anyOf[Q]))return!0}if((t1 in Z)&&Z[t1]===$)return!0}return!1}return W.properties&&(t1 in W.properties)&&W.properties[t1]===$},w8=Symbol.for("TypeBox.Transform"),R1=($)=>{if(!$)return;if($.type==="object"&&$.properties){const W=$.properties;for(let Y of Object.keys(W)){const X=W[Y];if(X.type==="object"){if(R1(X))return!0}else if(X.anyOf){for(let Q=0;Q<X.anyOf.length;Q++)if(R1(X.anyOf[Q]))return!0}if(w8 in X)return!0}return!1}return(w8 in $)||$.properties&&(w8 in $.properties)},F7=($)=>{if(!$)return;const W=$?.schema;if(W&&("anyOf"in W)){let Y=!1;const X=W.anyOf[0].type;for(let Z of W.anyOf)if(Z.type!==X){Y=!0;break}if(!Y)return X}return $.schema?.type},A7=/(?:return|=>) \S*\(/g,N0=($)=>{if($.constructor.name==="AsyncFunction")return!0;return $.toString().match(A7)},uY=({path:$,method:W,hooks:Y,validator:X,handler:Z,handleError:Q,definitions:J,schema:z,onRequest:B,config:D,reporter:A})=>{const S=D.forceErrorEncapsulation||Y.error.length>0||typeof Bun==="undefined"||Y.onResponse.length>0||!!Y.trace.length,G=Y.onResponse.length?`\n;(async () => {${Y.onResponse.map((b,f)=>`await res${f}(c)`).join(";")}})();\n`:"",K=Y.trace.map((b)=>b.toString());let N=!1;if(D$(Z.toString()))N=!0;if(!N)for(let[b,f]of Object.entries(Y)){if(!Array.isArray(f)||!f.length||!["parse","transform","beforeHandle","afterHandle","onResponse"].includes(b))continue;for(let i of f){if(typeof i!=="function")continue;if(D$(i.toString())){N=!0;break}}if(N)break}const j={parse:K.some((b)=>K0("parse",b)),transform:K.some((b)=>K0("transform",b)),handle:K.some((b)=>K0("handle",b)),beforeHandle:K.some((b)=>K0("beforeHandle",b)),afterHandle:K.some((b)=>K0("afterHandle",b)),error:S||K.some((b)=>K0("error",b))},O=Y.trace.length>0;let U="";if(O)U+="\nconst id = c.$$requestId\n";U+=S?"try {\n":"";const w=X||W!=="GET"&&W!=="HEAD"?[Z,...Y.transform,...Y.beforeHandle,...Y.afterHandle].map((b)=>b.toString()):[],I=N||W!=="GET"&&W!=="HEAD"&&Y.type!=="none"&&(!!X.body||!!Y.type||w.some((b)=>K0("body",b))),R=N||X.headers||w.some((b)=>K0("headers",b)),x=N||X.cookie||w.some((b)=>K0("cookie",b)),_=X?.cookie?.schema;let e="";if(_?.sign){if(!_.secrets)throw new Error(`t.Cookie required secret which is not set in (${W}) ${$}.`);const b=!_.secrets?void 0:typeof _.secrets==="string"?_.secrets:_.secrets[0];if(e+=`const _setCookie = c.set.cookie
		if(_setCookie) {`,_.sign===!0)e+=`for(const [key, cookie] of Object.entries(_setCookie)) {
				c.set.cookie[key].value = await signCookie(cookie.value, '${b}')
			}`;else for(let f of _.sign)e+=`if(_setCookie['${f}']?.value) { c.set.cookie['${f}'].value = await signCookie(_setCookie['${f}'].value, '${b}') }\n`;e+="}\n"}const{composeValidation:o,composeResponseValidation:r}=B7(S);if(R)U+=U7?"c.headers = c.request.headers.toJSON()\n":`c.headers = {}
                for (const [key, value] of c.request.headers.entries())
					c.headers[key] = value
				`;if(x){const b=(i,n)=>{const q0=_?.[i]??n;if(!q0)return typeof n==="string"?`${i}: "${n}",`:`${i}: ${n},`;if(typeof q0==="string")return`${i}: '${q0}',`;if(q0 instanceof Date)return`${i}: new Date(${q0.getTime()}),`;return`${i}: ${q0},`},f=_?`{
			secret: ${_.secrets!==void 0?typeof _.secrets==="string"?`'${_.secrets}'`:"["+_.secrets.reduce((i,n)=>i+`'${n}',`,"")+"]":"undefined"},
			sign: ${_.sign===!0?!0:_.sign!==void 0?"["+_.sign.reduce((i,n)=>i+`'${n}',`,"")+"]":"undefined"},
			${b("domain")}
			${b("expires")}
			${b("httpOnly")}
			${b("maxAge")}
			${b("path","/")}
			${b("priority")}
			${b("sameSite")}
			${b("secure")}
		}`:"undefined";if(R)U+=`\nc.cookie = await parseCookie(c.set, c.headers.cookie, ${f})\n`;else U+=`\nc.cookie = await parseCookie(c.set, c.request.headers.get('cookie'), ${f})\n`}if(N||X.query||w.some((b)=>K0("query",b)))U+=`const url = c.request.url

		if(c.qi !== -1) {
			c.query ??= parseQuery(url.substring(c.qi + 1))
		} else {
			c.query ??= {}
		}
		`;const E0=Y.trace.map((b)=>b.toString()).some((b)=>K0("set",b)||D$(b));N||Y.trace.some((b)=>K0("set",b.toString()));const H0=E0||x||w.some((b)=>K0("set",b))||B.some((b)=>K0("set",b.toString())),z0=mY({hasTrace:O,hasTraceSet:E0,condition:j,addFn:(b)=>{U+=b}});if(O)U+="\nconst traceDone = new Promise(r => { reporter.once(`res${id}`, r) })\n";const u0=x||I||E0||N0(Z)||Y.parse.length>0||Y.afterHandle.some(N0)||Y.beforeHandle.some(N0)||Y.transform.some(N0),a0=z0("parse",{unit:Y.parse.length});if(I){const b=F7(X?.body);if(Y.type&&!Array.isArray(Y.type)){if(Y.type)switch(Y.type){case"json":case"application/json":U+="c.body = await c.request.json()\n";break;case"text":case"text/plain":U+="c.body = await c.request.text()\n";break;case"urlencoded":case"application/x-www-form-urlencoded":U+="c.body = parseQuery(await c.request.text())\n";break;case"arrayBuffer":case"application/octet-stream":U+="c.body = await c.request.arrayBuffer()\n";break;case"formdata":case"multipart/form-data":U+=`c.body = {}

						const form = await c.request.formData()
						for (const key of form.keys()) {
							if (c.body[key])
								continue

							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						}\n`;break}if(Y.parse.length)U+="}}"}else{const i=(()=>{if(Y.parse.length&&b&&!Array.isArray(Y.type)){const n=X?.body?.schema;switch(b){case"object":if(h$("File",n)||h$("Files",n))return`c.body = {}
		
								const form = await c.request.formData()
								for (const key of form.keys()) {
									if (c.body[key])
										continue
			
									const value = form.getAll(key)
									if (value.length === 1)
										c.body[key] = value[0]
									else c.body[key] = value
								}`;break;default:break}}})();if(i)U+=i;else{if(U+="\n",U+=R?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",U+=`
				if (contentType) {
					const index = contentType.indexOf(';')
					if (index !== -1) contentType = contentType.substring(0, index)\n`,Y.parse.length){U+="let used = false\n";const n=z0("parse",{unit:Y.parse.length});for(let q0=0;q0<Y.parse.length;q0++){const A0=z0("parse.unit",{name:Y.parse[q0].name}),w0=`bo${q0}`;if(q0!==0)U+="if(!used) {\n";if(U+=`let ${w0} = parse[${q0}](c, contentType)\n`,U+=`if(${w0} instanceof Promise) ${w0} = await ${w0}\n`,U+=`if(${w0} !== undefined) { c.body = ${w0}; used = true }\n`,A0(),q0!==0)U+="}"}n()}if(Y.parse.length)U+="if (!used)";U+=`
				switch (contentType) {
					case 'application/json':
						c.body = await c.request.json()
						break
				
					case 'text/plain':
						c.body = await c.request.text()
						break
				
					case 'application/x-www-form-urlencoded':
						c.body = parseQuery(await c.request.text())
						break
				
					case 'application/octet-stream':
						c.body = await c.request.arrayBuffer();
						break
				
					case 'multipart/form-data':
						c.body = {}
				
						const form = await c.request.formData()
						for (const key of form.keys()) {
							if (c.body[key])
								continue
				
							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						}
				
						break
					}\n`,U+="}\n"}}U+="\n"}if(a0(),Y?.transform){const b=z0("transform",{unit:Y.transform.length});for(let f=0;f<Y.transform.length;f++){const i=Y.transform[f],n=z0("transform.unit",{name:i.name});if(i.$elysia==="derive")U+=N0(Y.transform[f])?`Object.assign(c, await transform[${f}](c));`:`Object.assign(c, transform[${f}](c));`;else U+=N0(Y.transform[f])?`await transform[${f}](c);`:`transform[${f}](c);`;n()}b()}if(X){if(U+="\n",X.headers){if(U+=`if(headers.Check(c.headers) === false) {
				${o("headers")}
			}`,R1(X.headers.schema))U+="\nc.headers = headers.Decode(c.headers)\n"}if(X.params){if(U+=`if(params.Check(c.params) === false) {
				${o("params")}
			}`,R1(X.params.schema))U+="\nc.params = params.Decode(c.params)\n"}if(X.query){if(U+=`if(query.Check(c.query) === false) {
				${o("query")} 
			}`,R1(X.query.schema))U+="\nc.query = query.Decode(Object.assign({}, c.query))\n"}if(X.body){if(U+=`if(body.Check(c.body) === false) { 
				${o("body")}
			}`,R1(X.body.schema))U+="\nc.body = body.Decode(c.body)\n"}if(t0(X.cookie?.schema.properties??{})){if(U+=`const cookieValue = {}
			for(const [key, value] of Object.entries(c.cookie))
				cookieValue[key] = value.value

			if(cookie.Check(cookieValue) === false) {
				${o("cookie","cookieValue")}
			}`,R1(X.cookie.schema))U+="\nc.cookie = params.Decode(c.cookie)\n"}}if(Y?.beforeHandle){const b=z0("beforeHandle",{unit:Y.beforeHandle.length});for(let f=0;f<Y.beforeHandle.length;f++){const i=z0("beforeHandle.unit",{name:Y.beforeHandle[f].name}),n=`be${f}`;if(!w$(Y.beforeHandle[f].toString()))U+=N0(Y.beforeHandle[f])?`await beforeHandle[${f}](c);\n`:`beforeHandle[${f}](c);\n`,i();else{U+=N0(Y.beforeHandle[f])?`let ${n} = await beforeHandle[${f}](c);\n`:`let ${n} = beforeHandle[${f}](c);\n`,i(),U+=`if(${n} !== undefined) {\n`;const A0=z0("afterHandle",{unit:Y.transform.length});if(Y.afterHandle){const w0=n;for(let D0=0;D0<Y.afterHandle.length;D0++){const M0=w$(Y.afterHandle[D0].toString()),A1=z0("afterHandle.unit",{name:Y.afterHandle[D0].name});if(U+=`c.response = ${w0}\n`,!M0)U+=N0(Y.afterHandle[D0])?`await afterHandle[${D0}](c, ${w0});\n`:`afterHandle[${D0}](c, ${w0});\n`;else{const P=`af${D0}`;U+=N0(Y.afterHandle[D0])?`const ${P} = await afterHandle[${D0}](c);\n`:`const ${P} = afterHandle[${D0}](c);\n`,U+=`if(${P} !== undefined) { c.response = ${w0} = ${P} }\n`}A1()}}if(A0(),X.response)U+=r(n);U+=e,U+=`return mapEarlyResponse(${n}, c.set)}\n`}}b()}if(Y?.afterHandle.length){const b=z0("handle",{name:Z.name});if(Y.afterHandle.length)U+=N0(Z)?"let r = c.response = await handler(c);\n":"let r = c.response = handler(c);\n";else U+=N0(Z)?"let r = await handler(c);\n":"let r = handler(c);\n";b();const f=z0("afterHandle",{unit:Y.afterHandle.length});for(let i=0;i<Y.afterHandle.length;i++){const n=`af${i}`,q0=w$(Y.afterHandle[i].toString()),A0=z0("afterHandle.unit",{name:Y.afterHandle[i].name});if(!q0)U+=N0(Y.afterHandle[i])?`await afterHandle[${i}](c)\n`:`afterHandle[${i}](c)\n`,A0();else{if(X.response)U+=N0(Y.afterHandle[i])?`let ${n} = await afterHandle[${i}](c)\n`:`let ${n} = afterHandle[${i}](c)\n`;else U+=N0(Y.afterHandle[i])?`let ${n} = mapEarlyResponse(await afterHandle[${i}](c), c.set)\n`:`let ${n} = mapEarlyResponse(afterHandle[${i}](c), c.set)\n`;if(A0(),X.response)U+=`if(${n} !== undefined) {`,U+=r(n),U+=`${n} = mapEarlyResponse(${n}, c.set)\n`,U+=`if(${n}) {`,f(),U+=`return ${n} } }`;else U+=`if(${n}) {`,f(),U+=`return ${n}}\n`}}if(f(),U+="r = c.response\n",X.response)U+=r();if(U+=e,H0)U+="return mapResponse(r, c.set)\n";else U+="return mapCompactResponse(r)\n"}else{const b=z0("handle",{name:Z.name});if(X.response)if(U+=N0(Z)?"const r = await handler(c);\n":"const r = handler(c);\n",b(),U+=r(),z0("afterHandle")(),U+=e,H0)U+="return mapResponse(r, c.set)\n";else U+="return mapCompactResponse(r)\n";else if(j.handle||x)if(U+=N0(Z)?"let r = await handler(c);\n":"let r = handler(c);\n",b(),z0("afterHandle")(),U+=e,H0)U+="return mapResponse(r, c.set)\n";else U+="return mapCompactResponse(r)\n";else{b();const f=N0(Z)?"await handler(c) ":"handler(c)";if(z0("afterHandle")(),H0)U+=`return mapResponse(${f}, c.set)\n`;else U+=`return mapCompactResponse(${f})\n`}}if(S||G){if(U+=`
} catch(error) {`,!u0)U+="return (async () => {";U+=`const set = c.set

		if (!set.status || set.status < 300) set.status = 500
	`;const b=z0("error",{unit:Y.error.length});if(Y.error.length)for(let f=0;f<Y.error.length;f++){const i=`er${f}`,n=z0("error.unit",{name:Y.error[f].name});if(U+=`\nlet ${i} = handleErrors[${f}](
					Object.assign(c, {
						error: error,
						code: error.code ?? error[ERROR_CODE] ?? "UNKNOWN"
					})
				)\n`,N0(Y.error[f]))U+=`if (${i} instanceof Promise) ${i} = await ${i}\n`;n(),U+=`${i} = mapEarlyResponse(${i}, set)\n`,U+=`if (${i}) {`,U+=`return ${i} }\n`}if(b(),U+="return handleError(c, error)\n\n",!u0)U+="})()";if(U+="}",G||O){U+=" finally { ";const f=z0("response",{unit:Y.onResponse.length});U+=G,f(),U+="}"}}return U=`const { 
		handler,
		handleError,
		hooks: {
			transform,
			beforeHandle,
			afterHandle,
			parse,
			error: handleErrors,
			onResponse
		},
		validator: {
			body,
			headers,
			params,
			query,
			response,
			cookie
		},
		utils: {
			mapResponse,
			mapCompactResponse,
			mapEarlyResponse,
			parseQuery
		},
		error: {
			NotFoundError,
			ValidationError,
			InternalServerError
		},
		schema,
		definitions,
		ERROR_CODE,
		reporter,
		requestId,
		parseCookie,
		signCookie
	} = hooks

	${Y.onResponse.length?`const ${Y.onResponse.map((b,f)=>`res${f} = onResponse[${f}]`).join(",")}`:""}

	return ${u0?"async":""} function(c) {
		${z&&J?"c.schema = schema; c.defs = definitions;":""}
		${U}
	}`,Function("hooks",U)({handler:Z,hooks:Y,validator:X,handleError:Q,utils:{mapResponse:F1,mapCompactResponse:K1,mapEarlyResponse:r0,parseQuery:vY.parse},error:{NotFoundError:L1,ValidationError:P0,InternalServerError:f$},schema:z,definitions:J,ERROR_CODE:o1,reporter:A,requestId:iY,parseCookie:u$,signCookie:l1})},D8=($)=>{let W="",Y="";for(let K of Object.keys($.decorators))W+=`,${K}: app.decorators.${K}`;const{router:X,staticRouter:Z}=$,Q=$.event.trace.length>0,J=`
	const route = find(request.method, path) ${X.root.ALL?'?? find("ALL", path)':""}
	if (route === null)
		return ${$.event.error.length?"app.handleError(ctx, notFound)":`new Response(error404, {
					status: ctx.set.status === 200 ? 404 : ctx.set.status,
					headers: ctx.set.headers
				})`}

	ctx.params = route.params

	return route.store(ctx)`;let z="";for(let[K,{code:N,all:j}]of Object.entries(Z.map))z+=`case '${K}':\nswitch(request.method) {\n${N}\n${j??"default: break map"}}\n\n`;const B=$.event.request.some(N0);Y+=`const {
		app,
		app: { store, router, staticRouter, wsRouter },
		mapEarlyResponse,
		NotFoundError,
		requestId,
		reporter
	} = data

	const notFound = new NotFoundError()

	${$.event.request.length?"const onRequest = app.event.request":""}

	${Z.variables}

	const find = router.find.bind(router)
	const findWs = wsRouter.find.bind(wsRouter)
	const handleError = app.handleError.bind(this)

	${$.event.error.length?"":"const error404 = notFound.message.toString()"}

	return ${B?"async":""} function map(request) {
	`;const D=$.event.trace.map((K)=>K.toString()),A=mY({hasTrace:Q,hasTraceSet:$.event.trace.some((K)=>{const N=K.toString();return K0("set",N)||D$(N)}),condition:{request:D.some((K)=>K0("request",K)||D$(K))},addFn:(K)=>{Y+=K}});if($.event.request.length){Y+=`
			${Q?"const id = +requestId.value++":""}

			const ctx = {
				request,
				store,
				set: {
					cookie: {},
					headers: {},
					status: 200
				}
				${Q?",$$requestId: +id":""}
				${W}
			}
		`;const K=A("request",{attribute:"ctx",unit:$.event.request.length});Y+="try {\n";for(let N=0;N<$.event.request.length;N++){const j=$.event.request[N],O=w$(j.toString()),U=N0(j),w=A("request.unit",{name:$.event.request[N].name}),I=`re${N}`;if(O)Y+=`const ${I} = mapEarlyResponse(
					${U?"await":""} onRequest[${N}](ctx),
					ctx.set
				)\n`,w(),Y+=`if(${I}) return ${I}\n`;else Y+=`${U?"await":""} onRequest[${N}](ctx)\n`,w()}Y+=`} catch (error) {
			return app.handleError(ctx, error)
		}`,K(),Y+=`
		const url = request.url,
		s = url.indexOf('/', 11),
		i = ctx.qi = url.indexOf('?', s + 1),
		path = ctx.path = i === -1 ? url.substring(s) : url.substring(s, i);`}else Y+=`
		const url = request.url,
			s = url.indexOf('/', 11),
			qi = url.indexOf('?', s + 1),
			path = qi === -1
				? url.substring(s)
				: url.substring(s, qi)

		${Q?"const id = +requestId.value++":""}

		const ctx = {
			request,
			store,
			qi,
			path,
			set: {
				headers: {},
				status: 200
			}
			${Q?",$$requestId: id":""}
			${W}
		}`,A("request",{unit:$.event.request.length,attribute:D.some((K)=>K0("context",K))||D.some((K)=>K0("store",K))||D.some((K)=>K0("set",K))?"ctx":""})();const{wsPaths:S,wsRouter:G}=$;if(Object.keys(S).length||G.history.length){Y+=`
			if(request.method === 'GET') {
				switch(path) {`;for(let[K,N]of Object.entries(S))Y+=`
					case '${K}':
						if(request.headers.get('upgrade') === 'websocket')
							return st${N}(ctx)
							
						break`;Y+=`
				default:
					if(request.headers.get('upgrade') === 'websocket') {
						const route = findWs('ws', path)

						if(route) {
							ctx.params = route.params

							return route.store(ctx)
						}
					}

					break
			}
		}\n`}return Y+=`
		map: switch(path) {
			${z}

			default:
				break
		}

		${J}
	}`,$.handleError=K8($),Function("data",Y)({app:$,mapEarlyResponse:r0,NotFoundError:L1,reporter:$.reporter,requestId:iY})},K8=($)=>{let W=`const {
		app: { event: { error: onError, onResponse: res } },
		mapResponse,
		ERROR_CODE
	} = inject

	return ${$.event.error.find(N0)?"async":""} function(context, error) {
		const { set } = context
		`;for(let Y=0;Y<$.event.error.length;Y++){const X=$.event.error[Y],Z=`${N0(X)?"await ":""}onError[${Y}](
			Object.assign(context, {
				code: error.code ?? error[ERROR_CODE] ?? 'UNKNOWN',
				error
			})
		)`;if(w$(X.toString()))W+=`const r${Y} = ${Z}; if(r${Y} !== undefined) return mapResponse(r${Y}, set)\n`;else W+=Z+"\n"}return W+=`if(error.constructor.name === "ValidationError") {
		set.status = error.status ?? 400
		return new Response(
			error.message, 
			{ headers: set.headers, status: set.status }
		)
	} else {
		return new Response(error.message, { headers: set.headers, status: error.status ?? 500 })
	}
}`,Function("inject",W)({app:$,mapResponse:F1,ERROR_CODE:o1})};var o$=Q1(A8(),1);var j8=($)=>async(W)=>{const Y={cookie:{},status:200,headers:{}};let X;if($.decorators)X=$.decorators,X.request=W,X.set=Y,X.store=$.store;else X={set:Y,store:$.store,request:W};const Z=W.url,Q=Z.indexOf("/",11),J=Z.indexOf("?",Q+1),z=J===-1?Z.substring(Q):Z.substring(Q,J);try{for(let O=0;O<$.event.request.length;O++){const U=$.event.request[O];let w=U(X);if(w instanceof Promise)w=await w;if(w=r0(w,Y),w)return w}const B=$.dynamicRouter.find(W.method,z)??$.dynamicRouter.find("ALL",z);if(!B)throw new L1;const{handle:D,hooks:A,validator:S,content:G}=B.store;let K;if(W.method!=="GET"&&W.method!=="HEAD")if(G)switch(G){case"application/json":K=await W.json();break;case"text/plain":K=await W.text();break;case"application/x-www-form-urlencoded":K=o$.parse(await W.text());break;case"application/octet-stream":K=await W.arrayBuffer();break;case"multipart/form-data":K={};const O=await W.formData();for(let U of O.keys()){if(K[U])continue;const w=O.getAll(U);if(w.length===1)K[U]=w[0];else K[U]=w}break}else{let O=W.headers.get("content-type");if(O){const U=O.indexOf(";");if(U!==-1)O=O.slice(0,U);for(let w=0;w<$.event.parse.length;w++){let I=$.event.parse[w](X,O);if(I instanceof Promise)I=await I;if(I){K=I;break}}if(K===void 0)switch(O){case"application/json":K=await W.json();break;case"text/plain":K=await W.text();break;case"application/x-www-form-urlencoded":K=o$.parse(await W.text());break;case"application/octet-stream":K=await W.arrayBuffer();break;case"multipart/form-data":K={};const w=await W.formData();for(let I of w.keys()){if(K[I])continue;const R=w.getAll(I);if(R.length===1)K[I]=R[0];else K[I]=R}break}}}X.body=K,X.params=B?.params||void 0,X.query=J===-1?{}:o$.parse(Z.substring(J+1)),X.headers={};for(let[O,U]of W.headers.entries())X.headers[O]=U;const N=S?.cookie?.schema;X.cookie=await u$(X.set,X.headers.cookie,N?{secret:N.secrets!==void 0?typeof N.secrets==="string"?N.secrets:N.secrets.join(","):void 0,sign:N.sign===!0?!0:N.sign!==void 0?typeof N.sign==="string"?N.sign:N.sign.join(","):void 0}:void 0);for(let O=0;O<A.transform.length;O++){const U=A.transform[O](X);if(A.transform[O].$elysia==="derive")if(U instanceof Promise)Object.assign(X,await U);else Object.assign(X,U);else if(U instanceof Promise)await U}if(S){if(S.headers){const O={};for(let U in W.headers)O[U]=W.headers.get(U);if(S.headers.Check(O)===!1)throw new P0("header",S.headers,O)}if(S.params?.Check(X.params)===!1)throw new P0("params",S.params,X.params);if(S.query?.Check(X.query)===!1)throw new P0("query",S.query,X.query);if(S.cookie){const O={};for(let[U,w]of Object.entries(X.cookie))O[U]=w.value;if(S.cookie?.Check(O)===!1)throw new P0("cookie",S.cookie,O)}if(S.body?.Check(K)===!1)throw new P0("body",S.body,K)}for(let O=0;O<A.beforeHandle.length;O++){let U=A.beforeHandle[O](X);if(U instanceof Promise)U=await U;if(U!==void 0){X.response=U;for(let I=0;I<A.afterHandle.length;I++){let R=A.afterHandle[I](X);if(R instanceof Promise)R=await R;if(R)U=R}const w=r0(U,X.set);if(w)return w}}let j=D(X);if(j instanceof Promise)j=await j;if(!A.afterHandle.length){const O=S?.response?.[j.status];if(O?.Check(j)===!1)throw new P0("response",O,j)}else{X.response=j;for(let O=0;O<A.afterHandle.length;O++){let U=A.afterHandle[O](X);if(U instanceof Promise)U=await U;const w=r0(U,X.set);if(w!==void 0){const I=S?.response?.[j.status];if(I?.Check(w)===!1)throw new P0("response",I,w);return w}}}if(X.set.cookie&&N?.sign){const O=!N.secrets?void 0:typeof N.secrets==="string"?N.secrets:N.secrets[0];if(N.sign===!0)for(let[U,w]of Object.entries(X.set.cookie))X.set.cookie[U].value=await l1(w.value,"${secret}");else for(let U of N.sign){if(!(U in N.properties))continue;if(X.set.cookie[U]?.value)X.set.cookie[U].value=await l1(X.set.cookie[U].value,O)}}return F1(j,X.set)}catch(B){if(B.status)Y.status=B.status;return $.handleError(X,B)}finally{for(let B of $.event.onResponse)await B(X)}},hY=($)=>async(W,Y)=>{const X=Object.assign(W,Y);X.set=W.set;for(let Z=0;Z<$.event.error.length;Z++){let Q=$.event.error[Z](X);if(Q instanceof Promise)Q=await Q;if(Q!==void 0&&Q!==null)return F1(Q,W.set)}return new Response(typeof Y.cause==="string"?Y.cause:Y.message,{headers:W.set.headers,status:Y.status??500})};var G1=Q1(E$(),1),W0=Q1(f0(),1);try{G1.TypeSystem.Format("email",($)=>/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test($)),G1.TypeSystem.Format("uuid",($)=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test($)),G1.TypeSystem.Format("date",($)=>!Number.isNaN(new Date($).getTime())),G1.TypeSystem.Format("date-time",($)=>!Number.isNaN(new Date($).getTime()))}catch($){}var oY=($)=>{if(typeof $==="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},P8=($,W)=>{if(!(W instanceof Blob))return!1;if($.minSize&&W.size<oY($.minSize))return!1;if($.maxSize&&W.size>oY($.maxSize))return!1;if($.extension)if(typeof $.extension==="string"){if(!W.type.startsWith($.extension))return!1}else{for(let Y=0;Y<$.extension.length;Y++)if(W.type.startsWith($.extension[Y]))return!0;return!1}return!0},w7=G1.TypeSystem.Type("Files",($,W)=>{if(!Array.isArray(W))return P8($,W);if($.minItems&&W.length<$.minItems)return!1;if($.maxItems&&W.length>$.maxItems)return!1;for(let Y=0;Y<W.length;Y++)if(!P8($,W[Y]))return!1;return!0});W0.FormatRegistry.Set("numeric",($)=>!isNaN(+$));W0.FormatRegistry.Set("ObjectString",($)=>{let W=$.charCodeAt(0);if(W===9||W===10||W===32)W=$.trimStart().charCodeAt(0);if(W!==123&&W!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});var b1={Numeric:($)=>W0.Type.Transform(W0.Type.Union([W0.Type.String({format:"numeric",default:0}),W0.Type.Number($)])).Decode((W)=>{const Y=+W;if(isNaN(Y))return W;return Y}).Encode((W)=>W),ObjectString:($,W)=>W0.Type.Transform(W0.Type.Union([W0.Type.String({format:"ObjectString",default:""}),W0.Type.Object($,W)])).Decode((Y)=>{if(typeof Y==="string")try{return JSON.parse(Y)}catch{return Y}return Y}).Encode((Y)=>JSON.stringify(Y)),File:G1.TypeSystem.Type("File",P8),Files:($={})=>W0.Type.Transform(W0.Type.Union([w7($)])).Decode((W)=>{if(Array.isArray(W))return W;return[W]}).Encode((W)=>W),Nullable:($)=>W0.Type.Union([W0.Type.Null(),$]),MaybeEmpty:($)=>W0.Type.Union([W0.Type.Null(),W0.Type.Undefined(),$]),Cookie:($,W)=>W0.Type.Object($,W)};W0.Type.ObjectString=b1.ObjectString;W0.Type.Numeric=b1.Numeric;W0.Type.File=($={})=>b1.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"});W0.Type.Files=($={})=>b1.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}});W0.Type.Nullable=($)=>b1.Nullable($);W0.Type.MaybeEmpty=b1.MaybeEmpty;W0.Type.Cookie=b1.Cookie;class n${config;dependencies={};store={};decorators={};definitions={type:{},error:{}};schema={};event={start:[],request:[],parse:[],transform:[],beforeHandle:[],afterHandle:[],onResponse:[],trace:[],error:[],stop:[]};reporter=new b8;server=null;getServer(){return this.server}validator=null;router=new j1;wsRouter=new j1;routes=[];staticRouter={handlers:[],variables:"",map:{},all:""};wsPaths={};dynamicRouter=new j1;lazyLoadModules=[];path="";constructor($){this.config={forceErrorEncapsulation:!1,prefix:"",aot:!0,strictPath:!1,scoped:!1,cookie:{},...$,seed:$?.seed===void 0?"":$?.seed}}add($,W,Y,X,{allowMeta:Z=!1,skipPrefix:Q=!1}={allowMeta:!1,skipPrefix:!1}){if(typeof W==="string")W=[W];for(let J of W){if(J=J===""?J:J.charCodeAt(0)===47?J:`/${J}`,this.config.prefix&&!Q)J=this.config.prefix+J;if(X?.type)switch(X.type){case"text":X.type="text/plain";break;case"json":X.type="application/json";break;case"formdata":X.type="multipart/form-data";break;case"urlencoded":X.type="application/x-www-form-urlencoded";break;case"arrayBuffer":X.type="application/octet-stream";break;default:break}const z=this.definitions.type;let B=X1(X?.cookie??this.validator?.cookie,{dynamic:!this.config.aot,models:z,additionalProperties:!0});if(t0(this.config.cookie??{}))if(B)B.schema=wY(B.schema,this.config.cookie??{});else B=X1(W0.Type.Cookie({},this.config.cookie),{dynamic:!this.config.aot,models:z,additionalProperties:!0});const D={body:X1(X?.body??this.validator?.body,{dynamic:!this.config.aot,models:z}),headers:X1(X?.headers??this.validator?.headers,{dynamic:!this.config.aot,models:z,additionalProperties:!0}),params:X1(X?.params??this.validator?.params,{dynamic:!this.config.aot,models:z}),query:X1(X?.query??this.validator?.query,{dynamic:!this.config.aot,models:z}),cookie:B,response:H8(X?.response??this.validator?.response,{dynamic:!this.config.aot,models:z})},A=I1(this.event,X),S=J.endsWith("/")?J.slice(0,J.length-1):J+"/";if(this.config.aot===!1){if(this.dynamicRouter.add($,J,{validator:D,hooks:A,content:X?.type,handle:Y}),this.config.strictPath===!1)this.dynamicRouter.add($,S,{validator:D,hooks:A,content:X?.type,handle:Y});this.routes.push({method:$,path:J,composed:null,handler:Y,hooks:A});return}const G=uY({path:J,method:$,hooks:A,validator:D,handler:Y,handleError:this.handleError,onRequest:this.event.request,config:this.config,definitions:Z?this.definitions.type:void 0,schema:Z?this.schema:void 0,reporter:this.reporter}),K=this.routes.findIndex((N)=>N.path===J&&N.method===$);if(K!==-1)this.routes.splice(K,1);if(this.routes.push({method:$,path:J,composed:G,handler:Y,hooks:A}),$==="$INTERNALWS"){const N=this.config.strictPath?void 0:J.endsWith("/")?J.slice(0,J.length-1):J+"/";if(J.indexOf(":")===-1&&J.indexOf("*")===-1){const j=this.staticRouter.handlers.length;if(this.staticRouter.handlers.push(G),this.staticRouter.variables+=`const st${j} = staticRouter.handlers[${j}]\n`,this.wsPaths[J]=j,N)this.wsPaths[N]=j}else if(this.wsRouter.add("ws",J,G),N)this.wsRouter.add("ws",N,G);return}if(J.indexOf(":")===-1&&J.indexOf("*")===-1){const N=this.staticRouter.handlers.length;if(this.staticRouter.handlers.push(G),this.staticRouter.variables+=`const st${N} = staticRouter.handlers[${N}]\n`,!this.staticRouter.map[J])this.staticRouter.map[J]={code:""};if($==="ALL")this.staticRouter.map[J].all=`default: return st${N}(ctx)\n`;else this.staticRouter.map[J].code=`case '${$}': return st${N}(ctx)\n${this.staticRouter.map[J].code}`;if(!this.config.strictPath){if(!this.staticRouter.map[S])this.staticRouter.map[S]={code:""};if($==="ALL")this.staticRouter.map[S].all=`default: return st${N}(ctx)\n`;else this.staticRouter.map[S].code=`case '${$}': return st${N}(ctx)\n${this.staticRouter.map[S].code}`}}else if(this.router.add($,J,G),!this.config.strictPath)this.router.add($,J.endsWith("/")?J.slice(0,J.length-1):J+"/",G)}}onStart($){return this.on("start",$),this}onRequest($){return this.on("request",$),this}onParse($){return this.on("parse",$),this}onTransform($){return this.on("transform",$),this}onBeforeHandle($){return this.on("beforeHandle",$),this}onAfterHandle($){return this.on("afterHandle",$),this}onResponse($){return this.on("response",$),this}trace($){return this.reporter.on("event",_8(this.reporter,$)),this.on("trace",$),this}addError($,W){return this.error($,W)}error($,W){switch(typeof $){case"string":return W.prototype[o1]=$,this.definitions.error[$]=W,this;case"function":return this.definitions.error=$(this.definitions.error),this}for(let[Y,X]of Object.entries($))X.prototype[o1]=Y,this.definitions.error[Y]=X;return this}onError($){return this.on("error",$),this}onStop($){return this.on("stop",$),this}on($,W){for(let Y of Array.isArray(W)?W:[W])switch(Y=DY(Y),$){case"start":this.event.start.push(Y);break;case"request":this.event.request.push(Y);break;case"response":this.event.onResponse.push(Y);break;case"parse":this.event.parse.splice(this.event.parse.length-1,0,Y);break;case"transform":this.event.transform.push(Y);break;case"beforeHandle":this.event.beforeHandle.push(Y);break;case"afterHandle":this.event.afterHandle.push(Y);break;case"trace":this.event.trace.push(Y);break;case"error":this.event.error.push(Y);break;case"stop":this.event.stop.push(Y);break}return this}group($,W,Y){const X=new n$({...this.config,prefix:""});X.store=this.store;const Z=typeof W==="object",Q=(Z?Y:W)(X);if(this.decorators=B1(this.decorators,X.decorators),Q.event.request.length)this.event.request=[...this.event.request,...Q.event.request];if(Q.event.onResponse.length)this.event.onResponse=[...this.event.onResponse,...Q.event.onResponse];return this.model(Q.definitions.type),Object.values(X.routes).forEach(({method:J,path:z,handler:B,hooks:D})=>{if(z=(Z?"":this.config.prefix)+$+z,Z){const A=W,S=D;this.add(J,z,B,I1(A,{...S,error:!S.error?Q.event.error:Array.isArray(S.error)?[...S.error,...Q.event.error]:[S.error,...Q.event.error]}))}else this.add(J,z,B,I1(D,{error:Q.event.error}),{skipPrefix:!0})}),this}guard($,W){if(!W)return this.event=m$(this.event,$),this.validator={body:$.body,headers:$.headers,params:$.params,query:$.query,response:$.response},this;const Y=new n$;Y.store=this.store;const X=W(Y);if(this.decorators=B1(this.decorators,Y.decorators),X.event.request.length)this.event.request=[...this.event.request,...X.event.request];if(X.event.onResponse.length)this.event.onResponse=[...this.event.onResponse,...X.event.onResponse];return this.model(X.definitions.type),Object.values(Y.routes).forEach(({method:Z,path:Q,handler:J,hooks:z})=>{this.add(Z,Q,J,I1($,{...z,error:!z.error?X.event.error:Array.isArray(z.error)?[...z.error,...X.event.error]:[z.error,...X.event.error]}))}),this}use($){if($ instanceof Promise)return this.lazyLoadModules.push($.then((W)=>{if(typeof W==="function")return W(this);if(typeof W.default==="function")return W.default(this);return this._use(W)}).then((W)=>W.compile())),this;else return this._use($);return this}_use($){if(typeof $==="function"){const Z=$(this);if(Z instanceof Promise)return this.lazyLoadModules.push(Z.then((Q)=>{if(typeof Q==="function")return Q(this);if(typeof Q.default==="function")return Q.default(this);return this._use(Q)}).then((Q)=>Q.compile())),this;return Z}const{name:W,seed:Y}=$.config;$.getServer=()=>this.getServer();const X=$.config.scoped;if(X){if(W){if(!(W in this.dependencies))this.dependencies[W]=[];const Q=Y!==void 0?q8(W+JSON.stringify(Y)):0;if(this.dependencies[W].some((J)=>Q===J))return this;this.dependencies[W].push(Q)}if($.model(this.definitions.type),$.error(this.definitions.error),$.onRequest((Q)=>{Object.assign(Q,this.decorators),Object.assign(Q.store,this.store)}),$.event.trace=[...this.event.trace,...$.event.trace],$.config.aot)$.compile();const Z=this.mount($.fetch);return this.routes=this.routes.concat(Z.routes),this}this.decorate($.decorators),this.state($.store),this.model($.definitions.type),this.error($.definitions.error);for(let{method:Z,path:Q,handler:J,hooks:z}of Object.values($.routes))this.add(Z,Q,J,I1(z,{error:$.event.error}));if(!X)if(W){if(!(W in this.dependencies))this.dependencies[W]=[];const Z=Y!==void 0?q8(W+JSON.stringify(Y)):0;if(this.dependencies[W].some((Q)=>Z===Q))return this;this.dependencies[W].push(Z),this.event=m$(this.event,M8($.event),Z)}else this.event=m$(this.event,M8($.event));return this}mount($,W){if(typeof $==="function"||$.length===0||$==="/"){const Z=typeof $==="function"?$:W,Q=async({request:J,path:z})=>Z(new Request("http://a.cc"+z||"/",J));return this.all("/",Q,{type:"none"}),this.all("/*",Q,{type:"none"}),this}const Y=$.length,X=async({request:Z,path:Q})=>W(new Request("http://a.cc"+Q.slice(Y)||"/",Z));return this.all($,X,{type:"none"}),this.all($+($.endsWith("/")?"*":"/*"),X,{type:"none"}),this}get($,W,Y){return this.add("GET",$,W,Y),this}post($,W,Y){return this.add("POST",$,W,Y),this}put($,W,Y){return this.add("PUT",$,W,Y),this}patch($,W,Y){return this.add("PATCH",$,W,Y),this}delete($,W,Y){return this.add("DELETE",$,W,Y),this}options($,W,Y){return this.add("OPTIONS",$,W,Y),this}all($,W,Y){return this.add("ALL",$,W,Y),this}head($,W,Y){return this.add("HEAD",$,W,Y),this}connect($,W,Y){return this.add("CONNECT",$,W,Y),this}ws($,W){const Y=W.transformMessage?Array.isArray(W.transformMessage)?W.transformMessage:[W.transformMessage]:void 0;let X=null;const Z=X1(W?.body,{models:this.definitions.type}),Q=X1(W?.response,{models:this.definitions.type}),J=(z)=>{if(typeof z==="string"){const B=z?.charCodeAt(0);if(B===47||B===123)try{z=JSON.parse(z)}catch{}else if(!Number.isNaN(+z))z=+z}if(Y?.length)for(let B=0;B<Y.length;B++){const D=Y[B](z);if(D!==void 0)z=D}return z};return this.route("$INTERNALWS",$,(z)=>{const{set:B,path:D,qi:A,headers:S,query:G,params:K}=z;if(X===null)X=this.getServer();if(X?.upgrade(z.request,{headers:typeof W.upgrade==="function"?W.upgrade(z):W.upgrade,data:{validator:Q,open(N){W.open?.(new n1(N,z))},message:(N,j)=>{const O=J(j);if(Z?.Check(O)===!1)return void N.send(new P0("message",Z,O).message);W.message?.(new n1(N,z),O)},drain(N){W.drain?.(new n1(N,z))},close(N,j,O){W.close?.(new n1(N,z),j,O)}}}))return;return B.status=400,"Expected a websocket connection"},{beforeHandle:W.beforeHandle,transform:W.transform,headers:W.headers,params:W.params,query:W.query}),this}route($,W,Y,{config:X,...Z}={config:{allowMeta:!1}}){return this.add($,W,Y,Z,X),this}state($,W){switch(typeof $){case"object":return this.store=B1(this.store,$),this;case"function":return this.store=$(this.store),this}if(!($ in this.store))this.store[$]=W;return this}decorate($,W){switch(typeof $){case"object":return this.decorators=B1(this.decorators,$),this;case"function":return this.decorators=$(this.decorators),this}if(!($ in this.decorators))this.decorators[$]=W;return this}derive($){return $.$elysia="derive",this.onTransform($)}model($,W){switch(typeof $){case"object":return Object.entries($).forEach(([Y,X])=>{if(!(Y in this.definitions.type))this.definitions.type[Y]=X}),this;case"function":return this.definitions.type=$(this.definitions.type),this}return this.definitions.type[$]=W,this}mapDerive($){return $.$elysia="derive",this.onTransform($)}affix($,W,Y){if(Y==="")return this;const X=["_","-"," "],Z=(B)=>B[0].toUpperCase()+B.slice(1),Q=$==="prefix"?(B,D)=>X.includes(B.at(-1)??"")?B+D:B+Z(D):X.includes(Y.at(-1)??"")?(B,D)=>D+B:(B,D)=>D+Z(B),J=(B)=>{const D={};switch(B){case"decorator":for(let A in this.decorators)D[Q(Y,A)]=this.decorators[A];this.decorators=D;break;case"state":for(let A in this.store)D[Q(Y,A)]=this.store[A];this.store=D;break;case"model":for(let A in this.definitions.type)D[Q(Y,A)]=this.definitions.type[A];this.definitions.type=D;break;case"error":for(let A in this.definitions.error)D[Q(Y,A)]=this.definitions.error[A];this.definitions.error=D;break}},z=Array.isArray(W)?W:[W];for(let B of z.some((D)=>D==="all")?["decorator","state","model","error"]:z)J(B);return this}prefix($,W){return this.affix("prefix",$,W)}suffix($,W){return this.affix("suffix",$,W)}compile(){if(this.fetch=this.config.aot?D8(this):j8(this),typeof this.server?.reload==="function")this.server.reload({...this.server,fetch:this.fetch});return this}handle=async($)=>this.fetch($);fetch=($)=>(this.fetch=this.config.aot?D8(this):j8(this))($);handleError=async($,W)=>(this.handleError=this.config.aot?K8(this):hY(this))($,W);outerErrorHandler=($)=>new Response($.message||$.name||"Error",{status:$?.status??500});listen=($,W)=>{if(!Bun)throw new Error("Bun to run");if(this.compile(),typeof $==="string"){if($=+$.trim(),Number.isNaN($))throw new Error("Port must be a numeric value")}const Y=this.fetch,X=typeof $==="object"?{development:!q$,...this.config.serve,...$,websocket:{...this.config.websocket,...W8},fetch:Y,error:this.outerErrorHandler}:{development:!q$,...this.config.serve,websocket:{...this.config.websocket,...W8},port:$,fetch:Y,error:this.outerErrorHandler};if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if(this.server=Bun?.serve(X),this.event.start.length)(async()=>{const Z=Object.assign(this.decorators,{store:this.store,app:this});for(let Q=0;Q<this.event.transform.length;Q++){const J=this.event.transform[Q](Z);if(this.event.transform[Q].$elysia==="derive")if(J instanceof Promise)Object.assign(Z,await J);else Object.assign(Z,J)}for(let Q=0;Q<this.event.start.length;Q++)this.event.start[Q](Z)})();if(W)W(this.server);return Promise.all(this.lazyLoadModules).then(()=>{Bun?.gc(!1)}),this};stop=async()=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if(this.server.stop(),this.event.stop.length)(async()=>{const $=Object.assign(this.decorators,{store:this.store,app:this});for(let W=0;W<this.event.transform.length;W++){const Y=this.event.transform[W]($);if(this.event.transform[W].$elysia==="derive")if(Y instanceof Promise)Object.assign($,await Y);else Object.assign($,Y)}for(let W=0;W<this.event.stop.length;W++)this.event.stop[W]($)})()};get modules(){return Promise.all(this.lazyLoadModules)}}var export_t=W0.Type;export{export_t as t,O0 as mergeObjectArray,I1 as mergeHook,B1 as mergeDeep,F1 as mapResponse,r0 as mapEarlyResponse,K1 as mapCompactResponse,X1 as getSchemaValidator,H8 as getResponseSchemaValidator,n$ as default,P0 as ValidationError,qY as ParseError,L1 as NotFoundError,M$ as InvalidCookieSignature,f$ as InternalServerError,n$ as Elysia,s0 as Cookie};

//# debugId=00B26DF9D1AA8FED64756e2164756e21
